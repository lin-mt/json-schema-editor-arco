(self.webpackChunk_quiet_front_end_json_schema_editor_arco=self.webpackChunk_quiet_front_end_json_schema_editor_arco||[]).push([[593],{77102:function(Ne,_,r){"use strict";r.r(_),r.d(_,{demos:function(){return Y}});var Ce=r(15009),v=r.n(Ce),Oe=r(99289),ae=r.n(Oe),W=r(67294),Ue=r(57396),Fe=r(41653),Y={"jsonschemaeditor-demo-0":{component:W.memo(W.lazy(ae()(v()().mark(function s(){var ce,fe;return v()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,Promise.resolve().then(r.bind(r,41653));case 2:return ce=z.sent,fe=ce.JsonSchemaEditor,z.abrupt("return",{default:function(){return W.createElement(fe,{defaultExpand:!1})}});case 5:case"end":return z.stop()}},s)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-arco';

export default () => <JsonSchemaEditor defaultExpand={false} />;`},"@quiet-front-end/json-schema-editor-arco":{type:"NPM",value:"1.0.5"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-arco":Fe},renderOpts:{compile:function(){var s=ae()(v()().mark(function fe(){var T,z=arguments;return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,r.e(335).then(r.bind(r,37335));case 2:return ee.abrupt("return",(T=ee.sent).default.apply(T,z));case 3:case"end":return ee.stop()}},fe)}));function ce(){return s.apply(this,arguments)}return ce}()}}}},41653:function(Ne,_,r){"use strict";r.r(_),r.d(_,{JsonSchemaEditor:function(){return St}});var Ce=r(5574),v=r.n(Ce),Oe=r(52677),ae=r.n(Oe),W=r(80507),Ue=r(81917),Fe=r(96486),Y=r.n(Fe),s=r(67294),ce={type:"object",properties:{field:{title:"\u9ED8\u8BA4\u6807\u9898",type:"object",properties:{name:{title:"",type:"string"}}},col:{title:"\u9ED8\u8BA4\u6807\u9898",type:"object",properties:{age:{title:"",type:"string",description:"\u9ED8\u8BA4\u63CF\u8FF0"}}}}},fe=r(15009),T=r.n(fe),z=r(99289),he=r.n(z),ee=r(97857),H=r.n(ee),ye=r(74668),Ee=r(53794),oe=r(56187),me=r(87108),ze=r(54224),be=r(15695),He=r(72404),Ze=r(59330),Ge=r(99042),Qe=r(67945),Xe=r(94677),Le=r(84566),Ye=r(14539),Te=r(61873),$e=r(31826),qe=r(74122),_e=r(63764),et={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=r(85893),tt=function(n){var f=n.width,S=n.lineNumbers,I=S===void 0?"on":S,o=n.height,C=n.value,O=n.folding,x=O===void 0?!0:O,E=n.language,P=n.readOnly,y=P===void 0?!1:P,N=n.renderLineHighlight,Q=N===void 0?"all":N,K=n.onChange;function d(w){w.editor.defineTheme("x-code-default",et)}return(0,e.jsx)("div",{style:{border:"1px solid rgb(var(--color-border))",width:f||"100%"},children:(0,e.jsx)(_e.ZP,{height:o,width:f,value:C,language:E,onChange:K,onMount:n.handleEditorDidMount,beforeMount:d,theme:"x-code-default",options:{readOnly:y,lineNumbers:I,renderLineHighlight:Q,folding:x,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{},minimap:{enabled:!1}}})})},Ke=tt,nt=r(64599),rt=r.n(nt),at=r(65009),ot=r.n(at);function ie(t,n){if(t.$ref){var f=t.$ref;if(f.startsWith("#/")){var S=f.slice(2).split("/"),I=Y().cloneDeep(n),o=rt()(S),C;try{for(o.s();!(C=o.n()).done;){var O=C.value;if(I[O])I=I[O];else throw new Error("Unable to resolve $ref: ".concat(f))}}catch(E){o.e(E)}finally{o.f()}return I}else throw new Error("Unsupported $ref format: ".concat(f))}if(t.properties)for(var x in t.properties)t.properties[x]&&(t.properties[x]=ie(t.properties[x],n));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(E){return ie(E,n)}):t.items=ie(t.items,n)),t.oneOf&&(t.oneOf=t.oneOf.map(function(E){return ie(E,n)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(E){return ie(E,n)})),t.allOf&&(t.allOf=t.allOf.map(function(E){return ie(E,n)})),t}function se(t){var n;if(t.$ref){var f=t.$ref;if(f.startsWith("#/")){var S=f.slice(2).split("/");return S[0]}if(t.properties){for(var I in t.properties)if(t.properties[I]&&(n=se(t.properties[I]),n))return n}}if(t.items){if(Array.isArray(t.items))for(var o=0;o<t.items.length;o++){var C=t.items[o];if(n=se(C),n)return n}else if(n=se(t.items),n)return n}if(t.oneOf)for(var O=0;O<t.oneOf.length;O++){var x=t.oneOf[O];if(n=se(x),n)return n}if(t.anyOf)for(var E=0;E<t.anyOf.length;E++){var P=t.anyOf[E];if(n=se(P),n)return n}if(t.allOf)for(var y=0;y<t.allOf.length;y++){var N=t.allOf[y];if(n=se(N),n)return n}}function it(t){return Ae.apply(this,arguments)}function Ae(){return Ae=he()(T()().mark(function t(n){var f,S;return T()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ot().dereference(n,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(f=o.sent,S=se(f),!S){o.next=6;break}return o.abrupt("return",ie(f,f));case 6:return o.abrupt("return",f);case 7:case"end":return o.stop()}},t)})),Ae.apply(this,arguments)}function st(t){if(typeof t=="string"){var n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))try{return JSON.parse(n)}catch(f){return}}}var We=["string","number","array","object","boolean","integer"];function je(t,n){if(t===null||ae()(t)!=="object")return console.error("The provided value is not an object."),-1;var f=Object.keys(t);return f.indexOf(n)}var lt=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],ut=We.map(function(t){return{value:t}});function we(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var dt=function(n){var f=function(o){return Array.isArray(o)?"array":o===null?"null":ae()(o)},S=function I(o){var C=f(o);switch(C){case"object":{var O={};for(var x in o)o.hasOwnProperty(x)&&(O[x]=I(o[x]));return{type:"object",properties:O,required:Object.keys(o)}}case"array":return{type:"array",items:o.length?I(o[0]):{}};default:return{type:C}}};return S(n)},ct=r(1581),ft=r.n(ct),ht=r(79443),Ve=ye.Z.Row,mt=function(n){var f=n.open,S=n.onOk,I=n.onCancel,o=(0,s.useState)(!1),C=v()(o,2),O=C[0],x=C[1],E=(0,s.useState)("json"),P=v()(E,2),y=P[0],N=P[1],Q=(0,s.useState)(),K=v()(Q,2),d=K[0],w=K[1],l=(0,s.useRef)(null);function m(i){l.current=i}(0,s.useEffect)(function(){x(f)},[f]);function a(){var i;x(!1),w(void 0),(i=l.current)===null||i===void 0||i.setValue(""),I&&I()}return(0,e.jsxs)($e.Z,{title:"\u5BFC\u5165",style:{width:900},okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",visible:O,onOk:he()(T()().mark(function i(){var c,u,b,D,J,k;return T()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!(!d||d.length===0)){j.next=3;break}return W.Z.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E"),j.abrupt("return");case 3:if(c=st(d),c){j.next=7;break}return W.Z.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E"),j.abrupt("return");case 7:j.t0=y,j.next=j.t0==="json"?10:j.t0==="json-schema"?12:16;break;case 10:return u=new ht.NL().createSchemaOf(c),j.abrupt("break",16);case 12:return j.next=14,it(c);case 14:return u=j.sent,j.abrupt("break",16);case 16:if(u){j.next=21;break}return W.Z.warning("\u5BFC\u5165\u7684\u5185\u5BB9\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u540E\u91CD\u65B0\u5BFC\u5165"),j.abrupt("return");case 21:if(b=new(ft())({allErrors:!0}),D=b.getSchema("http://json-schema.org/draft-07/schema#"),!(D&&!D(u))){j.next=27;break}return k=(J=D.errors)===null||J===void 0?void 0:J.map(function(te,X){var L=te.instancePath.split("/").pop()||"root",ne="".concat(L," ").concat(te.message);return(0,e.jsx)("div",{children:'Error in field "'.concat(L,'": ').concat(ne)},X)}),((k==null?void 0:k.length)||0)>0&&W.Z.error({content:(0,e.jsx)("div",{children:k})}),j.abrupt("return");case 27:S&&S(u),a();case 29:case"end":return j.stop()}},i)})),onCancel:a,children:[(0,e.jsx)(Ve,{style:{marginBottom:16},children:(0,e.jsx)(qe.Z.Group,{value:y,type:"button",onChange:function(c){return N(c)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(Ve,{children:(0,e.jsx)(Ke,{height:500,language:"json",handleEditorDidMount:m,onChange:function(c){return w(c)}})})]})},vt=mt,A=r(1911),G=r(97101),pt=r(48331),$=ye.Z.Row,g=ye.Z.Col,gt=function(t){var n=t.schema,f=t.visible,S=f===void 0?!1:f,I=t.onOk,o=t.onCancel,C=A.Z.useForm(),O=v()(C,1),x=O[0],E=(0,s.useState)(),P=v()(E,2),y=P[0],N=P[1],Q=(0,s.useState)(!1),K=v()(Q,2),d=K[0],w=K[1],l=(0,s.useState)(!1),m=v()(l,2),a=m[0],i=m[1],c=(0,s.useState)(!1),u=v()(c,2),b=u[0],D=u[1],J=(0,s.useState)(!1),k=v()(J,2),V=k[0],j=k[1],te=(0,s.useState)(!1),X=v()(te,2),L=X[0],ne=X[1],le=(0,s.useState)(!1),re=v()(le,2),M=re[0],Be=re[1],Pe=(0,s.useState)(!1),Se=v()(Pe,2),U=Se[0],Je=Se[1],ve=(0,s.useRef)(null);(0,s.useEffect)(function(){N(n)},[n]),(0,s.useEffect)(function(){w(S)},[S]);var pe=(0,s.useCallback)(Y().debounce(function(F){typeof F=="function"?F():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,s.useEffect)(function(){return function(){pe.cancel()}},[pe]),(0,s.useEffect)(function(){y&&(x.setFieldsValue(y),i(y.type==="object"),D(y.type==="array"),j(y.type==="number"),ne(y.type==="boolean"),Be(y.type==="integer"),Je(y.type==="string"))},[y]);function ke(F){ve.current=F,ve.current.setValue(JSON.stringify(n,null,2))}function ge(){o&&o(),w(!1)}return(0,e.jsx)($e.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",style:{width:900},visible:d,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:he()(T()().mark(function F(){return T()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.prev=0,B.next=3,x.validate();case 3:I&&I(H()(H()({},y),x.getFieldsValue())),B.next=10;break;case 6:B.prev=6,B.t0=B.catch(0),console.log(x.getFieldsError()),W.Z.error("\u5B57\u6BB5\u6821\u9A8C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5B57\u6BB5\uFF01");case 10:case"end":return B.stop()}},F,null,[[0,6]])})),onCancel:ge,children:(0,e.jsxs)(A.Z,{form:x,onValuesChange:function(h,B){ve.current&&ve.current.setValue(JSON.stringify(H()(H()({},y),B),null,2))},children:[!a&&We.indexOf(y==null?void 0:y.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(U||V||M||L)&&(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsxs)(g,{span:8,children:[U&&(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(me.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"})}),(V||M)&&(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"})}),L&&(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(Ee.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:"true",label:"true"},{value:"false",label:"false"}]})})]})]}),U&&(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"minLength",children:(0,e.jsx)(G.Z,{min:0,style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(Number(h),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"maxLength",children:(0,e.jsx)(G.Z,{min:0,style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(Number(h),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(V||M)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"minimum",children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"maximum",children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"exclusiveMinimum",children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"exclusiveMaximum",children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),U&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(g,{span:20,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"pattern",children:(0,e.jsx)(me.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"format",children:(0,e.jsx)(Ee.Z,{allowClear:!0,options:lt.map(function(F){return F.value}),placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),b&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(g,{span:20,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"uniqueItems",triggerPropName:"checked",children:(0,e.jsx)(pt.Z,{})})})]}),(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"minItems",children:(0,e.jsx)(G.Z,{style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(Number(h),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,field:"maxItems",children:(0,e.jsx)(G.Z,{style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(Number(h),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(U||V||M)&&(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(g,{span:20,children:(0,e.jsx)(A.Z.List,{field:"enums",children:function(h,B){var xe=B.add,R=B.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($,{gutter:10,children:h.map(function(ue,Ie){var p=ue.key,Z=ue.field;return(0,e.jsx)(g,{span:12,children:(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:6},children:[(0,e.jsxs)(g,{flex:"auto",children:[U&&(0,e.jsx)(A.Z.Item,{noStyle:!0,field:Z,rules:[{required:!0}],children:(0,e.jsx)(me.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})}),(V||M)&&(0,e.jsx)(A.Z.Item,{noStyle:!0,field:Z,rules:[{required:!0}],children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})})]}),(0,e.jsx)(g,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(oe.Z,{icon:(0,e.jsx)(Te.Z,{}),shape:"circle",status:"danger",onClick:function(){return R(Ie)}})})]})},p)})}),(0,e.jsx)($,{children:(0,e.jsx)(g,{span:12,children:(0,e.jsx)(A.Z.Item,{noStyle:!0,children:(0,e.jsx)(oe.Z,{onClick:function(){return xe()},icon:(0,e.jsx)(Le.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(Ke,{height:300,language:"json",value:JSON.stringify(y,null,2),handleEditorDidMount:ke,onChange:function(h){pe(function(){if(h)try{var B=JSON.parse(h);N(B)}catch(xe){}})}})]})})},De=ye.Z.Row,q=ye.Z.Col,xt=Ee.Z.Option;function Me(t){var n=t.changeSchema,f=t.renameProperty,S=t.isArrayItems,I=t.updateRequiredProperty,o=t.parentSchemaDepth,C=o===void 0?0:o,O=t.removeProperty,x=t.addProperty,E=t.isRequire,P=t.handleAdvancedSettingClick,y=t.defaultExpand,N=y===void 0?!0:y,Q=(0,s.useState)(t.schema),K=v()(Q,2),d=K[0],w=K[1],l=(0,s.useState)(t.propertyName),m=v()(l,2),a=m[0],i=m[1],c=(0,s.useState)(d.title),u=v()(c,2),b=u[0],D=u[1],J=(0,s.useState)(d.description),k=v()(J,2),V=k[0],j=k[1],te=(0,s.useState)(t.nodeDepth?t.nodeDepth:0),X=v()(te,2),L=X[0],ne=X[1],le=(0,s.useState)(t.namePath?t.namePath:[]),re=v()(le,2),M=re[0],Be=re[1],Pe=(0,s.useState)(N),Se=v()(Pe,2),U=Se[0],Je=Se[1],ve=(0,s.useState)(!1),pe=v()(ve,2),ke=pe[0],ge=pe[1],F=(0,s.useState)(!1),h=v()(F,2),B=h[0],xe=h[1],R=typeof a=="undefined";(0,s.useEffect)(function(){w(t.schema)},[t.schema]),(0,s.useEffect)(function(){Be(t.namePath?t.namePath:[])},[t.namePath]),(0,s.useEffect)(function(){ne(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var ue=d.items,Ie=!!(d.type==="object"||S&&(ue==null?void 0:ue.type)==="object")&&!S&&!R;return d.type?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(De,{align:"center",style:{paddingBottom:10},children:[(0,e.jsx)(q,{flex:"".concat(24+L*15,"px"),style:{marginLeft:L*5},children:(0,e.jsx)(De,{justify:"end",children:d.type==="object"&&(0,e.jsx)(oe.Z,{type:"text",size:"mini",style:{color:"rgb(var(--color-text-2))"},icon:U?(0,e.jsx)(Ge.Z,{}):(0,e.jsx)(Qe.Z,{}),onClick:function(){return Je(!U)}})})}),(0,e.jsx)(q,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(me.Z,{status:!R&&a.length===0?"error":void 0,disabled:R||S,value:R?"root":a,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((a==null?void 0:a.length)===0){W.Z.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}f&&a&&(a==null?void 0:a.length)!==0&&f(M,a)},onChange:function(Z){return i(Z)}})}),(0,e.jsx)(q,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(ze.Z,{disabled:S||R,checked:E,style:{padding:0},onChange:function(Z){I&&a&&I(M.slice(0,C),a,!Z)}})}),(0,e.jsx)(q,{flex:"98px",style:{marginLeft:5},children:(0,e.jsx)(Ee.Z,{style:{width:"98px"},value:d.type,onChange:function(Z){n&&n(M,we(Z),"type")},children:ut.map(function(p){return(0,e.jsx)(xt,{value:p.value,children:p.value},p.value)})})}),(0,e.jsx)(q,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(me.Z,{placeholder:"\u6807\u9898",value:b,onBlur:function(){n&&n(M.concat(je(d,"title")),b,"title")},onChange:function(Z){return D(Z)}})}),(0,e.jsx)(q,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(me.Z,{placeholder:"\u63CF\u8FF0",value:V,onBlur:function(){n&&n(M.concat(je(d,"description")),V,"description")},onChange:function(Z){return j(Z)}})}),(0,e.jsx)(q,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(De,{style:{width:"72px"},children:[(0,e.jsx)(be.Z,{content:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(oe.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Xe.Z,{}),style:{color:"rgb(var(--green-6))"},onClick:function(){P&&!P(M,d,R||d.type==="object"?void 0:a)||ge(!0)}})}),!R&&!S||d.type==="object"?(0,e.jsx)(He.Z,{position:"bottom",droplist:Ie&&(0,e.jsxs)(Ze.Z,{children:[(0,e.jsx)(Ze.Z.Item,{onClick:function(){x&&x(M,!1)},children:"\u540C\u7EA7\u8282\u70B9"},"addNode"),(0,e.jsx)(Ze.Z.Item,{onClick:function(){x&&x(M,!0)},children:"\u5B50\u7EA7\u8282\u70B9"},"addChildNode")]}),children:(0,e.jsx)(be.Z,{content:Ie?void 0:"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(oe.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Le.Z,{}),style:{color:"rgb(var(--primary-6))"},onClick:function(){Ie||x&&x(M,!(!S&&!R))}})})}):(0,e.jsx)("div",{}),(0,e.jsx)(q,{flex:"24px",children:R?(0,e.jsx)(be.Z,{content:"\u5BFC\u5165Json",children:(0,e.jsx)(oe.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Ye.Z,{}),style:{color:"rgb(var(--purple-6))"},onClick:function(){return xe(!0)}})}):S?(0,e.jsx)("div",{}):(0,e.jsx)(be.Z,{content:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(oe.Z,{status:"danger",type:"text",size:"mini",icon:(0,e.jsx)(Te.Z,{}),onClick:function(){O&&O(M)}})})}),R&&d.type!=="object"&&(0,e.jsx)(q,{flex:"24px",children:!S&&(0,e.jsx)("div",{})})]})})]}),d.type==="object"&&U&&d.properties&&Object.keys(d.properties).map(function(p){if(d.properties){var Z;return(0,e.jsx)("div",{children:(0,e.jsx)(Me,H()(H()({},t),{},{isRequire:(Z=d.required)===null||Z===void 0?void 0:Z.includes(p),isArrayItems:!1,defaultExpand:t.defaultExpand,nodeDepth:L+1,parentSchemaDepth:R?0:C+2,namePath:M.concat(je(d,"properties"),je(d.properties,p)),propertyName:p,schema:d.properties[p],handleAdvancedSettingClick:P}))},String(p))}return(0,e.jsx)(e.Fragment,{})}),d.type==="array"&&U&&(0,e.jsx)(Me,H()(H()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:L+1,defaultExpand:t.defaultExpand,parentSchemaDepth:R?0:C+1,propertyName:"items",namePath:M.concat(je(d,"items")),schema:d.items,handleAdvancedSettingClick:P})),(0,e.jsx)(gt,{schema:d,visible:ke,onOk:function(){var p=he()(T()().mark(function Z(Re){return T()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(n){de.next=2;break}return de.abrupt("return");case 2:if(!(R||d.type==="object")){de.next=6;break}return n(M,H()({},Re)),ge(!1),de.abrupt("return");case 6:n(M,H()({},Re),a),ge(!1);case 8:case"end":return de.stop()}},Z)}));return function(Z){return p.apply(this,arguments)}}(),onCancel:function(){return ge(!1)}}),(0,e.jsx)(vt,{open:B,onOk:function(Z){n&&(n([],Z),xe(!1))},onCancel:function(){return xe(!1)}})]}):(0,e.jsx)(e.Fragment,{})}var yt=Me,jt=(0,s.forwardRef)(function(t,n){function f(l){var m=ce;if(!l)return m;switch(ae()(l)){case"string":try{return dt(JSON.parse(l))}catch(a){return W.Z.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),m}case"object":return l}}var S=(0,s.useState)(f(t.data)),I=v()(S,2),o=I[0],C=I[1],O=(0,s.useState)(0),x=v()(O,2),E=x[0],P=x[1];(0,s.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(o)},[o]);var y=function(m,a,i){if(m.length===0){C(a);return}for(var c=Y().cloneDeep(o),u=c,b=0;b<m.length-1;b++){var D=Object.keys(u)[m[b]];u[D]||(u[D]={}),u=u[D]}var J=m[m.length-1],k=Object.keys(u)[J];if(J===-1){if(typeof a=="undefined"||!i)return;u[i]=a}else{if(u[k]===a)return;u[k]=a}C(c)};function N(l,m){for(var a=Y().cloneDeep(o),i=a,c=null,u="",b=0;b<l.length-1;b++){var D=Object.keys(i),J=void 0;if(typeof l[b]=="number"?J=l[b]:J=D.indexOf(String(l[b])),J<0||J>=D.length){console.error("Path not found: ".concat(l.slice(0,b+1).join(".")));return}c=i,u=D[J],i=i[u]}var k=l[l.length-1],V=Object.keys(i),j=V[k];if(j!==m){if(i.hasOwnProperty(j))c[u]=Object.fromEntries(Object.entries(i).map(function(te){var X=v()(te,2),L=X[0],ne=X[1];if(L===j){var le=c.required;if(le){var re=le.indexOf(j);re>=0&&le.splice(re,1,m)}return[m,ne]}return[L,ne]}));else{console.error("Key not found: ".concat(j));return}C(a)}}function Q(l,m,a){l.required||(l.required=[]);var i=l.required.indexOf(m);a?i!==-1&&l.required.splice(i,1):i===-1&&l.required.push(m),l.required.length===0&&delete l.required}function K(l,m,a){for(var i=Y().cloneDeep(o),c=i,u=0;u<l.length;u++){var b=l[u],D=Object.keys(c);typeof c[D[b]]=="undefined"&&(c[D[b]]={}),c=c[D[b]]}Q(c,m,a),C(i)}function d(l){for(var m=Y().cloneDeep(o),a=m,i=m,c=0;c<l.length-1;c++)if(a!=null)i=a,a=a[Object.keys(a)[l[c]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",l);return}var u=Object.keys(a)[l[l.length-1]];Q(i,u,!0),a&&ae()(a)==="object"&&a.hasOwnProperty(u)&&delete a[u],C(m)}function w(l,m){for(var a=Y().cloneDeep(o),i=a,c=0;c<l.length-(m?0:1);c++){var u=Object.keys(i)[l[c]];i[u]||(i[u]={}),i=i[u]}var b=we("string");m?i.properties["field_".concat(E)]=b:i["field_".concat(E)]=b,P(E+1),C(a)}return(0,s.useImperativeHandle)(n,function(){return{changeSchema:y}}),(0,e.jsx)("div",{style:{paddingTop:"10px 10px 0 10px"},children:(0,e.jsx)(yt,{schema:o,defaultExpand:t.defaultExpand,changeSchema:y,renameProperty:N,removeProperty:d,addProperty:w,updateRequiredProperty:K,handleAdvancedSettingClick:t.handleAdvancedSettingClick})})}),St=jt},71860:function(Ne,_,r){"use strict";r.r(_),r.d(_,{texts:function(){return v}});var Ce=r(57396);const v=[{value:"1.x.x \u7248\u672C\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:" UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528 ",paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-arco
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u5728\u7EBF\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03\u3002",paraId:6,tocIndex:3},{value:"\u7C7B\u578B\uFF1A",paraId:7,tocIndex:3},{value:"(schema: JSONSchema7) => void",paraId:7,tocIndex:3},{value:"\u9ED8\u8BA4\u503C\uFF1A ",paraId:8,tocIndex:3},{value:"-",paraId:8,tocIndex:3},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E\u3002",paraId:9,tocIndex:4},{value:"\u7C7B\u578B\uFF1A",paraId:10,tocIndex:4},{value:"JSONSchema7 | string | undefined",paraId:10,tocIndex:4},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:11,tocIndex:4},{value:`{
  "type": "object",
  "properties": {
    "field": {
      "type": "string"
    }
  }
}
`,paraId:12,tocIndex:4},{value:"\u70B9\u51FB",paraId:13,tocIndex:5},{value:"\u9AD8\u7EA7\u8BBE\u7F6E",paraId:13,tocIndex:5},{value:"\u6309\u94AE\u7684\u56DE\u8C03\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"false",paraId:13,tocIndex:5},{value:"\uFF1A\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"true",paraId:13,tocIndex:5},{value:"\uFF1A\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\u3002",paraId:13,tocIndex:5},{value:"\u7C7B\u578B\uFF1A",paraId:14,tocIndex:5},{value:"(namePath: number[], schema: JSONSchema7, propertyName?: string) => boolean",paraId:14,tocIndex:5},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:15,tocIndex:5},{value:"-",paraId:15,tocIndex:5},{value:"\u8BF4\u660E\uFF1A\u53EF\u4EE5\u7ED3\u5408",paraId:16,tocIndex:5},{value:"\u7EC4\u4EF6\u5F15\u7528",paraId:16,tocIndex:5},{value:"\u5B9E\u73B0\u70B9\u51FB\u9AD8\u7EA7\u8BBE\u7F6E\u6309\u94AE\u540E\u83B7\u53D6\u8DEF\u5F84\u4E0B\u7684 JsonSchema\uFF0C\u6DFB\u52A0\u3001\u4FEE\u6539\u81EA\u5B9A\u4E49\u5B57\u6BB5\u7B49\uFF0C\u7136\u540E\u4FEE\u6539\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema\u3002",paraId:16,tocIndex:5},{value:`export interface JsonSchemaEditorHandle {
  /* \u66F4\u65B0\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema */
  changeSchema: (namePath: number[], value: any, propertyName?: string) => void;
}
`,paraId:17,tocIndex:6}]},49832:function(){}}]);
