(self.webpackChunk_flodejs_json_schema_editor_arco=self.webpackChunk_flodejs_json_schema_editor_arco||[]).push([[593],{77102:function(ke,re,n){"use strict";n.r(re),n.d(re,{demos:function(){return Ze}});var ye=n(15009),x=n.n(ye),Oe=n(99289),oe=n.n(Oe),G=n(67294),Te=n(57396),Ve=n(81931),Ze={"jsonschemaeditor-demo-0":{component:G.memo(G.lazy(oe()(x()().mark(function K(){var u,me;return x()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,Promise.resolve().then(n.bind(n,81931));case 2:return u=J.sent,me=u.JsonSchemaEditor,J.abrupt("return",{default:function(){return G.createElement(me,null)}});case 5:case"end":return J.stop()}},K)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@flodejs/json-schema-editor-arco';

export default () => <JsonSchemaEditor />;`},"@flodejs/json-schema-editor-arco":{type:"NPM",value:"1.0.1"}},entry:"index.jsx"},context:{"@flodejs/json-schema-editor-arco":Ve},renderOpts:{compile:function(){var K=oe()(x()().mark(function me(){var ve,J=arguments;return x()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,n.e(335).then(n.bind(n,37335));case 2:return U.abrupt("return",(ve=U.sent).default.apply(ve,J));case 3:case"end":return U.stop()}},me)}));function u(){return K.apply(this,arguments)}return u}()}}}},81931:function(ke,re,n){"use strict";n.r(re),n.d(re,{JsonSchemaEditor:function(){return Zt},registerLocale:function(){return ot}});var ye=n(5574),x=n.n(ye),Oe=n(52677),oe=n.n(Oe),G=n(80507),Te=n(37778),Ve=n(81917),Ze=n(96486),K=n.n(Ze),u=n(67294),me={type:"object",properties:{field:{type:"string"}}},ve=n(15009),J=n.n(ve),Fe=n(99289),U=n.n(Fe),Xe=n(97857),k=n.n(Xe),pe=n(74668),je=n(53794),le=n(56187),fe=n(87108),ge=n(15695),Ye=n(54224),qe=n(72404),Ae=n(59330),_e=n(99042),et=n(67945),tt=n(94677),We=n(84566),rt=n(14539),$e=n(61873),nt=n(40360),at={"en-US":{PropertyPlaceholder:"Please input the property name",PropertyNameEmptyWarnMsg:"Property name cannot be empty",TitlePlaceholder:"Please input the title",IsRequired:"Required",DescriptionPlaceholder:"Please input the description",AdvancedSettings:"Advanced Settings",SiblingNodes:"Sibling Nodes",ChildNodes:"Child Nodes",AddNode:"Add Node",ImportJson:"Import JSON",DeleteNode:"Delete Node",Import:"Import",ImportEmptyJsonWarnMsg:"Please input the JSON data to import",ImportNotJsonWarnMsg:"The imported content is not in JSON format",ImportErrorContentWarnMsg:"The imported content is incorrect, please check and try again",BasicSettings:"Basic Settings",DefaultValue:"Default Value",DefaultValuePlaceholder:"Please input the default value",SelectDefaultValuePlaceholder:"Please select the default value",MinimumLength:"Minimum Length",MinimumLengthPlaceholder:"Please input the minimum length",MaximumLength:"Maximum Length",MaximumLengthPlaceholder:"Please input the maximum length",Minimum:"Minimum Value",MinimumPlaceholder:"Please input the minimum value",Maximum:"Maximum Value",MaximumPlaceholder:"Please input the maximum value",ExclusiveMinimum:"Exclusive Minimum",ExclusiveMinimumPlaceholder:"Please input the exclusive minimum value",ExclusiveMaximum:"Exclusive Maximum",ExclusiveMaximumPlaceholder:"Please input the exclusive maximum value",RegularMatch:"Regular Expression",RegularMatchPlaceholder:"Please input a regular expression",Format:"Format",FormatPlaceholder:"Please select a string format",UniqueItems:"Unique Items",MinItems:"Minimum Number of Items",MinItemsPlaceholder:"Please input the minimum number of items",MaxItems:"Maximum Number of Items",MaxItemsPlaceholder:"Please input the maximum number of items",Enums:"Enumerations",EnumsPlaceholder:"Please input enumeration values",AddEnums:"Add Enumeration"},"zh-CN":{PropertyPlaceholder:"\u8BF7\u8F93\u5165\u5C5E\u6027\u540D\u79F0",PropertyNameEmptyWarnMsg:"\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",IsRequired:"\u662F\u5426\u5FC5\u586B",TitlePlaceholder:"\u8BF7\u8F93\u5165\u6807\u9898",DescriptionPlaceholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\u4FE1\u606F",AdvancedSettings:"\u9AD8\u7EA7\u8BBE\u7F6E",SiblingNodes:"\u540C\u7EA7\u8282\u70B9",ChildNodes:"\u5B50\u7EA7\u8282\u70B9",AddNode:"\u6DFB\u52A0\u8282\u70B9",ImportJson:"\u5BFC\u5165Json",DeleteNode:"\u5220\u9664\u8282\u70B9",Import:"\u5BFC\u5165",ImportEmptyJsonWarnMsg:"\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E",ImportNotJsonWarnMsg:"\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E",ImportErrorContentWarnMsg:"\u5BFC\u5165\u7684\u5185\u5BB9\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u540E\u91CD\u65B0\u5BFC\u5165",BasicSettings:"\u57FA\u672C\u8BBE\u7F6E",DefaultValue:"\u9ED8\u8BA4\u503C",DefaultValuePlaceholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C",SelectDefaultValuePlaceholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",MinimumLength:"\u6700\u5C0F\u957F\u5EA6",MinimumLengthPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6",MaximumLength:"\u6700\u5927\u957F\u5EA6",MaximumLengthPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6",Minimum:"\u6700\u5C0F\u503C",MinimumPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C",Maximum:"\u6700\u5927\u503C",MaximumPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C",ExclusiveMinimum:"\u6392\u4ED6\u6700\u5C0F\u503C",ExclusiveMinimumPlaceholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C",ExclusiveMaximum:"\u6392\u4ED6\u6700\u5927\u503C",ExclusiveMaximumPlaceholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C",RegularMatch:"\u6B63\u5219\u5339\u914D",RegularMatchPlaceholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F",Format:"\u683C\u5F0F",FormatPlaceholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",UniqueItems:"\u5143\u7D20\u552F\u4E00",MinItems:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570",MinItemsPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570",MaxItems:"\u6700\u591A\u5143\u7D20\u4E2A\u6570",MaxItemsPlaceholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570",Enums:"\u679A\u4E3E",EnumsPlaceholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C",AddEnums:"\u6DFB\u52A0\u679A\u4E3E"}},De={},ot=function(r,i){De[r]=k()(k()({},De[r]||{}),i)},Ne=function(){var r,i=(0,u.useContext)(nt.ZP.ConfigContext),m=(i==null||(r=i.locale)===null||r===void 0?void 0:r.locale)||"zh-CN",g=k()(k()({},at[m]),De[m]),o=function(a){return g[a]||a};return{locale:m,t:o}},Ke=n(31826),lt=n(74122),it=n(63764),st={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=n(85893),ut=function(r){var i=r.width,m=r.lineNumbers,g=m===void 0?"on":m,o=r.height,y=r.value,a=r.folding,C=a===void 0?!0:a,M=r.language,N=r.readOnly,T=N===void 0?!1:N,b=r.renderLineHighlight,E=b===void 0?"all":b,w=r.onChange;function f(z){z.editor.defineTheme("x-code-default",st)}return(0,e.jsx)("div",{style:{border:"1px solid rgb(var(--color-border))",width:i||"100%"},children:(0,e.jsx)(it.ZP,{height:o,width:i,value:y,language:M,onChange:w,onMount:r.handleEditorDidMount,beforeMount:f,theme:"x-code-default",options:{readOnly:T,lineNumbers:g,renderLineHighlight:E,folding:C,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{},minimap:{enabled:!1}}})})},Ue=ut,dt=n(64599),ct=n.n(dt),mt=n(65009),ft=n.n(mt);function ht(t,r){if(r.length===0)return t;for(var i=t,m=0;m<r.length;m++){var g=Object.keys(i)[r[m]];if(g===void 0)return;i=i[g]}return i}function ie(t,r){if(t.$ref){var i=t.$ref;if(i.startsWith("#/")){var m=i.slice(2).split("/"),g=K().cloneDeep(r),o=ct()(m),y;try{for(o.s();!(y=o.n()).done;){var a=y.value;if(g[a])g=g[a];else throw new Error("Unable to resolve $ref: ".concat(i))}}catch(M){o.e(M)}finally{o.f()}return g}else throw new Error("Unsupported $ref format: ".concat(i))}if(t.properties)for(var C in t.properties)t.properties[C]&&(t.properties[C]=ie(t.properties[C],r));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(M){return ie(M,r)}):t.items=ie(t.items,r)),t.oneOf&&(t.oneOf=t.oneOf.map(function(M){return ie(M,r)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(M){return ie(M,r)})),t.allOf&&(t.allOf=t.allOf.map(function(M){return ie(M,r)})),t}function se(t){var r;if(t.$ref){var i=t.$ref;if(i.startsWith("#/")){var m=i.slice(2).split("/");return m[0]}if(t.properties){for(var g in t.properties)if(t.properties[g]&&(r=se(t.properties[g]),r))return r}}if(t.items){if(Array.isArray(t.items))for(var o=0;o<t.items.length;o++){var y=t.items[o];if(r=se(y),r)return r}else if(r=se(t.items),r)return r}if(t.oneOf)for(var a=0;a<t.oneOf.length;a++){var C=t.oneOf[a];if(r=se(C),r)return r}if(t.anyOf)for(var M=0;M<t.anyOf.length;M++){var N=t.anyOf[M];if(r=se(N),r)return r}if(t.allOf)for(var T=0;T<t.allOf.length;T++){var b=t.allOf[T];if(r=se(b),r)return r}}function vt(t){return Je.apply(this,arguments)}function Je(){return Je=U()(J()().mark(function t(r){var i,m;return J()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ft().dereference(r,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(i=o.sent,m=se(i),!m){o.next=6;break}return o.abrupt("return",ie(i,i));case 6:return o.abrupt("return",i);case 7:case"end":return o.stop()}},t)})),Je.apply(this,arguments)}function pt(t){if(typeof t=="string"){var r=t.trim();if(r.startsWith("{")&&r.endsWith("}"))try{return JSON.parse(r)}catch(i){return}}}var we=["string","number","array","object","boolean","integer"];function xe(t,r){if(t===null||oe()(t)!=="object")return console.error("The provided value is not an object."),-1;var i=Object.keys(t);return i.indexOf(r)}var gt=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],xt=we.map(function(t){return{value:t}});function ze(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var yt=function(r){var i=function(o){return Array.isArray(o)?"array":o===null?"null":oe()(o)},m=function g(o){var y=i(o);switch(y){case"object":{var a={};for(var C in o)o.hasOwnProperty(C)&&(a[C]=g(o[C]));return{type:"object",properties:a,required:Object.keys(o)}}case"array":return{type:"array",items:o.length?g(o[0]):{}};default:return{type:y}}};return m(r)},jt=n(1581),It=n.n(jt),He=n(51539),Ge=pe.Z.Row,St=function(r){var i=r.open,m=r.onOk,g=r.onCancel,o=Ne(),y=o.t,a=(0,u.useState)(!1),C=x()(a,2),M=C[0],N=C[1],T=(0,u.useState)("json"),b=x()(T,2),E=b[0],w=b[1],f=(0,u.useState)(),z=x()(f,2),d=z[0],p=z[1],l=(0,u.useRef)(null);function h(c){l.current=c}(0,u.useEffect)(function(){N(i)},[i]);function P(){var c;N(!1),p(void 0),(c=l.current)===null||c===void 0||c.setValue(""),g&&g()}return(0,e.jsxs)(Ke.Z,{title:y("Import"),style:{width:900},visible:M,onOk:U()(J()().mark(function c(){var I,A,B,V,X,R;return J()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!d||d.length===0)){S.next=3;break}return G.Z.warning(y("ImportEmptyJsonWarnMsg")),S.abrupt("return");case 3:if(I=pt(d),I){S.next=7;break}return G.Z.error(y("ImportNotJsonWarnMsg")),S.abrupt("return");case 7:S.t0=E,S.next=S.t0==="json"?10:S.t0==="json-schema"?12:16;break;case 10:return A=(0,He.ES)(He.GP).createSchema(I),S.abrupt("break",16);case 12:return S.next=14,vt(I);case 14:return A=S.sent,S.abrupt("break",16);case 16:if(A){S.next=21;break}return G.Z.warning(y("ImportErrorContentWarnMsg")),S.abrupt("return");case 21:if(B=new(It())({allErrors:!0}),V=B.getSchema("http://json-schema.org/draft-07/schema#"),!(V&&!V(A))){S.next=27;break}return R=(X=V.errors)===null||X===void 0?void 0:X.map(function($,ee){var H=$.instancePath.split("/").pop()||"root",te="".concat(H," ").concat($.message);return(0,e.jsx)("div",{children:'Error in field "'.concat(H,'": ').concat(te)},ee)}),((R==null?void 0:R.length)||0)>0&&G.Z.error({content:(0,e.jsx)("div",{children:R})}),S.abrupt("return");case 27:m&&m(A),P();case 29:case"end":return S.stop()}},c)})),onCancel:P,children:[(0,e.jsx)(Ge,{style:{marginBottom:16},children:(0,e.jsx)(lt.Z.Group,{value:E,type:"button",onChange:function(I){return w(I)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(Ge,{children:(0,e.jsx)(Ue,{height:500,language:"json",handleEditorDidMount:h,onChange:function(I){return p(I)}})})]})},Mt=St,F=n(1911),Q=n(97101),Pt=n(48331),W=pe.Z.Row,j=pe.Z.Col,Et=function(t){var r=t.schema,i=t.visible,m=i===void 0?!1:i,g=t.onOk,o=t.onCancel,y=Ne(),a=y.t,C=F.Z.useForm(),M=x()(C,1),N=M[0],T=(0,u.useState)(),b=x()(T,2),E=b[0],w=b[1],f=(0,u.useState)(!1),z=x()(f,2),d=z[0],p=z[1],l=(0,u.useState)(!1),h=x()(l,2),P=h[0],c=h[1],I=(0,u.useState)(!1),A=x()(I,2),B=A[0],V=A[1],X=(0,u.useState)(!1),R=x()(X,2),Y=R[0],S=R[1],$=(0,u.useState)(!1),ee=x()($,2),H=ee[0],te=ee[1],L=(0,u.useState)(!1),Ie=x()(L,2),ue=Ie[0],Se=Ie[1],he=(0,u.useState)(!1),Me=x()(he,2),ne=Me[0],Pe=Me[1],de=(0,u.useRef)(null),ae=(0,u.useRef)(!1);(0,u.useEffect)(function(){w(r)},[r]),(0,u.useEffect)(function(){p(m)},[m]);var Ee=(0,u.useRef)(K().debounce(function(Z){try{var s=JSON.parse(Z);w(s)}catch(D){console.error("JSON\u89E3\u6790\u5931\u8D25",D)}},300));(0,u.useEffect)(function(){return function(){Ee.current.cancel()}},[]),(0,u.useEffect)(function(){E&&(N.setFieldsValue(E),c(E.type==="object"),V(E.type==="array"),S(E.type==="number"),te(E.type==="boolean"),Se(E.type==="integer"),Pe(E.type==="string"))},[E]);function Ce(Z){de.current=Z,de.current.setValue(JSON.stringify(r,null,2))}function Be(){o==null||o(),p(!1)}return(0,e.jsx)(Ke.Z,{title:a("AdvancedSettings"),style:{width:900},visible:d,onOk:U()(J()().mark(function Z(){return J()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,N.validate();case 3:g==null||g(k()(k()({},E),N.getFieldsValue())),D.next=9;break;case 6:D.prev=6,D.t0=D.catch(0),console.error("\u5B57\u6BB5\u6821\u9A8C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5B57\u6BB5\uFF01");case 9:case"end":return D.stop()}},Z,null,[[0,6]])})),onCancel:Be,children:(0,e.jsxs)(F.Z,{form:N,onValuesChange:function(s,D){if(de.current){ae.current=!0;var ce=k()(k()({},E),D),v=JSON.stringify(ce,null,2),O=de.current.getValue();O!==v&&de.current.setValue(v),setTimeout(function(){ae.current=!1},0)}},children:[!P&&we.indexOf(E==null?void 0:E.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:a("BasicSettings")}),(ne||Y||ue||H)&&(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("DefaultValue"),"\uFF1A"]}),(0,e.jsxs)(j,{span:8,children:[ne&&(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(fe.Z,{style:{width:"100%"},placeholder:a("DefaultValuePlaceholder")})}),(Y||ue)&&(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:a("DefaultValuePlaceholder")})}),H&&(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(je.Z,{style:{width:"100%"},placeholder:a("SelectDefaultValuePlaceholder"),options:[{value:"true",label:"true"},{value:"false",label:"false"}]})})]})]}),ne&&(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("MinimumLength"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"minLength",children:(0,e.jsx)(Q.Z,{min:0,style:{width:"100%"},parser:function(s){return s?parseInt(s.replace(/\D/g,""),10):""},formatter:function(s){return s?"".concat(Math.floor(Math.max(Number(s),0))):""},placeholder:a("MinimumLengthPlaceholder")})})}),(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("MaximumLength"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"maxLength",children:(0,e.jsx)(Q.Z,{min:0,style:{width:"100%"},parser:function(s){return s?parseInt(s.replace(/\D/g,""),10):""},formatter:function(s){return s?"".concat(Math.floor(Math.max(Number(s),0))):""},placeholder:a("MaximumLengthPlaceholder")})})})]}),(Y||ue)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("Minimum"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"minimum",children:(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:a("MinimumPlaceholder")})})}),(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("Maximum"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"maximum",children:(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:a("MaximumPlaceholder")})})})]}),(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("ExclusiveMinimum"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"exclusiveMinimum",children:(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:a("ExclusiveMinimumPlaceholder")})})}),(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("ExclusiveMaximum"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"exclusiveMaximum",children:(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:a("ExclusiveMaximumPlaceholder")})})})]})]}),ne&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("RegularMatch"),"\uFF1A"]}),(0,e.jsx)(j,{span:20,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"pattern",children:(0,e.jsx)(fe.Z,{placeholder:a("RegularMatchPlaceholder")})})})]}),(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("Format"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"format",children:(0,e.jsx)(je.Z,{allowClear:!0,options:gt.map(function(Z){return Z.value}),placeholder:a("FormatPlaceholder"),style:{width:"100%"}})})})]})]}),B&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("UniqueItems"),"\uFF1A"]}),(0,e.jsx)(j,{span:20,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"uniqueItems",triggerPropName:"checked",children:(0,e.jsx)(Pt.Z,{})})})]}),(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("MinItems"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"minItems",children:(0,e.jsx)(Q.Z,{style:{width:"100%"},parser:function(s){return s?parseInt(s.replace(/\D/g,""),10):""},formatter:function(s){return s?"".concat(Math.floor(Math.max(Number(s),0))):""},placeholder:a("MinItemsPlaceholder")})})}),(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("MaxItems"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"maxItems",children:(0,e.jsx)(Q.Z,{style:{width:"100%"},parser:function(s){return s?parseInt(s.replace(/\D/g,""),10):""},formatter:function(s){return s?"".concat(Math.floor(Math.max(Number(s),0))):""},placeholder:a("MaxItemsPlaceholder")})})})]})]}),(ne||Y||ue)&&(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("Enums"),"\uFF1A"]}),(0,e.jsx)(j,{span:20,children:(0,e.jsx)(F.Z.List,{field:"enums",children:function(s,D){var ce=D.add,v=D.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W,{gutter:10,children:s.map(function(O,be){var Qe=O.key,q=O.field;return(0,e.jsx)(j,{span:12,children:(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:6},children:[(0,e.jsxs)(j,{flex:"auto",children:[ne&&(0,e.jsx)(F.Z.Item,{noStyle:!0,field:q,rules:[{required:!0}],children:(0,e.jsx)(fe.Z,{placeholder:a("EnumsPlaceholder")})}),(Y||ue)&&(0,e.jsx)(F.Z.Item,{noStyle:!0,field:q,rules:[{required:!0}],children:(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:a("EnumsPlaceholder")})})]}),(0,e.jsx)(j,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(le.Z,{icon:(0,e.jsx)($e.Z,{}),shape:"circle",status:"danger",onClick:function(){return v(be)}})})]})},Qe)})}),(0,e.jsx)(W,{children:(0,e.jsx)(j,{span:12,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,children:(0,e.jsx)(le.Z,{onClick:function(){return ce()},icon:(0,e.jsx)(We.Z,{}),children:a("AddEnums")})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(Ue,{height:300,language:"json",value:JSON.stringify(E,null,2),handleEditorDidMount:Ce,onChange:function(s){ae.current||!s||Ee.current(s)}})]})})},Re=pe.Z.Row,_=pe.Z.Col,Ct=je.Z.Option;function Le(t){var r=t.changeSchema,i=t.renameProperty,m=t.isArrayItems,g=t.updateRequiredProperty,o=t.removeProperty,y=t.addProperty,a=t.isRequire,C=t.handleAdvancedSettingClick,M=t.defaultExpand,N=M===void 0?!0:M,T=Ne(),b=T.t,E=(0,u.useState)(t.schema),w=x()(E,2),f=w[0],z=w[1],d=(0,u.useState)(t.propertyName),p=x()(d,2),l=p[0],h=p[1],P=(0,u.useState)(f.title),c=x()(P,2),I=c[0],A=c[1],B=(0,u.useState)(f.description),V=x()(B,2),X=V[0],R=V[1],Y=(0,u.useState)(t.nodeDepth?t.nodeDepth:0),S=x()(Y,2),$=S[0],ee=S[1],H=(0,u.useState)(t.namePath?t.namePath:[]),te=x()(H,2),L=te[0],Ie=te[1],ue=(0,u.useState)(N),Se=x()(ue,2),he=Se[0],Me=Se[1],ne=(0,u.useState)(!1),Pe=x()(ne,2),de=Pe[0],ae=Pe[1],Ee=(0,u.useState)(!1),Ce=x()(Ee,2),Be=Ce[0],Z=Ce[1],s=typeof l=="undefined";(0,u.useEffect)(function(){z(t.schema)},[t.schema]),(0,u.useEffect)(function(){Ie(t.namePath?t.namePath:[])},[t.namePath]),(0,u.useEffect)(function(){ee(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var D=f.items,ce=!!(f.type==="object"||m&&(D==null?void 0:D.type)==="object")&&!m&&!s;return f.type?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Re,{align:"center",style:{paddingBottom:10},children:[(0,e.jsx)(_,{flex:"".concat(24+$*15,"px"),style:{marginLeft:$*5},children:(0,e.jsx)(Re,{justify:"end",children:f.type==="object"&&(0,e.jsx)(le.Z,{type:"text",size:"mini",style:{color:"rgb(var(--color-text-2))"},icon:he?(0,e.jsx)(_e.Z,{}):(0,e.jsx)(et.Z,{}),onClick:function(){return Me(!he)}})})}),(0,e.jsx)(_,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(fe.Z,{status:!s&&l.length===0?"error":void 0,disabled:s||m,value:s?"root":l,placeholder:b("PropertyPlaceholder"),onBlur:function(){if((l==null?void 0:l.length)===0){G.Z.error(b("PropertyNameEmptyWarnMsg"));return}i&&l&&(l==null?void 0:l.length)!==0&&i(L,l)},onChange:function(O){return h(O)}})}),(0,e.jsx)(_,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(ge.Z,{content:b("IsRequired"),children:(0,e.jsx)(Ye.Z,{disabled:m||s,checked:a,style:{padding:0},onChange:function(O){g&&l&&g(L,!O)}})})}),(0,e.jsx)(_,{flex:"98px",style:{marginLeft:5},children:(0,e.jsx)(je.Z,{style:{width:"98px"},value:f.type,onChange:function(O){r&&r(L,ze(O),"type")},children:xt.map(function(v){return(0,e.jsx)(Ct,{value:v.value,children:v.value},v.value)})})}),(0,e.jsx)(_,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(fe.Z,{placeholder:b("TitlePlaceholder"),value:I,onBlur:function(){r&&r(L.concat(xe(f,"title")),I,"title")},onChange:function(O){return A(O)}})}),(0,e.jsx)(_,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(fe.Z,{placeholder:b("DescriptionPlaceholder"),value:X,onBlur:function(){r&&r(L.concat(xe(f,"description")),X,"description")},onChange:function(O){return R(O)}})}),(0,e.jsx)(_,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(Re,{style:{width:"72px"},children:[(0,e.jsx)(ge.Z,{content:b("AdvancedSettings"),children:(0,e.jsx)(le.Z,{type:"text",size:"mini",icon:(0,e.jsx)(tt.Z,{}),style:{color:"rgb(var(--green-6))"},onClick:function(){C&&!C(L,f,s||f.type==="object"?void 0:l)||ae(!0)}})}),!s&&!m||f.type==="object"?(0,e.jsx)(qe.Z,{position:"bottom",droplist:ce&&(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(Ae.Z.Item,{onClick:function(){y&&y(L,!1)},children:b("SiblingNodes")},"addNode"),(0,e.jsx)(Ae.Z.Item,{onClick:function(){y&&y(L,!0)},children:b("ChildNodes")},"addChildNode")]}),children:(0,e.jsx)(ge.Z,{content:ce?void 0:b("AddNode"),children:(0,e.jsx)(le.Z,{type:"text",size:"mini",icon:(0,e.jsx)(We.Z,{}),style:{color:"rgb(var(--primary-6))"},onClick:function(){ce||y&&y(L,!(!m&&!s))}})})}):(0,e.jsx)("div",{}),(0,e.jsx)(_,{flex:"24px",children:s?(0,e.jsx)(ge.Z,{content:b("ImportJson"),children:(0,e.jsx)(le.Z,{type:"text",size:"mini",icon:(0,e.jsx)(rt.Z,{}),style:{color:"rgb(var(--purple-6))"},onClick:function(){return Z(!0)}})}):m?(0,e.jsx)("div",{}):(0,e.jsx)(ge.Z,{content:b("DeleteNode"),children:(0,e.jsx)(le.Z,{status:"danger",type:"text",size:"mini",icon:(0,e.jsx)($e.Z,{}),onClick:function(){o&&o(L)}})})}),s&&f.type!=="object"&&(0,e.jsx)(_,{flex:"24px",children:!m&&(0,e.jsx)("div",{})})]})})]}),f.type==="object"&&he&&f.properties&&Object.keys(f.properties).map(function(v){if(f.properties){var O;return(0,e.jsx)("div",{children:(0,e.jsx)(Le,k()(k()({},t),{},{isRequire:(O=f.required)===null||O===void 0?void 0:O.includes(v),isArrayItems:!1,defaultExpand:N,nodeDepth:$+1,namePath:L.concat(xe(f,"properties"),xe(f.properties,v)),propertyName:v,schema:f.properties[v],handleAdvancedSettingClick:C}))},String(v))}return(0,e.jsx)(e.Fragment,{})}),f.type==="array"&&he&&(0,e.jsx)(Le,k()(k()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:$+1,defaultExpand:N,propertyName:"items",namePath:L.concat(xe(f,"items")),schema:f.items,handleAdvancedSettingClick:C})),(0,e.jsx)(Et,{schema:f,visible:de,onOk:function(){var v=U()(J()().mark(function O(be){return J()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(r){q.next=2;break}return q.abrupt("return");case 2:if(!(s||f.type==="object")){q.next=6;break}return r(L,k()({},be)),ae(!1),q.abrupt("return");case 6:r(L,k()({},be),l),ae(!1);case 8:case"end":return q.stop()}},O)}));return function(O){return v.apply(this,arguments)}}(),onCancel:function(){return ae(!1)}}),(0,e.jsx)(Mt,{open:Be,onOk:function(O){r&&(r([],O),Z(!1))},onCancel:function(){return Z(!1)}})]}):(0,e.jsx)(e.Fragment,{})}var bt=Le,Ot=(0,u.forwardRef)(function(t,r){function i(d){var p=me;if(!d)return p;switch(oe()(d)){case"string":try{return yt(JSON.parse(d))}catch(l){return G.Z.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),p}case"object":return d}}var m=(0,u.useState)(i(t.value)),g=x()(m,2),o=g[0],y=g[1],a=(0,u.useState)(0),C=x()(a,2),M=C[0],N=C[1];(0,u.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(o)},[o]);var T=function(p,l,h){if(p.length===0){y(l);return}for(var P=K().cloneDeep(o),c=P,I=0;I<p.length-1;I++){var A=Object.keys(c)[p[I]];c[A]||(c[A]={}),c=c[A]}var B=p[p.length-1],V=Object.keys(c)[B];if(B===-1){if(typeof l=="undefined"||!h)return;c[h]=l}else{if(c[V]===l)return;c[V]=l}y(P)};function b(d,p){for(var l=K().cloneDeep(o),h=l,P=null,c="",I=0;I<d.length-1;I++){var A=Object.keys(h),B=void 0;if(typeof d[I]=="number"?B=d[I]:B=A.indexOf(String(d[I])),B<0||B>=A.length){console.error("Path not found: ".concat(d.slice(0,I+1).join(".")));return}P=h,c=A[B],h=h[c]}var V=d[d.length-1],X=Object.keys(h),R=X[V];if(R!==p){if(h.hasOwnProperty(R))P[c]=Object.fromEntries(Object.entries(h).map(function(Y){var S=x()(Y,2),$=S[0],ee=S[1];if($===R){var H=P.required;if(H){var te=H.indexOf(R);te>=0&&H.splice(te,1,p)}return[p,ee]}return[$,ee]}));else{console.error("Key not found: ".concat(R));return}y(l)}}function E(d,p,l){d.required||(d.required=[]);var h=d.required.indexOf(p);l?h!==-1&&d.required.splice(h,1):h===-1&&d.required.push(p),d.required.length===0&&delete d.required}function w(d,p){if(d.length<2){console.error("\u8DEF\u5F84\u957F\u5EA6\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u66F4\u65B0\u5FC5\u9009\u5C5E\u6027");return}var l=K().cloneDeep(o),h=d.slice(0,-2),P=d[d.length-1],c=ht(l,h);if(!c||!c.properties){console.error("\u65E0\u6CD5\u627E\u5230\u5FC5\u9009\u5C5E\u6027\u7684\u7236\u5BF9\u8C61",c);return}var I=Object.keys(c.properties);if(P<0||P>=I.length){console.error("\u5C5E\u6027\u7D22\u5F15\u8D85\u51FA\u8303\u56F4",P);return}var A=I[P];E(c,A,p),y(l)}function f(d){for(var p=K().cloneDeep(o),l=p,h=p,P=0;P<d.length-1;P++)if(l!=null)h=l,l=l[Object.keys(l)[d[P]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",d);return}var c=Object.keys(l)[d[d.length-1]];E(h,c,!0),l&&oe()(l)==="object"&&l.hasOwnProperty(c)&&delete l[c],y(p)}function z(d,p){for(var l=K().cloneDeep(o),h=l,P=0;P<d.length-(p?0:1);P++){var c=Object.keys(h)[d[P]];h[c]||(h[c]={}),h=h[c]}var I=ze("string");p?h.properties["field_".concat(M)]=I:h["field_".concat(M)]=I,N(M+1),y(l)}return(0,u.useImperativeHandle)(r,function(){return{changeSchema:T}}),(0,e.jsx)("div",{style:t.style,children:o?(0,e.jsx)(bt,{schema:o,defaultExpand:t.defaultExpand,changeSchema:T,renameProperty:b,removeProperty:f,addProperty:z,updateRequiredProperty:w,handleAdvancedSettingClick:t.handleAdvancedSettingClick}):(0,e.jsx)(Te.Z,{})})}),Zt=Ot},71860:function(ke,re,n){"use strict";n.r(re),n.d(re,{texts:function(){return x}});var ye=n(57396);const x=[{value:"1.x.x \u7248\u672C\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:" UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528 ",paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @flodejs/json-schema-editor-arco
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u5728\u7EBF\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03\u3002",paraId:6,tocIndex:3},{value:"\u7C7B\u578B\uFF1A",paraId:7,tocIndex:3},{value:"(schema: JSONSchema) => void",paraId:7,tocIndex:3},{value:"\u9ED8\u8BA4\u503C\uFF1A ",paraId:8,tocIndex:3},{value:"-",paraId:8,tocIndex:3},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E\u3002",paraId:9,tocIndex:4},{value:"\u7C7B\u578B\uFF1A",paraId:10,tocIndex:4},{value:"JSONSchema | string | undefined",paraId:10,tocIndex:4},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:11,tocIndex:4},{value:`{
  "type": "object",
  "properties": {
    "field": {
      "type": "string"
    }
  }
}
`,paraId:12,tocIndex:4},{value:"\u9ED8\u8BA4\u662F\u5426\u5C55\u5F00\u8282\u70B9\u3002",paraId:13,tocIndex:5},{value:"\u7C7B\u578B\uFF1A",paraId:14,tocIndex:5},{value:"boolean",paraId:14,tocIndex:5},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:15,tocIndex:5},{value:"true",paraId:15,tocIndex:5},{value:"\u652F\u6301 arco \u7684\u56FD\u9645\u5316\u3002",paraId:16,tocIndex:6},{value:`// \u652F\u6301\u6269\u5C55\u6216\u8986\u76D6\u9ED8\u8BA4\u8BED\u8A00\u914D\u7F6E
registerLocale('zh-cn', {
  PropertyPlaceholder: '\u8BF7\u8F93\u5165\u5C5E\u6027\u540D\u79F0',
  // ...
});
`,paraId:17,tocIndex:6},{value:"\u70B9\u51FB",paraId:18,tocIndex:7},{value:"\u9AD8\u7EA7\u8BBE\u7F6E",paraId:18,tocIndex:7},{value:"\u6309\u94AE\u7684\u56DE\u8C03\uFF0C\u8FD4\u56DE",paraId:18,tocIndex:7},{value:"false",paraId:18,tocIndex:7},{value:"\uFF1A\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\uFF0C\u8FD4\u56DE",paraId:18,tocIndex:7},{value:"true",paraId:18,tocIndex:7},{value:"\uFF1A\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\u3002",paraId:18,tocIndex:7},{value:"\u7C7B\u578B\uFF1A",paraId:19,tocIndex:7},{value:"(namePath: number[], schema: JSONSchema, propertyName?: string) => boolean",paraId:19,tocIndex:7},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:20,tocIndex:7},{value:"-",paraId:20,tocIndex:7},{value:"\u8BF4\u660E\uFF1A\u53EF\u4EE5\u7ED3\u5408",paraId:21,tocIndex:7},{value:"\u7EC4\u4EF6\u5F15\u7528",paraId:21,tocIndex:7},{value:"\u5B9E\u73B0\u70B9\u51FB\u9AD8\u7EA7\u8BBE\u7F6E\u6309\u94AE\u540E\u83B7\u53D6\u8DEF\u5F84\u4E0B\u7684 JsonSchema\uFF0C\u6DFB\u52A0\u3001\u4FEE\u6539\u81EA\u5B9A\u4E49\u5B57\u6BB5\u7B49\uFF0C\u7136\u540E\u4FEE\u6539\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema\u3002",paraId:21,tocIndex:7},{value:`export interface JsonSchemaEditorHandle {
  /* \u66F4\u65B0\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema */
  changeSchema: (namePath: number[], value: any, propertyName?: string) => void;
}
`,paraId:22,tocIndex:8}]},49832:function(){}}]);
