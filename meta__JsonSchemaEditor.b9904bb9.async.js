(self.webpackChunk_quiet_front_end_json_schema_editor_arco=self.webpackChunk_quiet_front_end_json_schema_editor_arco||[]).push([[593],{77102:function(Re,_,r){"use strict";r.r(_),r.d(_,{demos:function(){return Q}});var ye=r(15009),v=r.n(ye),Ee=r(99289),re=r.n(Ee),W=r(67294),we=r(57396),Fe=r(9170),Q={"jsonschemaeditor-demo-0":{component:W.memo(W.lazy(re()(v()().mark(function s(){var ue,L;return v()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,Promise.resolve().then(r.bind(r,9170));case 2:return ue=T.sent,L=ue.JsonSchemaEditor,T.abrupt("return",{default:function(){return W.createElement(L,null)}});case 5:case"end":return T.stop()}},s)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-arco';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-arco":{type:"NPM",value:"1.0.3"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-arco":Fe},renderOpts:{compile:function(){var s=re()(v()().mark(function L(){var me,T=arguments;return v()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,r.e(335).then(r.bind(r,37335));case 2:return P.abrupt("return",(me=P.sent).default.apply(me,T));case 3:case"end":return P.stop()}},L)}));function ue(){return s.apply(this,arguments)}return ue}()}}}},9170:function(Re,_,r){"use strict";r.r(_),r.d(_,{JsonSchemaEditor:function(){return jt}});var ye=r(5574),v=r.n(ye),Ee=r(52677),re=r.n(Ee),W=r(80507),we=r(81917),Fe=r(96486),Q=r.n(Fe),s=r(67294),ue=r(15009),L=r.n(ue),me=r(99289),T=r.n(me),Ze=r(97857),P=r.n(Ze),ve=r(74668),je=r(53794),ae=r(56187),de=r(87108),Ve=r(54224),xe=r(15695),Ue=r(72404),Ae=r(59330),ze=r(99042),He=r(67945),Ge=r(94677),ke=r(84566),Qe=r(14539),Ne=r(61873),Le=r(31826),Xe=r(74122),Ye=r(63764),qe={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=r(85893),_e=function(n){var h=n.width,I=n.lineNumbers,C=I===void 0?"on":I,o=n.height,O=n.value,F=n.folding,y=F===void 0?!0:F,b=n.language,J=n.readOnly,S=J===void 0?!1:J,N=n.renderLineHighlight,u=N===void 0?"all":N,w=n.onChange;function V(K){K.editor.defineTheme("x-code-default",qe)}return(0,e.jsx)("div",{style:{border:"1px solid rgb(var(--color-border))",width:h||"100%"},children:(0,e.jsx)(Ye.ZP,{height:o,width:h,value:O,language:b,onChange:w,onMount:n.handleEditorDidMount,beforeMount:V,theme:"x-code-default",options:{readOnly:S,lineNumbers:C,renderLineHighlight:u,folding:y,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{},minimap:{enabled:!1}}})})},Te=_e,et=r(64599),tt=r.n(et),nt=r(65009),rt=r.n(nt);function oe(t,n){if(t.$ref){var h=t.$ref;if(h.startsWith("#/")){var I=h.slice(2).split("/"),C=Q().cloneDeep(n),o=tt()(I),O;try{for(o.s();!(O=o.n()).done;){var F=O.value;if(C[F])C=C[F];else throw new Error("Unable to resolve $ref: ".concat(h))}}catch(b){o.e(b)}finally{o.f()}return C}else throw new Error("Unsupported $ref format: ".concat(h))}if(t.properties)for(var y in t.properties)t.properties[y]&&(t.properties[y]=oe(t.properties[y],n));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(b){return oe(b,n)}):t.items=oe(t.items,n)),t.oneOf&&(t.oneOf=t.oneOf.map(function(b){return oe(b,n)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(b){return oe(b,n)})),t.allOf&&(t.allOf=t.allOf.map(function(b){return oe(b,n)})),t}function ie(t){var n;if(t.$ref){var h=t.$ref;if(h.startsWith("#/")){var I=h.slice(2).split("/");return I[0]}if(t.properties){for(var C in t.properties)if(t.properties[C]&&(n=ie(t.properties[C]),n))return n}}if(t.items){if(Array.isArray(t.items))for(var o=0;o<t.items.length;o++){var O=t.items[o];if(n=ie(O),n)return n}else if(n=ie(t.items),n)return n}if(t.oneOf)for(var F=0;F<t.oneOf.length;F++){var y=t.oneOf[F];if(n=ie(y),n)return n}if(t.anyOf)for(var b=0;b<t.anyOf.length;b++){var J=t.anyOf[b];if(n=ie(J),n)return n}if(t.allOf)for(var S=0;S<t.allOf.length;S++){var N=t.allOf[S];if(n=ie(N),n)return n}}function at(t){return De.apply(this,arguments)}function De(){return De=T()(L()().mark(function t(n){var h,I;return L()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,rt().dereference(n,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(h=o.sent,I=ie(h),!I){o.next=6;break}return o.abrupt("return",oe(h,h));case 6:return o.abrupt("return",h);case 7:case"end":return o.stop()}},t)})),De.apply(this,arguments)}function ot(t){if(typeof t=="string"){var n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))try{return JSON.parse(n)}catch(h){return}}}var $e=["string","number","array","object","boolean","integer"];function pe(t,n){if(t===null||re()(t)!=="object")return console.error("The provided value is not an object."),-1;var h=Object.keys(t);return h.indexOf(n)}var it=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],st=$e.map(function(t){return{value:t}});function Ke(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var lt=function(n){var h=function(o){return Array.isArray(o)?"array":o===null?"null":re()(o)},I=function C(o){var O=h(o);switch(O){case"object":{var F={};for(var y in o)o.hasOwnProperty(y)&&(F[y]=C(o[y]));return{type:"object",properties:F,required:Object.keys(o)}}case"array":return{type:"array",items:o.length?C(o[0]):{}};default:return{type:O}}};return I(n)},ut=r(1581),dt=r.n(ut),ct=r(79443),We=ve.Z.Row,ft=function(n){var h=n.open,I=n.onOk,C=n.onCancel,o=(0,s.useState)(!1),O=v()(o,2),F=O[0],y=O[1],b=(0,s.useState)("json"),J=v()(b,2),S=J[0],N=J[1],u=(0,s.useState)(),w=v()(u,2),V=w[0],K=w[1],a=(0,s.useRef)(null);function p(i){a.current=i}(0,s.useEffect)(function(){y(h)},[h]);function d(){var i;y(!1),K(void 0),(i=a.current)===null||i===void 0||i.setValue(""),C&&C()}return(0,e.jsxs)(Le.Z,{title:"\u5BFC\u5165",style:{width:900},okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",visible:F,onOk:T()(L()().mark(function i(){var c,l,E,Z,R,k;return L()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!(!V||V.length===0)){j.next=3;break}return W.Z.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E"),j.abrupt("return");case 3:if(c=ot(V),c){j.next=7;break}return W.Z.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E"),j.abrupt("return");case 7:j.t0=S,j.next=j.t0==="json"?10:j.t0==="json-schema"?12:16;break;case 10:return l=new ct.NL().createSchemaOf(c),j.abrupt("break",16);case 12:return j.next=14,at(c);case 14:return l=j.sent,j.abrupt("break",16);case 16:if(l){j.next=21;break}return W.Z.warning("\u5BFC\u5165\u7684\u5185\u5BB9\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u540E\u91CD\u65B0\u5BFC\u5165"),j.abrupt("return");case 21:if(E=new(dt())({allErrors:!0}),Z=E.getSchema("http://json-schema.org/draft-07/schema#"),!(Z&&!Z(l))){j.next=27;break}return k=(R=Z.errors)===null||R===void 0?void 0:R.map(function(U,Y){var G=U.instancePath.split("/").pop()||"root",q="".concat(G," ").concat(U.message);return(0,e.jsx)("div",{children:'Error in field "'.concat(G,'": ').concat(q)},Y)}),((k==null?void 0:k.length)||0)>0&&W.Z.error({content:(0,e.jsx)("div",{children:k})}),j.abrupt("return");case 27:I&&I(l),d();case 29:case"end":return j.stop()}},i)})),onCancel:d,children:[(0,e.jsx)(We,{style:{marginBottom:16},children:(0,e.jsx)(Xe.Z.Group,{value:S,type:"button",onChange:function(c){return N(c)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(We,{children:(0,e.jsx)(Te,{height:500,language:"json",handleEditorDidMount:p,onChange:function(c){return K(c)}})})]})},ht=ft,D=r(1911),z=r(97101),mt=r(48331),$=ve.Z.Row,g=ve.Z.Col,vt=function(t){var n=t.schema,h=t.visible,I=h===void 0?!1:h,C=t.onOk,o=t.onCancel,O=D.Z.useForm(),F=v()(O,1),y=F[0],b=(0,s.useState)(),J=v()(b,2),S=J[0],N=J[1],u=(0,s.useState)(!1),w=v()(u,2),V=w[0],K=w[1],a=(0,s.useState)(!1),p=v()(a,2),d=p[0],i=p[1],c=(0,s.useState)(!1),l=v()(c,2),E=l[0],Z=l[1],R=(0,s.useState)(!1),k=v()(R,2),H=k[0],j=k[1],U=(0,s.useState)(!1),Y=v()(U,2),G=Y[0],q=Y[1],M=(0,s.useState)(!1),se=v()(M,2),le=se[0],Se=se[1],ce=(0,s.useState)(!1),Ie=v()(ce,2),ee=Ie[0],Ce=Ie[1],fe=(0,s.useRef)(null);(0,s.useEffect)(function(){N(n)},[n]),(0,s.useEffect)(function(){K(I)},[I]);var te=(0,s.useCallback)(Q().debounce(function(A){typeof A=="function"?A():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,s.useEffect)(function(){return function(){te.cancel()}},[te]),(0,s.useEffect)(function(){S&&(y.setFieldsValue(S),i(S.type==="object"),Z(S.type==="array"),j(S.type==="number"),q(S.type==="boolean"),Se(S.type==="integer"),Ce(S.type==="string"))},[S]);function Pe(A){fe.current=A,fe.current.setValue(JSON.stringify(n,null,2))}function Oe(){o&&o(),K(!1)}return(0,e.jsx)(Le.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",style:{width:900},visible:V,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:T()(L()().mark(function A(){return L()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,x.next=3,y.validate();case 3:C&&C(P()(P()({},S),y.getFieldsValue())),x.next=10;break;case 6:x.prev=6,x.t0=x.catch(0),console.log(y.getFieldsError()),W.Z.error("\u5B57\u6BB5\u6821\u9A8C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5B57\u6BB5\uFF01");case 10:case"end":return x.stop()}},A,null,[[0,6]])})),onCancel:Oe,children:(0,e.jsxs)(D.Z,{form:y,onValuesChange:function(f,x){fe.current&&fe.current.setValue(JSON.stringify(P()(P()({},S),x),null,2))},children:[!d&&$e.indexOf(S==null?void 0:S.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(ee||H||le||G)&&(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsxs)(g,{span:8,children:[ee&&(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(de.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"})}),(H||le)&&(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"})}),G&&(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(je.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:"true",label:"true"},{value:"false",label:"false"}]})})]})]}),ee&&(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"minLength",children:(0,e.jsx)(z.Z,{min:0,style:{width:"100%"},parser:function(f){return f?parseInt(f.replace(/\D/g,""),10):""},formatter:function(f){return f?"".concat(Math.floor(Math.max(Number(f),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"maxLength",children:(0,e.jsx)(z.Z,{min:0,style:{width:"100%"},parser:function(f){return f?parseInt(f.replace(/\D/g,""),10):""},formatter:function(f){return f?"".concat(Math.floor(Math.max(Number(f),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(H||le)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"minimum",children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"maximum",children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"exclusiveMinimum",children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"exclusiveMaximum",children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),ee&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(g,{span:20,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"pattern",children:(0,e.jsx)(de.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"format",children:(0,e.jsx)(je.Z,{allowClear:!0,options:it.map(function(A){return A.value}),placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),E&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(g,{span:20,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"uniqueItems",triggerPropName:"checked",children:(0,e.jsx)(mt.Z,{})})})]}),(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"minItems",children:(0,e.jsx)(z.Z,{style:{width:"100%"},parser:function(f){return f?parseInt(f.replace(/\D/g,""),10):""},formatter:function(f){return f?"".concat(Math.floor(Math.max(Number(f),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(g,{span:8,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,field:"maxItems",children:(0,e.jsx)(z.Z,{style:{width:"100%"},parser:function(f){return f?parseInt(f.replace(/\D/g,""),10):""},formatter:function(f){return f?"".concat(Math.floor(Math.max(Number(f),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(ee||H||le)&&(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(g,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(g,{span:20,children:(0,e.jsx)(D.Z.List,{field:"enums",children:function(f,x){var he=x.add,ge=x.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($,{gutter:10,children:f.map(function(m,B){var be=m.key,Je=m.field;return(0,e.jsx)(g,{span:12,children:(0,e.jsxs)($,{justify:"start",align:"center",style:{marginBottom:6},children:[(0,e.jsxs)(g,{flex:"auto",children:[ee&&(0,e.jsx)(D.Z.Item,{noStyle:!0,field:Je,rules:[{required:!0}],children:(0,e.jsx)(de.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})}),(H||le)&&(0,e.jsx)(D.Z.Item,{noStyle:!0,field:Je,rules:[{required:!0}],children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})})]}),(0,e.jsx)(g,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(ae.Z,{icon:(0,e.jsx)(Ne.Z,{}),shape:"circle",status:"danger",onClick:function(){return ge(B)}})})]})},be)})}),(0,e.jsx)($,{children:(0,e.jsx)(g,{span:12,children:(0,e.jsx)(D.Z.Item,{noStyle:!0,children:(0,e.jsx)(ae.Z,{onClick:function(){return he()},icon:(0,e.jsx)(ke.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(Te,{height:300,language:"json",value:JSON.stringify(S,null,2),handleEditorDidMount:Pe,onChange:function(f){te(function(){if(f)try{var x=JSON.parse(f);N(x)}catch(he){}})}})]})})},Me=ve.Z.Row,X=ve.Z.Col,pt=je.Z.Option;function Be(t){var n=t.changeSchema,h=t.renameProperty,I=t.isArrayItems,C=t.updateRequiredProperty,o=t.parentSchemaDepth,O=o===void 0?0:o,F=t.removeProperty,y=t.addProperty,b=t.isRequire,J=t.handleAdvancedSettingClick,S=(0,s.useState)(t.schema),N=v()(S,2),u=N[0],w=N[1],V=(0,s.useState)(t.propertyName),K=v()(V,2),a=K[0],p=K[1],d=(0,s.useState)(u.title),i=v()(d,2),c=i[0],l=i[1],E=(0,s.useState)(u.description),Z=v()(E,2),R=Z[0],k=Z[1],H=(0,s.useState)(t.nodeDepth?t.nodeDepth:0),j=v()(H,2),U=j[0],Y=j[1],G=(0,s.useState)(t.namePath?t.namePath:[]),q=v()(G,2),M=q[0],se=q[1],le=(0,s.useState)(!0),Se=v()(le,2),ce=Se[0],Ie=Se[1],ee=(0,s.useState)(!1),Ce=v()(ee,2),fe=Ce[0],te=Ce[1],Pe=(0,s.useState)(!1),Oe=v()(Pe,2),A=Oe[0],f=Oe[1],x=typeof a=="undefined";(0,s.useEffect)(function(){w(t.schema)},[t.schema]),(0,s.useEffect)(function(){se(t.namePath?t.namePath:[])},[t.namePath]),(0,s.useEffect)(function(){Y(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var he=u.items,ge=!!(u.type==="object"||I&&(he==null?void 0:he.type)==="object")&&!I&&!x;return u.type?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Me,{align:"center",style:{paddingBottom:10},children:[(0,e.jsx)(X,{flex:"".concat(24+U*15,"px"),style:{marginLeft:U*5},children:(0,e.jsx)(Me,{justify:"end",children:u.type==="object"&&(0,e.jsx)(ae.Z,{type:"text",size:"mini",style:{color:"rgb(var(--color-text-2))"},icon:ce?(0,e.jsx)(ze.Z,{}):(0,e.jsx)(He.Z,{}),onClick:function(){return Ie(!ce)}})})}),(0,e.jsx)(X,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(de.Z,{status:!x&&a.length===0?"error":void 0,disabled:x||I,value:x?"root":a,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((a==null?void 0:a.length)===0){W.Z.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}h&&a&&(a==null?void 0:a.length)!==0&&h(M,a)},onChange:function(B){return p(B)}})}),(0,e.jsx)(X,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(Ve.Z,{disabled:I||x,checked:b,style:{padding:0},onChange:function(B){C&&a&&C(M.slice(0,O),a,!B)}})}),(0,e.jsx)(X,{flex:"98px",style:{marginLeft:5},children:(0,e.jsx)(je.Z,{style:{width:"98px"},value:u.type,onChange:function(B){n&&n(M,Ke(B),"type")},children:st.map(function(m){return(0,e.jsx)(pt,{value:m.value,children:m.value},m.value)})})}),(0,e.jsx)(X,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(de.Z,{placeholder:"\u6807\u9898",value:c,onBlur:function(){n&&n(M.concat(pe(u,"title")),c,"title")},onChange:function(B){return l(B)}})}),(0,e.jsx)(X,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(de.Z,{placeholder:"\u63CF\u8FF0",value:R,onBlur:function(){n&&n(M.concat(pe(u,"description")),R,"description")},onChange:function(B){return k(B)}})}),(0,e.jsx)(X,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(Me,{style:{width:"72px"},children:[(0,e.jsx)(xe.Z,{content:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(ae.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Ge.Z,{}),style:{color:"rgb(var(--green-6))"},onClick:function(){J&&!J(M,u,x||u.type==="object"?void 0:a)||te(!0)}})}),!x&&!I||u.type==="object"?(0,e.jsx)(Ue.Z,{position:"bottom",droplist:ge&&(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(Ae.Z.Item,{onClick:function(){y&&y(M,!1)},children:"\u540C\u7EA7\u8282\u70B9"},"addNode"),(0,e.jsx)(Ae.Z.Item,{onClick:function(){y&&y(M,!0)},children:"\u5B50\u7EA7\u8282\u70B9"},"addChildNode")]}),children:(0,e.jsx)(xe.Z,{content:ge?void 0:"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(ae.Z,{type:"text",size:"mini",icon:(0,e.jsx)(ke.Z,{}),style:{color:"rgb(var(--primary-6))"},onClick:function(){ge||y&&y(M,!(!I&&!x))}})})}):(0,e.jsx)("div",{}),(0,e.jsx)(X,{flex:"24px",children:x?(0,e.jsx)(xe.Z,{content:"\u5BFC\u5165Json",children:(0,e.jsx)(ae.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Qe.Z,{}),style:{color:"rgb(var(--purple-6))"},onClick:function(){return f(!0)}})}):I?(0,e.jsx)("div",{}):(0,e.jsx)(xe.Z,{content:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(ae.Z,{status:"danger",type:"text",size:"mini",icon:(0,e.jsx)(Ne.Z,{}),onClick:function(){F&&F(M)}})})}),x&&u.type!=="object"&&(0,e.jsx)(X,{flex:"24px",children:!I&&(0,e.jsx)("div",{})})]})})]}),u.type==="object"&&ce&&u.properties&&Object.keys(u.properties).map(function(m){if(u.properties){var B;return(0,e.jsx)("div",{children:(0,e.jsx)(Be,P()(P()({},t),{},{isRequire:(B=u.required)===null||B===void 0?void 0:B.includes(m),isArrayItems:!1,nodeDepth:U+1,parentSchemaDepth:x?0:O+2,namePath:M.concat(pe(u,"properties"),pe(u.properties,m)),propertyName:m,schema:u.properties[m],handleAdvancedSettingClick:J}))},String(m))}return(0,e.jsx)(e.Fragment,{})}),u.type==="array"&&ce&&(0,e.jsx)(Be,P()(P()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:U+1,parentSchemaDepth:x?0:O+1,propertyName:"items",namePath:M.concat(pe(u,"items")),schema:u.items,handleAdvancedSettingClick:J})),(0,e.jsx)(vt,{schema:u,visible:fe,onOk:function(){var m=T()(L()().mark(function B(be){return L()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(n){ne.next=2;break}return ne.abrupt("return");case 2:if(!(x||u.type==="object")){ne.next=6;break}return n(M,P()({},be)),te(!1),ne.abrupt("return");case 6:n(M,P()({},be),a),te(!1);case 8:case"end":return ne.stop()}},B)}));return function(B){return m.apply(this,arguments)}}(),onCancel:function(){return te(!1)}}),(0,e.jsx)(ht,{open:A,onOk:function(B){n&&(n([],B),f(!1))},onCancel:function(){return f(!1)}})]}):(0,e.jsx)(e.Fragment,{})}var gt=Be,yt=(0,s.forwardRef)(function(t,n){function h(a){var p={type:"object",properties:{field:{type:"string"}}};if(!a)return p;switch(re()(a)){case"string":try{return lt(JSON.parse(a))}catch(d){return W.Z.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),p}case"object":return a}}var I=(0,s.useState)(h(t.data)),C=v()(I,2),o=C[0],O=C[1],F=(0,s.useState)(0),y=v()(F,2),b=y[0],J=y[1];(0,s.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(o)},[o]);var S=function(p,d,i){if(p.length===0){O(d);return}for(var c=Q().cloneDeep(o),l=c,E=0;E<p.length-1;E++){var Z=Object.keys(l)[p[E]];l[Z]||(l[Z]={}),l=l[Z]}var R=p[p.length-1],k=Object.keys(l)[R];if(R===-1){if(typeof d=="undefined"||!i)return;l[i]=d}else{if(l[k]===d)return;l[k]=d}O(c)};function N(a,p){for(var d=Q().cloneDeep(o),i=d,c=null,l="",E=0;E<a.length-1;E++){var Z=Object.keys(i),R=void 0;if(typeof a[E]=="number"?R=a[E]:R=Z.indexOf(String(a[E])),R<0||R>=Z.length){console.error("Path not found: ".concat(a.slice(0,E+1).join(".")));return}c=i,l=Z[R],i=i[l]}var k=a[a.length-1],H=Object.keys(i),j=H[k];if(j!==p){if(i.hasOwnProperty(j))c[l]=Object.fromEntries(Object.entries(i).map(function(U){var Y=v()(U,2),G=Y[0],q=Y[1];if(G===j){var M=c.required;if(M){var se=M.indexOf(j);se>=0&&M.splice(se,1,p)}return[p,q]}return[G,q]}));else{console.error("Key not found: ".concat(j));return}O(d)}}function u(a,p,d){a.required||(a.required=[]);var i=a.required.indexOf(p);d?i!==-1&&a.required.splice(i,1):i===-1&&a.required.push(p),a.required.length===0&&delete a.required}function w(a,p,d){for(var i=Q().cloneDeep(o),c=i,l=0;l<a.length;l++){var E=a[l],Z=Object.keys(c);typeof c[Z[E]]=="undefined"&&(c[Z[E]]={}),c=c[Z[E]]}u(c,p,d),O(i)}function V(a){for(var p=Q().cloneDeep(o),d=p,i=p,c=0;c<a.length-1;c++)if(d!=null)i=d,d=d[Object.keys(d)[a[c]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",a);return}var l=Object.keys(d)[a[a.length-1]];u(i,l,!0),d&&re()(d)==="object"&&d.hasOwnProperty(l)&&delete d[l],O(p)}function K(a,p){for(var d=Q().cloneDeep(o),i=d,c=0;c<a.length-(p?0:1);c++){var l=Object.keys(i)[a[c]];i[l]||(i[l]={}),i=i[l]}var E=Ke("string");p?i.properties["field_".concat(b)]=E:i["field_".concat(b)]=E,J(b+1),O(d)}return(0,s.useImperativeHandle)(n,function(){return{changeSchema:S}}),(0,e.jsx)("div",{style:{paddingTop:"10px 10px 0 10px"},children:(0,e.jsx)(gt,{schema:o,changeSchema:S,renameProperty:N,removeProperty:V,addProperty:K,updateRequiredProperty:w,handleAdvancedSettingClick:t.handleAdvancedSettingClick})})}),jt=yt},71860:function(Re,_,r){"use strict";r.r(_),r.d(_,{texts:function(){return v}});var ye=r(57396);const v=[{value:"1.x.x \u7248\u672C\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:" UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528 ",paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-arco
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u5728\u7EBF\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03\u3002",paraId:6,tocIndex:3},{value:"\u7C7B\u578B\uFF1A",paraId:7,tocIndex:3},{value:"(schema: JSONSchema7) => void",paraId:7,tocIndex:3},{value:"\u9ED8\u8BA4\u503C\uFF1A ",paraId:8,tocIndex:3},{value:"-",paraId:8,tocIndex:3},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E\u3002",paraId:9,tocIndex:4},{value:"\u7C7B\u578B\uFF1A",paraId:10,tocIndex:4},{value:"JSONSchema7 | string | undefined",paraId:10,tocIndex:4},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:11,tocIndex:4},{value:`{
  "type": "object",
  "properties": {
    "field": {
      "type": "string"
    }
  }
}
`,paraId:12,tocIndex:4},{value:"\u70B9\u51FB",paraId:13,tocIndex:5},{value:"\u9AD8\u7EA7\u8BBE\u7F6E",paraId:13,tocIndex:5},{value:"\u6309\u94AE\u7684\u56DE\u8C03\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"false",paraId:13,tocIndex:5},{value:"\uFF1A\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"true",paraId:13,tocIndex:5},{value:"\uFF1A\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\u3002",paraId:13,tocIndex:5},{value:"\u7C7B\u578B\uFF1A",paraId:14,tocIndex:5},{value:"(namePath: number[], schema: JSONSchema7, propertyName?: string) => boolean",paraId:14,tocIndex:5},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:15,tocIndex:5},{value:"-",paraId:15,tocIndex:5},{value:"\u8BF4\u660E\uFF1A\u53EF\u4EE5\u7ED3\u5408",paraId:16,tocIndex:5},{value:"\u7EC4\u4EF6\u5F15\u7528",paraId:16,tocIndex:5},{value:"\u5B9E\u73B0\u70B9\u51FB\u9AD8\u7EA7\u8BBE\u7F6E\u6309\u94AE\u540E\u83B7\u53D6\u8DEF\u5F84\u4E0B\u7684 JsonSchema\uFF0C\u6DFB\u52A0\u3001\u4FEE\u6539\u81EA\u5B9A\u4E49\u5B57\u6BB5\u7B49\uFF0C\u7136\u540E\u4FEE\u6539\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema\u3002",paraId:16,tocIndex:5},{value:`export interface JsonSchemaEditorHandle {
  /* \u66F4\u65B0\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema */
  changeSchema: (namePath: number[], value: any, propertyName?: string) => void;
}
`,paraId:17,tocIndex:6}]},49832:function(){}}]);
