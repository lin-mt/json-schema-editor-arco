(self.webpackChunk_quiet_front_end_json_schema_editor_arco=self.webpackChunk_quiet_front_end_json_schema_editor_arco||[]).push([[593],{77102:function(Re,_,r){"use strict";r.r(_),r.d(_,{demos:function(){return Q}});var je=r(15009),p=r.n(je),Ze=r(99289),ae=r.n(Ze),$=r(67294),Ve=r(57396),Ae=r(41653),Q={"jsonschemaeditor-demo-0":{component:$.memo($.lazy(ae()(p()().mark(function s(){var de,ce;return p()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,Promise.resolve().then(r.bind(r,41653));case 2:return de=V.sent,ce=de.JsonSchemaEditor,V.abrupt("return",{default:function(){return $.createElement(ce,null)}});case 5:case"end":return V.stop()}},s)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-arco';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-arco":{type:"NPM",value:"1.0.5"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-arco":Ae},renderOpts:{compile:function(){var s=ae()(p()().mark(function ce(){var N,V=arguments;return p()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,r.e(335).then(r.bind(r,37335));case 2:return ee.abrupt("return",(N=ee.sent).default.apply(N,V));case 3:case"end":return ee.stop()}},ce)}));function de(){return s.apply(this,arguments)}return de}()}}}},41653:function(Re,_,r){"use strict";r.r(_),r.d(_,{JsonSchemaEditor:function(){return St}});var je=r(5574),p=r.n(je),Ze=r(52677),ae=r.n(Ze),$=r(80507),Ve=r(81917),Ae=r(96486),Q=r.n(Ae),s=r(67294),de={type:"object",properties:{field:{type:"string"}}},ce=r(15009),N=r.n(ce),V=r(99289),fe=r.n(V),ee=r(97857),U=r.n(ee),ge=r(74668),Se=r(53794),oe=r(56187),he=r(87108),Ue=r(54224),Ie=r(15695),ze=r(72404),De=r(59330),He=r(99042),Ge=r(67945),Qe=r(94677),Ne=r(84566),Xe=r(14539),Le=r(61873),Te=r(31826),Ye=r(74122),qe=r(63764),_e={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=r(85893),et=function(n){var l=n.width,v=n.lineNumbers,j=v===void 0?"on":v,o=n.height,I=n.value,A=n.folding,C=A===void 0?!0:A,O=n.language,k=n.readOnly,S=k===void 0?!1:k,R=n.renderLineHighlight,c=R===void 0?"all":R,K=n.onChange;function W(T){T.editor.defineTheme("x-code-default",_e)}return(0,e.jsx)("div",{style:{border:"1px solid rgb(var(--color-border))",width:l||"100%"},children:(0,e.jsx)(qe.ZP,{height:o,width:l,value:I,language:O,onChange:K,onMount:n.handleEditorDidMount,beforeMount:W,theme:"x-code-default",options:{readOnly:S,lineNumbers:j,renderLineHighlight:c,folding:C,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{},minimap:{enabled:!1}}})})},$e=et,tt=r(64599),nt=r.n(tt),rt=r(65009),at=r.n(rt);function ot(t,n){if(n.length===0)return t;for(var l=t,v=0;v<n.length;v++){var j=Object.keys(l)[n[v]];if(j===void 0)return;l=l[j]}return l}function ie(t,n){if(t.$ref){var l=t.$ref;if(l.startsWith("#/")){var v=l.slice(2).split("/"),j=Q().cloneDeep(n),o=nt()(v),I;try{for(o.s();!(I=o.n()).done;){var A=I.value;if(j[A])j=j[A];else throw new Error("Unable to resolve $ref: ".concat(l))}}catch(O){o.e(O)}finally{o.f()}return j}else throw new Error("Unsupported $ref format: ".concat(l))}if(t.properties)for(var C in t.properties)t.properties[C]&&(t.properties[C]=ie(t.properties[C],n));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(O){return ie(O,n)}):t.items=ie(t.items,n)),t.oneOf&&(t.oneOf=t.oneOf.map(function(O){return ie(O,n)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(O){return ie(O,n)})),t.allOf&&(t.allOf=t.allOf.map(function(O){return ie(O,n)})),t}function se(t){var n;if(t.$ref){var l=t.$ref;if(l.startsWith("#/")){var v=l.slice(2).split("/");return v[0]}if(t.properties){for(var j in t.properties)if(t.properties[j]&&(n=se(t.properties[j]),n))return n}}if(t.items){if(Array.isArray(t.items))for(var o=0;o<t.items.length;o++){var I=t.items[o];if(n=se(I),n)return n}else if(n=se(t.items),n)return n}if(t.oneOf)for(var A=0;A<t.oneOf.length;A++){var C=t.oneOf[A];if(n=se(C),n)return n}if(t.anyOf)for(var O=0;O<t.anyOf.length;O++){var k=t.anyOf[O];if(n=se(k),n)return n}if(t.allOf)for(var S=0;S<t.allOf.length;S++){var R=t.allOf[S];if(n=se(R),n)return n}}function it(t){return Me.apply(this,arguments)}function Me(){return Me=fe()(N()().mark(function t(n){var l,v;return N()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,at().dereference(n,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(l=o.sent,v=se(l),!v){o.next=6;break}return o.abrupt("return",ie(l,l));case 6:return o.abrupt("return",l);case 7:case"end":return o.stop()}},t)})),Me.apply(this,arguments)}function st(t){if(typeof t=="string"){var n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))try{return JSON.parse(n)}catch(l){return}}}var Ke=["string","number","array","object","boolean","integer"];function xe(t,n){if(t===null||ae()(t)!=="object")return console.error("The provided value is not an object."),-1;var l=Object.keys(t);return l.indexOf(n)}var lt=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],ut=Ke.map(function(t){return{value:t}});function We(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var dt=function(n){var l=function(o){return Array.isArray(o)?"array":o===null?"null":ae()(o)},v=function j(o){var I=l(o);switch(I){case"object":{var A={};for(var C in o)o.hasOwnProperty(C)&&(A[C]=j(o[C]));return{type:"object",properties:A,required:Object.keys(o)}}case"array":return{type:"array",items:o.length?j(o[0]):{}};default:return{type:I}}};return v(n)},ct=r(1581),ft=r.n(ct),ht=r(79443),we=ge.Z.Row,mt=function(n){var l=n.open,v=n.onOk,j=n.onCancel,o=(0,s.useState)(!1),I=p()(o,2),A=I[0],C=I[1],O=(0,s.useState)("json"),k=p()(O,2),S=k[0],R=k[1],c=(0,s.useState)(),K=p()(c,2),W=K[0],T=K[1],a=(0,s.useRef)(null);function g(i){a.current=i}(0,s.useEffect)(function(){C(l)},[l]);function d(){var i;C(!1),T(void 0),(i=a.current)===null||i===void 0||i.setValue(""),j&&j()}return(0,e.jsxs)(Te.Z,{title:"\u5BFC\u5165",style:{width:900},okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",visible:A,onOk:fe()(N()().mark(function i(){var h,u,b,B,P,J;return N()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!W||W.length===0)){y.next=3;break}return $.Z.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E"),y.abrupt("return");case 3:if(h=st(W),h){y.next=7;break}return $.Z.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E"),y.abrupt("return");case 7:y.t0=S,y.next=y.t0==="json"?10:y.t0==="json-schema"?12:16;break;case 10:return u=new ht.NL().createSchemaOf(h),y.abrupt("break",16);case 12:return y.next=14,it(h);case 14:return u=y.sent,y.abrupt("break",16);case 16:if(u){y.next=21;break}return $.Z.warning("\u5BFC\u5165\u7684\u5185\u5BB9\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u540E\u91CD\u65B0\u5BFC\u5165"),y.abrupt("return");case 21:if(b=new(ft())({allErrors:!0}),B=b.getSchema("http://json-schema.org/draft-07/schema#"),!(B&&!B(u))){y.next=27;break}return J=(P=B.errors)===null||P===void 0?void 0:P.map(function(w,Y){var G=w.instancePath.split("/").pop()||"root",q="".concat(G," ").concat(w.message);return(0,e.jsx)("div",{children:'Error in field "'.concat(G,'": ').concat(q)},Y)}),((J==null?void 0:J.length)||0)>0&&$.Z.error({content:(0,e.jsx)("div",{children:J})}),y.abrupt("return");case 27:v&&v(u),d();case 29:case"end":return y.stop()}},i)})),onCancel:d,children:[(0,e.jsx)(we,{style:{marginBottom:16},children:(0,e.jsx)(Ye.Z.Group,{value:S,type:"button",onChange:function(h){return R(h)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(we,{children:(0,e.jsx)($e,{height:500,language:"json",handleEditorDidMount:g,onChange:function(h){return T(h)}})})]})},vt=mt,Z=r(1911),z=r(97101),pt=r(48331),L=ge.Z.Row,x=ge.Z.Col,gt=function(t){var n=t.schema,l=t.visible,v=l===void 0?!1:l,j=t.onOk,o=t.onCancel,I=Z.Z.useForm(),A=p()(I,1),C=A[0],O=(0,s.useState)(),k=p()(O,2),S=k[0],R=k[1],c=(0,s.useState)(!1),K=p()(c,2),W=K[0],T=K[1],a=(0,s.useState)(!1),g=p()(a,2),d=g[0],i=g[1],h=(0,s.useState)(!1),u=p()(h,2),b=u[0],B=u[1],P=(0,s.useState)(!1),J=p()(P,2),H=J[0],y=J[1],w=(0,s.useState)(!1),Y=p()(w,2),G=Y[0],q=Y[1],D=(0,s.useState)(!1),le=p()(D,2),ue=le[0],Ce=le[1],me=(0,s.useState)(!1),Ee=p()(me,2),te=Ee[0],Oe=Ee[1],ve=(0,s.useRef)(null);(0,s.useEffect)(function(){R(n)},[n]),(0,s.useEffect)(function(){T(v)},[v]);var ne=(0,s.useCallback)(Q().debounce(function(F){typeof F=="function"?F():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,s.useEffect)(function(){return function(){ne.cancel()}},[ne]),(0,s.useEffect)(function(){S&&(C.setFieldsValue(S),i(S.type==="object"),B(S.type==="array"),y(S.type==="number"),q(S.type==="boolean"),Ce(S.type==="integer"),Oe(S.type==="string"))},[S]);function ke(F){ve.current=F,ve.current.setValue(JSON.stringify(n,null,2))}function be(){o&&o(),T(!1)}return(0,e.jsx)(Te.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",style:{width:900},visible:W,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:fe()(N()().mark(function F(){return N()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,C.validate();case 3:j&&j(U()(U()({},S),C.getFieldsValue())),E.next=10;break;case 6:E.prev=6,E.t0=E.catch(0),console.log(C.getFieldsError()),$.Z.error("\u5B57\u6BB5\u6821\u9A8C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5B57\u6BB5\uFF01");case 10:case"end":return E.stop()}},F,null,[[0,6]])})),onCancel:be,children:(0,e.jsxs)(Z.Z,{form:C,onValuesChange:function(f,E){ve.current&&ve.current.setValue(JSON.stringify(U()(U()({},S),E),null,2))},children:[!d&&Ke.indexOf(S==null?void 0:S.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(te||H||ue||G)&&(0,e.jsxs)(L,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsxs)(x,{span:8,children:[te&&(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(he.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"})}),(H||ue)&&(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"})}),G&&(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(Se.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:"true",label:"true"},{value:"false",label:"false"}]})})]})]}),te&&(0,e.jsxs)(L,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(x,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"minLength",children:(0,e.jsx)(z.Z,{min:0,style:{width:"100%"},parser:function(f){return f?parseInt(f.replace(/\D/g,""),10):""},formatter:function(f){return f?"".concat(Math.floor(Math.max(Number(f),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(x,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"maxLength",children:(0,e.jsx)(z.Z,{min:0,style:{width:"100%"},parser:function(f){return f?parseInt(f.replace(/\D/g,""),10):""},formatter:function(f){return f?"".concat(Math.floor(Math.max(Number(f),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(H||ue)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(x,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"minimum",children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(x,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"maximum",children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)(L,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(x,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"exclusiveMinimum",children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(x,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"exclusiveMaximum",children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),te&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(x,{span:20,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"pattern",children:(0,e.jsx)(he.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)(L,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(x,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"format",children:(0,e.jsx)(Se.Z,{allowClear:!0,options:lt.map(function(F){return F.value}),placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),b&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(x,{span:20,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"uniqueItems",triggerPropName:"checked",children:(0,e.jsx)(pt.Z,{})})})]}),(0,e.jsxs)(L,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(x,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"minItems",children:(0,e.jsx)(z.Z,{style:{width:"100%"},parser:function(f){return f?parseInt(f.replace(/\D/g,""),10):""},formatter:function(f){return f?"".concat(Math.floor(Math.max(Number(f),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(x,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:"maxItems",children:(0,e.jsx)(z.Z,{style:{width:"100%"},parser:function(f){return f?parseInt(f.replace(/\D/g,""),10):""},formatter:function(f){return f?"".concat(Math.floor(Math.max(Number(f),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(te||H||ue)&&(0,e.jsxs)(L,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(x,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(x,{span:20,children:(0,e.jsx)(Z.Z.List,{field:"enums",children:function(f,E){var pe=E.add,ye=E.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L,{gutter:10,children:f.map(function(m,M){var Fe=m.key,Je=m.field;return(0,e.jsx)(x,{span:12,children:(0,e.jsxs)(L,{justify:"start",align:"center",style:{marginBottom:6},children:[(0,e.jsxs)(x,{flex:"auto",children:[te&&(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:Je,rules:[{required:!0}],children:(0,e.jsx)(he.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})}),(H||ue)&&(0,e.jsx)(Z.Z.Item,{noStyle:!0,field:Je,rules:[{required:!0}],children:(0,e.jsx)(z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})})]}),(0,e.jsx)(x,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(oe.Z,{icon:(0,e.jsx)(Le.Z,{}),shape:"circle",status:"danger",onClick:function(){return ye(M)}})})]})},Fe)})}),(0,e.jsx)(L,{children:(0,e.jsx)(x,{span:12,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,children:(0,e.jsx)(oe.Z,{onClick:function(){return pe()},icon:(0,e.jsx)(Ne.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)($e,{height:300,language:"json",value:JSON.stringify(S,null,2),handleEditorDidMount:ke,onChange:function(f){ne(function(){if(f)try{var E=JSON.parse(f);R(E)}catch(pe){}})}})]})})},Be=ge.Z.Row,X=ge.Z.Col,xt=Se.Z.Option;function Pe(t){var n=t.changeSchema,l=t.renameProperty,v=t.isArrayItems,j=t.updateRequiredProperty,o=t.removeProperty,I=t.addProperty,A=t.isRequire,C=t.handleAdvancedSettingClick,O=t.defaultExpand,k=O===void 0?!0:O,S=(0,s.useState)(t.schema),R=p()(S,2),c=R[0],K=R[1],W=(0,s.useState)(t.propertyName),T=p()(W,2),a=T[0],g=T[1],d=(0,s.useState)(c.title),i=p()(d,2),h=i[0],u=i[1],b=(0,s.useState)(c.description),B=p()(b,2),P=B[0],J=B[1],H=(0,s.useState)(t.nodeDepth?t.nodeDepth:0),y=p()(H,2),w=y[0],Y=y[1],G=(0,s.useState)(t.namePath?t.namePath:[]),q=p()(G,2),D=q[0],le=q[1],ue=(0,s.useState)(k),Ce=p()(ue,2),me=Ce[0],Ee=Ce[1],te=(0,s.useState)(!1),Oe=p()(te,2),ve=Oe[0],ne=Oe[1],ke=(0,s.useState)(!1),be=p()(ke,2),F=be[0],f=be[1],E=typeof a=="undefined";(0,s.useEffect)(function(){K(t.schema)},[t.schema]),(0,s.useEffect)(function(){le(t.namePath?t.namePath:[])},[t.namePath]),(0,s.useEffect)(function(){Y(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var pe=c.items,ye=!!(c.type==="object"||v&&(pe==null?void 0:pe.type)==="object")&&!v&&!E;return c.type?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Be,{align:"center",style:{paddingBottom:10},children:[(0,e.jsx)(X,{flex:"".concat(24+w*15,"px"),style:{marginLeft:w*5},children:(0,e.jsx)(Be,{justify:"end",children:c.type==="object"&&(0,e.jsx)(oe.Z,{type:"text",size:"mini",style:{color:"rgb(var(--color-text-2))"},icon:me?(0,e.jsx)(He.Z,{}):(0,e.jsx)(Ge.Z,{}),onClick:function(){return Ee(!me)}})})}),(0,e.jsx)(X,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(he.Z,{status:!E&&a.length===0?"error":void 0,disabled:E||v,value:E?"root":a,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((a==null?void 0:a.length)===0){$.Z.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}l&&a&&(a==null?void 0:a.length)!==0&&l(D,a)},onChange:function(M){return g(M)}})}),(0,e.jsx)(X,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(Ue.Z,{disabled:v||E,checked:A,style:{padding:0},onChange:function(M){j&&a&&j(D,!M)}})}),(0,e.jsx)(X,{flex:"98px",style:{marginLeft:5},children:(0,e.jsx)(Se.Z,{style:{width:"98px"},value:c.type,onChange:function(M){n&&n(D,We(M),"type")},children:ut.map(function(m){return(0,e.jsx)(xt,{value:m.value,children:m.value},m.value)})})}),(0,e.jsx)(X,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(he.Z,{placeholder:"\u6807\u9898",value:h,onBlur:function(){n&&n(D.concat(xe(c,"title")),h,"title")},onChange:function(M){return u(M)}})}),(0,e.jsx)(X,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(he.Z,{placeholder:"\u63CF\u8FF0",value:P,onBlur:function(){n&&n(D.concat(xe(c,"description")),P,"description")},onChange:function(M){return J(M)}})}),(0,e.jsx)(X,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(Be,{style:{width:"72px"},children:[(0,e.jsx)(Ie.Z,{content:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(oe.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Qe.Z,{}),style:{color:"rgb(var(--green-6))"},onClick:function(){C&&!C(D,c,E||c.type==="object"?void 0:a)||ne(!0)}})}),!E&&!v||c.type==="object"?(0,e.jsx)(ze.Z,{position:"bottom",droplist:ye&&(0,e.jsxs)(De.Z,{children:[(0,e.jsx)(De.Z.Item,{onClick:function(){I&&I(D,!1)},children:"\u540C\u7EA7\u8282\u70B9"},"addNode"),(0,e.jsx)(De.Z.Item,{onClick:function(){I&&I(D,!0)},children:"\u5B50\u7EA7\u8282\u70B9"},"addChildNode")]}),children:(0,e.jsx)(Ie.Z,{content:ye?void 0:"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(oe.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Ne.Z,{}),style:{color:"rgb(var(--primary-6))"},onClick:function(){ye||I&&I(D,!(!v&&!E))}})})}):(0,e.jsx)("div",{}),(0,e.jsx)(X,{flex:"24px",children:E?(0,e.jsx)(Ie.Z,{content:"\u5BFC\u5165Json",children:(0,e.jsx)(oe.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Xe.Z,{}),style:{color:"rgb(var(--purple-6))"},onClick:function(){return f(!0)}})}):v?(0,e.jsx)("div",{}):(0,e.jsx)(Ie.Z,{content:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(oe.Z,{status:"danger",type:"text",size:"mini",icon:(0,e.jsx)(Le.Z,{}),onClick:function(){o&&o(D)}})})}),E&&c.type!=="object"&&(0,e.jsx)(X,{flex:"24px",children:!v&&(0,e.jsx)("div",{})})]})})]}),c.type==="object"&&me&&c.properties&&Object.keys(c.properties).map(function(m){if(c.properties){var M;return(0,e.jsx)("div",{children:(0,e.jsx)(Pe,U()(U()({},t),{},{isRequire:(M=c.required)===null||M===void 0?void 0:M.includes(m),isArrayItems:!1,defaultExpand:k,nodeDepth:w+1,namePath:D.concat(xe(c,"properties"),xe(c.properties,m)),propertyName:m,schema:c.properties[m],handleAdvancedSettingClick:C}))},String(m))}return(0,e.jsx)(e.Fragment,{})}),c.type==="array"&&me&&(0,e.jsx)(Pe,U()(U()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:w+1,defaultExpand:k,propertyName:"items",namePath:D.concat(xe(c,"items")),schema:c.items,handleAdvancedSettingClick:C})),(0,e.jsx)(gt,{schema:c,visible:ve,onOk:function(){var m=fe()(N()().mark(function M(Fe){return N()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(n){re.next=2;break}return re.abrupt("return");case 2:if(!(E||c.type==="object")){re.next=6;break}return n(D,U()({},Fe)),ne(!1),re.abrupt("return");case 6:n(D,U()({},Fe),a),ne(!1);case 8:case"end":return re.stop()}},M)}));return function(M){return m.apply(this,arguments)}}(),onCancel:function(){return ne(!1)}}),(0,e.jsx)(vt,{open:F,onOk:function(M){n&&(n([],M),f(!1))},onCancel:function(){return f(!1)}})]}):(0,e.jsx)(e.Fragment,{})}var yt=Pe,jt=(0,s.forwardRef)(function(t,n){function l(a){var g=de;if(!a)return g;switch(ae()(a)){case"string":try{return dt(JSON.parse(a))}catch(d){return $.Z.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),g}case"object":return a}}var v=(0,s.useState)(l(t.data)),j=p()(v,2),o=j[0],I=j[1],A=(0,s.useState)(0),C=p()(A,2),O=C[0],k=C[1];(0,s.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(o)},[o]);var S=function(g,d,i){if(g.length===0){I(d);return}for(var h=Q().cloneDeep(o),u=h,b=0;b<g.length-1;b++){var B=Object.keys(u)[g[b]];u[B]||(u[B]={}),u=u[B]}var P=g[g.length-1],J=Object.keys(u)[P];if(P===-1){if(typeof d=="undefined"||!i)return;u[i]=d}else{if(u[J]===d)return;u[J]=d}I(h)};function R(a,g){for(var d=Q().cloneDeep(o),i=d,h=null,u="",b=0;b<a.length-1;b++){var B=Object.keys(i),P=void 0;if(typeof a[b]=="number"?P=a[b]:P=B.indexOf(String(a[b])),P<0||P>=B.length){console.error("Path not found: ".concat(a.slice(0,b+1).join(".")));return}h=i,u=B[P],i=i[u]}var J=a[a.length-1],H=Object.keys(i),y=H[J];if(y!==g){if(i.hasOwnProperty(y))h[u]=Object.fromEntries(Object.entries(i).map(function(w){var Y=p()(w,2),G=Y[0],q=Y[1];if(G===y){var D=h.required;if(D){var le=D.indexOf(y);le>=0&&D.splice(le,1,g)}return[g,q]}return[G,q]}));else{console.error("Key not found: ".concat(y));return}I(d)}}function c(a,g,d){a.required||(a.required=[]);var i=a.required.indexOf(g);d?i!==-1&&a.required.splice(i,1):i===-1&&a.required.push(g),a.required.length===0&&delete a.required}function K(a,g){if(a.length<2){console.error("\u8DEF\u5F84\u957F\u5EA6\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u66F4\u65B0\u5FC5\u9009\u5C5E\u6027");return}var d=Q().cloneDeep(o),i=a.slice(0,-2),h=a[a.length-1],u=ot(d,i);if(!u||!u.properties){console.error("\u65E0\u6CD5\u627E\u5230\u5FC5\u9009\u5C5E\u6027\u7684\u7236\u5BF9\u8C61",u);return}var b=Object.keys(u.properties);if(h<0||h>=b.length){console.error("\u5C5E\u6027\u7D22\u5F15\u8D85\u51FA\u8303\u56F4",h);return}var B=b[h];c(u,B,g),I(d)}function W(a){for(var g=Q().cloneDeep(o),d=g,i=g,h=0;h<a.length-1;h++)if(d!=null)i=d,d=d[Object.keys(d)[a[h]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",a);return}var u=Object.keys(d)[a[a.length-1]];c(i,u,!0),d&&ae()(d)==="object"&&d.hasOwnProperty(u)&&delete d[u],I(g)}function T(a,g){for(var d=Q().cloneDeep(o),i=d,h=0;h<a.length-(g?0:1);h++){var u=Object.keys(i)[a[h]];i[u]||(i[u]={}),i=i[u]}var b=We("string");g?i.properties["field_".concat(O)]=b:i["field_".concat(O)]=b,k(O+1),I(d)}return(0,s.useImperativeHandle)(n,function(){return{changeSchema:S}}),(0,e.jsx)("div",{style:{paddingTop:"10px 10px 0 10px"},children:(0,e.jsx)(yt,{schema:o,defaultExpand:t.defaultExpand,changeSchema:S,renameProperty:R,removeProperty:W,addProperty:T,updateRequiredProperty:K,handleAdvancedSettingClick:t.handleAdvancedSettingClick})})}),St=jt},71860:function(Re,_,r){"use strict";r.r(_),r.d(_,{texts:function(){return p}});var je=r(57396);const p=[{value:"1.x.x \u7248\u672C\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:" UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528 ",paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-arco
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u5728\u7EBF\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03\u3002",paraId:6,tocIndex:3},{value:"\u7C7B\u578B\uFF1A",paraId:7,tocIndex:3},{value:"(schema: JSONSchema7) => void",paraId:7,tocIndex:3},{value:"\u9ED8\u8BA4\u503C\uFF1A ",paraId:8,tocIndex:3},{value:"-",paraId:8,tocIndex:3},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E\u3002",paraId:9,tocIndex:4},{value:"\u7C7B\u578B\uFF1A",paraId:10,tocIndex:4},{value:"JSONSchema7 | string | undefined",paraId:10,tocIndex:4},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:11,tocIndex:4},{value:`{
  "type": "object",
  "properties": {
    "field": {
      "type": "string"
    }
  }
}
`,paraId:12,tocIndex:4},{value:"\u9ED8\u8BA4\u662F\u5426\u5C55\u5F00\u8282\u70B9\u3002",paraId:13,tocIndex:5},{value:"\u7C7B\u578B\uFF1A",paraId:14,tocIndex:5},{value:"boolean",paraId:14,tocIndex:5},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:15,tocIndex:5},{value:"true",paraId:15,tocIndex:5},{value:"\u70B9\u51FB",paraId:16,tocIndex:6},{value:"\u9AD8\u7EA7\u8BBE\u7F6E",paraId:16,tocIndex:6},{value:"\u6309\u94AE\u7684\u56DE\u8C03\uFF0C\u8FD4\u56DE",paraId:16,tocIndex:6},{value:"false",paraId:16,tocIndex:6},{value:"\uFF1A\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\uFF0C\u8FD4\u56DE",paraId:16,tocIndex:6},{value:"true",paraId:16,tocIndex:6},{value:"\uFF1A\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\u3002",paraId:16,tocIndex:6},{value:"\u7C7B\u578B\uFF1A",paraId:17,tocIndex:6},{value:"(namePath: number[], schema: JSONSchema7, propertyName?: string) => boolean",paraId:17,tocIndex:6},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:18,tocIndex:6},{value:"-",paraId:18,tocIndex:6},{value:"\u8BF4\u660E\uFF1A\u53EF\u4EE5\u7ED3\u5408",paraId:19,tocIndex:6},{value:"\u7EC4\u4EF6\u5F15\u7528",paraId:19,tocIndex:6},{value:"\u5B9E\u73B0\u70B9\u51FB\u9AD8\u7EA7\u8BBE\u7F6E\u6309\u94AE\u540E\u83B7\u53D6\u8DEF\u5F84\u4E0B\u7684 JsonSchema\uFF0C\u6DFB\u52A0\u3001\u4FEE\u6539\u81EA\u5B9A\u4E49\u5B57\u6BB5\u7B49\uFF0C\u7136\u540E\u4FEE\u6539\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema\u3002",paraId:19,tocIndex:6},{value:`export interface JsonSchemaEditorHandle {
  /* \u66F4\u65B0\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema */
  changeSchema: (namePath: number[], value: any, propertyName?: string) => void;
}
`,paraId:20,tocIndex:7}]},49832:function(){}}]);
