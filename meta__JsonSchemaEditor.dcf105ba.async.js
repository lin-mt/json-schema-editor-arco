(self.webpackChunk_quiet_front_end_json_schema_editor_arco=self.webpackChunk_quiet_front_end_json_schema_editor_arco||[]).push([[593],{77102:function(Be,W,r){"use strict";r.r(W),r.d(W,{demos:function(){return k}});var se=r(15009),m=r.n(se),me=r(99289),w=r.n(me),T=r(67294),nt=r(57396),pe=r(56506),k={"jsonschemaeditor-demo-0":{component:T.memo(T.lazy(w()(m()().mark(function c(){var Q,N;return m()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Promise.resolve().then(r.bind(r,56506));case 2:return Q=P.sent,N=Q.JsonSchemaEditor,P.abrupt("return",{default:function(){return T.createElement(N,null)}});case 5:case"end":return P.stop()}},c)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-arco';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-arco":{type:"NPM",value:"1.0.2"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-arco":pe},renderOpts:{compile:function(){var c=w()(m()().mark(function N(){var _,P=arguments;return m()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,r.e(335).then(r.bind(r,37335));case 2:return Z.abrupt("return",(_=Z.sent).default.apply(_,P));case 3:case"end":return Z.stop()}},N)}));function Q(){return c.apply(this,arguments)}return Q}()}}}},56506:function(Be,W,r){"use strict";r.r(W),r.d(W,{JsonSchemaEditor:function(){return Zt}});var se=r(5574),m=r.n(se),me=r(52677),w=r.n(me),T=r(80507),nt=r(81917),pe=r(96486),k=r.n(pe),c=r(67294),Q=r(15009),N=r.n(Q),_=r(99289),P=r.n(_),ve=r(97857),Z=r.n(ve),Me=r(74668),ie=r(53794),I=r(1911),U=r(56187),X=r(87108),at=r(54224),le=r(15695),ot=r(72404),ge=r(59330),Pe=r(31826),L=r(97101),st=r(48331),it=r(74122),lt=r(99042),ut=r(67945),dt=r(94677),Je=r(84566),ct=r(14539),Ne=r(61873),ft=r(79443),ht=r(63764),mt={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=r(85893),pt=function(a){var v=a.width,C=a.lineNumbers,d=C===void 0?"on":C,l=a.height,F=a.value,E=a.folding,b=E===void 0?!0:E,x=a.language,K=a.readOnly,B=K===void 0?!1:K,$=a.renderLineHighlight,te=$===void 0?"all":$,Y=a.onChange;function f(i){i.editor.defineTheme("x-code-default",mt)}return(0,e.jsx)("div",{style:{border:"1px solid rgb(var(--color-border))",width:v||"100%"},children:(0,e.jsx)(ht.ZP,{height:l,width:v,value:F,language:x,onChange:Y,onMount:a.handleEditorDidMount,beforeMount:f,theme:"x-code-default",options:{readOnly:B,lineNumbers:d,renderLineHighlight:te,folding:b,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{},minimap:{enabled:!1}}})})},Le=pt,vt=r(64599),gt=r.n(vt),yt=r(65009),jt=r.n(yt);function z(t,a){if(t.$ref){var v=t.$ref;if(v.startsWith("#/")){var C=v.slice(2).split("/"),d=k().cloneDeep(a),l=gt()(C),F;try{for(l.s();!(F=l.n()).done;){var E=F.value;if(d[E])d=d[E];else throw new Error("Unable to resolve $ref: ".concat(v))}}catch(x){l.e(x)}finally{l.f()}return d}else throw new Error("Unsupported $ref format: ".concat(v))}if(t.properties)for(var b in t.properties)t.properties[b]&&(t.properties[b]=z(t.properties[b],a));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(x){return z(x,a)}):t.items=z(t.items,a)),t.oneOf&&(t.oneOf=t.oneOf.map(function(x){return z(x,a)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(x){return z(x,a)})),t.allOf&&(t.allOf=t.allOf.map(function(x){return z(x,a)})),t}function V(t){var a;if(t.$ref){var v=t.$ref;if(v.startsWith("#/")){var C=v.slice(2).split("/");return C[0]}if(t.properties){for(var d in t.properties)if(t.properties[d]&&(a=V(t.properties[d]),a))return a}}if(t.items){if(Array.isArray(t.items))for(var l=0;l<t.items.length;l++){var F=t.items[l];if(a=V(F),a)return a}else if(a=V(t.items),a)return a}if(t.oneOf)for(var E=0;E<t.oneOf.length;E++){var b=t.oneOf[E];if(a=V(b),a)return a}if(t.anyOf)for(var x=0;x<t.anyOf.length;x++){var K=t.anyOf[x];if(a=V(K),a)return a}if(t.allOf)for(var B=0;B<t.allOf.length;B++){var $=t.allOf[B];if(a=V($),a)return a}}function xt(t){return ye.apply(this,arguments)}function ye(){return ye=P()(N()().mark(function t(a){var v,C;return N()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,jt().dereference(a,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(v=l.sent,C=V(v),!C){l.next=6;break}return l.abrupt("return",z(v,v));case 6:return l.abrupt("return",v);case 7:case"end":return l.stop()}},t)})),ye.apply(this,arguments)}function St(t){if(typeof t=="string"){var a=t.trim();if(a.startsWith("{")&&a.endsWith("}"))try{return JSON.parse(a)}catch(v){return}}}var Re=["string","number","array","object","boolean","integer"];function ee(t,a){if(t===null||w()(t)!=="object")return console.error("The provided value is not an object."),-1;var v=Object.keys(t);return v.indexOf(a)}var It=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],Ct=Re.map(function(t){return{value:t}});function Te(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var Ft=function(a){var v=function(l){return Array.isArray(l)?"array":l===null?"null":w()(l)},C=function d(l){var F=v(l);switch(F){case"object":{var E={};for(var b in l)l.hasOwnProperty(b)&&(E[b]=d(l[b]));return{type:"object",properties:E,required:Object.keys(l)}}case"array":return{type:"array",items:l.length?d(l[0]):{}};default:return{type:F}}};return C(a)},A=Me.Z.Row,u=Me.Z.Col,Ot=ie.Z.Option;function je(t){var a=I.Z.useForm(),v=m()(a,1),C=v[0],d=t.changeSchema,l=t.renameProperty,F=t.isArrayItems,E=t.updateRequiredProperty,b=t.parentSchemaDepth,x=b===void 0?0:b,K=t.removeProperty,B=t.addProperty,$=t.isRequire,te=(0,c.useState)(t.schema),Y=m()(te,2),f=Y[0],i=Y[1],g=(0,c.useState)(),p=m()(g,2),s=p[0],h=p[1],S=(0,c.useState)(t.propertyName),O=m()(S,2),y=O[0],R=O[1],xe=(0,c.useState)(f.title),ue=m()(xe,2),H=ue[0],Se=ue[1],de=(0,c.useState)(f.description),re=m()(de,2),ne=re[0],At=re[1],Dt=(0,c.useState)(t.nodeDepth?t.nodeDepth:0),ke=m()(Dt,2),ce=ke[0],Bt=ke[1],Mt=(0,c.useState)(t.namePath?t.namePath:[]),Ke=m()(Mt,2),M=Ke[0],Pt=Ke[1],Jt=(0,c.useState)(!0),$e=m()(Jt,2),fe=$e[0],Nt=$e[1],Lt=(0,c.useState)(!1),We=m()(Lt,2),G=We[0],he=We[1],Rt=(0,c.useState)(!1),we=m()(Rt,2),Ie=we[0],Ce=we[1],Tt=(0,c.useState)("json"),Ue=m()(Tt,2),ze=Ue[0],kt=Ue[1],Kt=(0,c.useState)(),Ve=m()(Kt,2),Fe=Ve[0],He=Ve[1],$t=(0,c.useState)(!1),Ge=m()($t,2),Wt=Ge[0],wt=Ge[1],Ut=(0,c.useState)(!1),Qe=m()(Ut,2),zt=Qe[0],Vt=Qe[1],Ht=(0,c.useState)(!1),Xe=m()(Ht,2),ae=Xe[0],Gt=Xe[1],Qt=(0,c.useState)(!1),Ye=m()(Qt,2),qe=Ye[0],Xt=Ye[1],Yt=(0,c.useState)(!1),_e=m()(Yt,2),oe=_e[0],qt=_e[1],_t=(0,c.useState)(!1),et=m()(_t,2),q=et[0],er=et[1],Oe=(0,c.useRef)(null),J=typeof y=="undefined";(0,c.useEffect)(function(){i(t.schema)},[t.schema]),(0,c.useEffect)(function(){Pt(t.namePath?t.namePath:[])},[t.namePath]),(0,c.useEffect)(function(){Bt(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var Ee=(0,c.useCallback)(k().debounce(function(o){typeof o=="function"?o():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,c.useEffect)(function(){return function(){Ee.cancel()}},[Ee]),(0,c.useEffect)(function(){!G||!s||(C.setFieldsValue(s),wt(s.type==="object"),Vt(s.type==="array"),Gt(s.type==="number"),Xt(s.type==="boolean"),qt(s.type==="integer"),er(s.type==="string"))},[G,JSON.stringify(s)]);var be=f.items,Ze=!!(f.type==="object"||F&&(be==null?void 0:be.type)==="object")&&!F&&!J;function tt(o){Oe.current=o}return f.type?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(A,{align:"center",style:{paddingBottom:10},children:[(0,e.jsx)(u,{flex:"".concat(24+ce*15,"px"),style:{marginLeft:ce*5},children:(0,e.jsx)(A,{justify:"end",children:f.type==="object"&&(0,e.jsx)(U.Z,{type:"text",size:"mini",style:{color:"rgb(var(--color-text-2))"},icon:fe?(0,e.jsx)(lt.Z,{}):(0,e.jsx)(ut.Z,{}),onClick:function(){return Nt(!fe)}})})}),(0,e.jsx)(u,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(X.Z,{status:!J&&y.length===0?"error":void 0,disabled:J||F,value:J?"root":y,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((y==null?void 0:y.length)===0){T.Z.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}l&&y&&(y==null?void 0:y.length)!==0&&l(M,y)},onChange:function(n){return R(n)}})}),(0,e.jsx)(u,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(at.Z,{disabled:F||J,checked:$,style:{padding:0},onChange:function(n){E&&y&&E(M.slice(0,x),y,!n)}})}),(0,e.jsx)(u,{flex:"98px",style:{marginLeft:5},children:(0,e.jsx)(ie.Z,{style:{width:"98px"},value:f.type,onChange:function(n){d&&d(M,Te(n),"type")},children:Ct.map(function(o){return(0,e.jsx)(Ot,{value:o.value,children:o.value},o.value)})})}),(0,e.jsx)(u,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(X.Z,{placeholder:"\u6807\u9898",value:H,onBlur:function(){d&&d(M.concat(ee(f,"title")),H,"title")},onChange:function(n){return Se(n)}})}),(0,e.jsx)(u,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(X.Z,{placeholder:"\u63CF\u8FF0",value:ne,onBlur:function(){d&&d(M.concat(ee(f,"description")),ne,"description")},onChange:function(n){return At(n)}})}),(0,e.jsx)(u,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(A,{style:{width:"72px"},children:[(0,e.jsx)(le.Z,{content:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(U.Z,{type:"text",size:"mini",icon:(0,e.jsx)(dt.Z,{}),style:{color:"rgb(var(--green-6))"},onClick:function(){h(f),he(!G)}})}),!J&&!F||f.type==="object"?(0,e.jsx)(ot.Z,{position:"bottom",droplist:Ze&&(0,e.jsxs)(ge.Z,{children:[(0,e.jsx)(ge.Z.Item,{onClick:function(){B&&B(M,!1)},children:"\u540C\u7EA7\u8282\u70B9"},"addNode"),(0,e.jsx)(ge.Z.Item,{onClick:function(){B&&B(M,!0)},children:"\u5B50\u7EA7\u8282\u70B9"},"addChildNode")]}),children:(0,e.jsx)(le.Z,{content:Ze?void 0:"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(U.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Je.Z,{}),style:{color:"rgb(var(--primary-6))"},onClick:function(){Ze||B&&B(M,!(!F&&!J))}})})}):(0,e.jsx)("div",{style:{width:"24px"}}),(0,e.jsx)(u,{flex:"24px",children:J?(0,e.jsx)(le.Z,{content:"\u5BFC\u5165Json",children:(0,e.jsx)(U.Z,{type:"text",size:"mini",icon:(0,e.jsx)(ct.Z,{}),style:{color:"rgb(var(--purple-6))"},onClick:function(){return Ce(!0)}})}):F?(0,e.jsx)("div",{style:{width:"24px"}}):(0,e.jsx)(le.Z,{content:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(U.Z,{status:"danger",type:"text",size:"mini",icon:(0,e.jsx)(Ne.Z,{}),onClick:function(){K&&K(M)}})})}),J&&f.type!=="object"&&(0,e.jsx)(u,{flex:"24px",children:!F&&(0,e.jsx)("div",{style:{width:"24px"}})})]})})]}),f.type==="object"&&fe&&f.properties&&Object.keys(f.properties).map(function(o){if(f.properties){var n;return(0,e.jsx)("div",{children:(0,e.jsx)(je,Z()(Z()({},t),{},{isRequire:(n=f.required)===null||n===void 0?void 0:n.includes(o),isArrayItems:!1,nodeDepth:ce+1,parentSchemaDepth:J?0:x+2,namePath:M.concat(ee(f,"properties"),ee(f.properties,o)),propertyName:o,schema:f.properties[o]}))},String(o))}return(0,e.jsx)(e.Fragment,{})}),f.type==="array"&&fe&&(0,e.jsx)(je,Z()(Z()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:ce+1,parentSchemaDepth:J?0:x+1,propertyName:"items",namePath:M.concat(ee(f,"items")),schema:f.items})),(0,e.jsx)(Pe.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",style:{width:900},visible:G,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:P()(N()().mark(function o(){return N()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(d){j.next=2;break}return j.abrupt("return");case 2:if(!(J||f.type==="object")){j.next=6;break}return d(M,Z()(Z()({},f),s),"root"),he(!G),j.abrupt("return");case 6:return j.prev=6,j.next=9,C.validate();case 9:d(M,Z()(Z()({},f),C.getFieldsValue()),y),he(!G),j.next=17;break;case 13:j.prev=13,j.t0=j.catch(6),console.log(C.getFieldsError()),T.Z.error("\u5B57\u6BB5\u6821\u9A8C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5B57\u6BB5\uFF01");case 17:case"end":return j.stop()}},o,null,[[6,13]])})),onCancel:function(){return he(!G)},children:(0,e.jsxs)(I.Z,{form:C,onValuesChange:function(n,j){Oe.current&&Oe.current.setValue(JSON.stringify(Z()(Z()({},s),j),null,2))},children:[!Wt&&Re.indexOf(s==null?void 0:s.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(q||ae||oe||qe)&&(0,e.jsxs)(A,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsxs)(u,{span:8,children:[q&&(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(X.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"})}),(ae||oe)&&(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"})}),qe&&(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(ie.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:"true",label:"true"},{value:"false",label:"false"}]})})]})]}),q&&(0,e.jsxs)(A,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(u,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"minLength",children:(0,e.jsx)(L.Z,{min:0,style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(Number(n),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(u,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"maxLength",children:(0,e.jsx)(L.Z,{min:0,style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(Number(n),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(ae||oe)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(A,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(u,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"minimum",children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(u,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"maximum",children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)(A,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(u,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"exclusiveMinimum",children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(u,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"exclusiveMaximum",children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),q&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(A,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(u,{span:20,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"pattern",children:(0,e.jsx)(X.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)(A,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(u,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"format",children:(0,e.jsx)(ie.Z,{allowClear:!0,options:It.map(function(o){return o.value}),placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),zt&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(A,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(u,{span:20,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"uniqueItems",triggerPropName:"checked",children:(0,e.jsx)(st.Z,{})})})]}),(0,e.jsxs)(A,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(u,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"minItems",children:(0,e.jsx)(L.Z,{style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(Number(n),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(u,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,field:"maxItems",children:(0,e.jsx)(L.Z,{style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(Number(n),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(q||ae||oe)&&(0,e.jsxs)(A,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(u,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(u,{span:20,children:(0,e.jsx)(I.Z.List,{field:"enums",children:function(n,j){var Ae=j.add,D=j.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(A,{gutter:10,children:n.map(function(De,tr){var rr=De.key,rt=De.field;return(0,e.jsx)(u,{span:12,children:(0,e.jsxs)(A,{justify:"start",align:"center",style:{marginBottom:6},children:[(0,e.jsxs)(u,{flex:"auto",children:[q&&(0,e.jsx)(I.Z.Item,{noStyle:!0,field:rt,rules:[{required:!0}],children:(0,e.jsx)(X.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})}),(ae||oe)&&(0,e.jsx)(I.Z.Item,{noStyle:!0,field:rt,rules:[{required:!0}],children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})})]}),(0,e.jsx)(u,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(U.Z,{icon:(0,e.jsx)(Ne.Z,{}),shape:"circle",status:"danger",onClick:function(){return D(tr)}})})]})},rr)})}),(0,e.jsx)(A,{children:(0,e.jsx)(u,{span:12,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,children:(0,e.jsx)(U.Z,{onClick:function(){return Ae()},icon:(0,e.jsx)(Je.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(Le,{height:300,language:"json",value:JSON.stringify(s,null,2),handleEditorDidMount:tt,onChange:function(n){Ee(function(){if(n)try{var j=JSON.parse(n);h(j)}catch(Ae){}})}})]})}),(0,e.jsxs)(Pe.Z,{title:"\u5BFC\u5165",style:{width:900},okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",visible:Ie,onOk:P()(N()().mark(function o(){var n,j;return N()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(!Fe||Fe.length===0)){D.next=3;break}return T.Z.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E"),D.abrupt("return");case 3:if(n=St(Fe),n){D.next=7;break}return T.Z.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E"),D.abrupt("return");case 7:D.t0=ze,D.next=D.t0==="json"?10:D.t0==="json-schema"?12:16;break;case 10:return j=new ft.NL().createSchemaOf(n),D.abrupt("break",16);case 12:return D.next=14,xt(n);case 14:return j=D.sent,D.abrupt("break",16);case 16:d&&(d([],j,"root"),Ce(!Ie),He(void 0));case 17:case"end":return D.stop()}},o)})),onCancel:function(){return Ce(!Ie)},children:[(0,e.jsx)(A,{style:{marginBottom:16},children:(0,e.jsx)(it.Z.Group,{value:ze,type:"button",onChange:function(n){return kt(n)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(A,{children:(0,e.jsx)(Le,{height:399,language:"json",handleEditorDidMount:tt,onChange:function(n){return He(n)}})})]})]}):(0,e.jsx)(e.Fragment,{})}var Et=je;function bt(t){function a(i){var g={type:"object",properties:{field:{type:"string"}}};if(!i)return g;switch(w()(i)){case"string":try{return Ft(JSON.parse(i))}catch(p){return T.Z.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),g}case"object":return i}}var v=(0,c.useState)(a(t.data)),C=m()(v,2),d=C[0],l=C[1],F=(0,c.useState)(0),E=m()(F,2),b=E[0],x=E[1];(0,c.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(d)},[d]);function K(i,g,p){if(i.length===0){l(g);return}for(var s=k().cloneDeep(d),h=s,S=0;S<i.length-1;S++){var O=Object.keys(h)[i[S]];h[O]||(h[O]={}),h=h[O]}var y=i[i.length-1],R=Object.keys(h)[y];if(y===-1){if(typeof g=="undefined")return;h[p]=g}else{if(h[R]===g)return;h[R]=g}l(s)}function B(i,g){for(var p=k().cloneDeep(d),s=p,h=null,S="",O=0;O<i.length-1;O++){var y=Object.keys(s),R=void 0;if(typeof i[O]=="number"?R=i[O]:R=y.indexOf(String(i[O])),R<0||R>=y.length){console.error("Path not found: ".concat(i.slice(0,O+1).join(".")));return}h=s,S=y[R],s=s[S]}var xe=i[i.length-1],ue=Object.keys(s),H=ue[xe];if(H!==g){if(s.hasOwnProperty(H))h[S]=Object.fromEntries(Object.entries(s).map(function(Se){var de=m()(Se,2),re=de[0],ne=de[1];return re===H?[g,ne]:[re,ne]}));else{console.error("Key not found: ".concat(H));return}l(p)}}function $(i,g,p){i.required||(i.required=[]);var s=i.required.indexOf(g);p?s!==-1&&i.required.splice(s,1):s===-1&&i.required.push(g),i.required.length===0&&delete i.required}function te(i,g,p){for(var s=k().cloneDeep(d),h=s,S=0;S<i.length;S++){var O=i[S],y=Object.keys(h);typeof h[y[O]]=="undefined"&&(h[y[O]]={}),h=h[y[O]]}$(h,g,p),l(s)}function Y(i){for(var g=k().cloneDeep(d),p=g,s=g,h=0;h<i.length-1;h++)if(p!=null)s=p,p=p[Object.keys(p)[i[h]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",i);return}var S=Object.keys(p)[i[i.length-1]];$(s,S,!0),p&&w()(p)==="object"&&p.hasOwnProperty(S)&&delete p[S],l(g)}function f(i,g){for(var p=k().cloneDeep(d),s=p,h=0;h<i.length-(g?0:1);h++){var S=Object.keys(s)[i[h]];s[S]||(s[S]={}),s=s[S]}var O=Te("string");g?s.properties["field_".concat(b)]=O:s["field_".concat(b)]=O,x(b+1),l(p)}return(0,e.jsx)("div",{style:{paddingTop:"10px 10px 0 10px"},children:(0,e.jsx)(Et,{schema:d,changeSchema:K,renameProperty:B,removeProperty:Y,addProperty:f,updateRequiredProperty:te})})}var Zt=bt},71860:function(Be,W,r){"use strict";r.r(W),r.d(W,{texts:function(){return m}});var se=r(57396);const m=[{value:"1.x.x \u7248\u672C\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:" UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528 ",paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-arco
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u5728\u7EBF\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"\u53C2\u6570\u540D\u79F0",paraId:6,tocIndex:2},{value:"\u63CF\u8FF0",paraId:6,tocIndex:2},{value:"\u7C7B\u578B",paraId:6,tocIndex:2},{value:"\u9ED8\u8BA4\u503C",paraId:6,tocIndex:2},{value:"onChange",paraId:6,tocIndex:2},{value:"JsonSchema \u53D8\u66F4\u56DE\u8C03",paraId:6,tocIndex:2},{value:"(schema: JSONSchema7) => void",paraId:6,tocIndex:2},{value:"-",paraId:6,tocIndex:2},{value:"data",paraId:6,tocIndex:2},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E",paraId:6,tocIndex:2},{value:"JSONSchema7 | undefined | string;",paraId:6,tocIndex:2},{value:'{"type": "object","properties": {"field": {"type": "string"}}}',paraId:6,tocIndex:2}]},49832:function(){}}]);
