(self.webpackChunk_quiet_front_end_json_schema_editor_arco=self.webpackChunk_quiet_front_end_json_schema_editor_arco||[]).push([[593],{77102:function(Pe,W,r){"use strict";r.r(W),r.d(W,{demos:function(){return k}});var le=r(15009),h=r.n(le),pe=r(99289),U=r.n(pe),T=r(67294),at=r(57396),ge=r(56506),k={"jsonschemaeditor-demo-0":{component:T.memo(T.lazy(U()(h()().mark(function d(){var X,N;return h()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,Promise.resolve().then(r.bind(r,56506));case 2:return X=J.sent,N=X.JsonSchemaEditor,J.abrupt("return",{default:function(){return T.createElement(N,null)}});case 5:case"end":return J.stop()}},d)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-arco';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-arco":{type:"NPM",value:"1.0.2"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-arco":ge},renderOpts:{compile:function(){var d=U()(h()().mark(function N(){var te,J=arguments;return h()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,r.e(335).then(r.bind(r,37335));case 2:return b.abrupt("return",(te=b.sent).default.apply(te,J));case 3:case"end":return b.stop()}},N)}));function X(){return d.apply(this,arguments)}return X}()}}}},56506:function(Pe,W,r){"use strict";r.r(W),r.d(W,{JsonSchemaEditor:function(){return At}});var le=r(5574),h=r.n(le),pe=r(52677),U=r.n(pe),T=r(80507),at=r(81917),ge=r(96486),k=r.n(ge),d=r(67294),X=r(15009),N=r.n(X),te=r(99289),J=r.n(te),ye=r(97857),b=r.n(ye),Me=r(74668),ue=r(53794),C=r(1911),z=r(56187),Y=r(87108),ot=r(54224),de=r(15695),it=r(72404),xe=r(59330),Je=r(31826),L=r(97101),st=r(48331),lt=r(74122),ut=r(99042),dt=r(67945),ct=r(94677),Ne=r(84566),ft=r(14539),Le=r(61873),ht=r(79443),mt=r(63764),vt={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=r(85893),pt=function(a){var g=a.width,O=a.lineNumbers,m=O===void 0?"on":O,s=a.height,y=a.value,Z=a.folding,A=Z===void 0?!0:Z,S=a.language,K=a.readOnly,B=K===void 0?!1:K,w=a.renderLineHighlight,$=w===void 0?"all":w,ne=a.onChange;function q(c){c.editor.defineTheme("x-code-default",vt)}return(0,e.jsx)("div",{style:{border:"1px solid rgb(var(--color-border))",width:g||"100%"},children:(0,e.jsx)(mt.ZP,{height:s,width:g,value:y,language:S,onChange:ne,onMount:a.handleEditorDidMount,beforeMount:q,theme:"x-code-default",options:{readOnly:B,lineNumbers:m,renderLineHighlight:$,folding:A,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{},minimap:{enabled:!1}}})})},Re=pt,gt=r(64599),yt=r.n(gt),xt=r(65009),jt=r.n(xt);function H(t,a){if(t.$ref){var g=t.$ref;if(g.startsWith("#/")){var O=g.slice(2).split("/"),m=k().cloneDeep(a),s=yt()(O),y;try{for(s.s();!(y=s.n()).done;){var Z=y.value;if(m[Z])m=m[Z];else throw new Error("Unable to resolve $ref: ".concat(g))}}catch(S){s.e(S)}finally{s.f()}return m}else throw new Error("Unsupported $ref format: ".concat(g))}if(t.properties)for(var A in t.properties)t.properties[A]&&(t.properties[A]=H(t.properties[A],a));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(S){return H(S,a)}):t.items=H(t.items,a)),t.oneOf&&(t.oneOf=t.oneOf.map(function(S){return H(S,a)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(S){return H(S,a)})),t.allOf&&(t.allOf=t.allOf.map(function(S){return H(S,a)})),t}function V(t){var a;if(t.$ref){var g=t.$ref;if(g.startsWith("#/")){var O=g.slice(2).split("/");return O[0]}if(t.properties){for(var m in t.properties)if(t.properties[m]&&(a=V(t.properties[m]),a))return a}}if(t.items){if(Array.isArray(t.items))for(var s=0;s<t.items.length;s++){var y=t.items[s];if(a=V(y),a)return a}else if(a=V(t.items),a)return a}if(t.oneOf)for(var Z=0;Z<t.oneOf.length;Z++){var A=t.oneOf[Z];if(a=V(A),a)return a}if(t.anyOf)for(var S=0;S<t.anyOf.length;S++){var K=t.anyOf[S];if(a=V(K),a)return a}if(t.allOf)for(var B=0;B<t.allOf.length;B++){var w=t.allOf[B];if(a=V(w),a)return a}}function St(t){return je.apply(this,arguments)}function je(){return je=J()(N()().mark(function t(a){var g,O;return N()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,jt().dereference(a,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(g=s.sent,O=V(g),!O){s.next=6;break}return s.abrupt("return",H(g,g));case 6:return s.abrupt("return",g);case 7:case"end":return s.stop()}},t)})),je.apply(this,arguments)}function It(t){if(typeof t=="string"){var a=t.trim();if(a.startsWith("{")&&a.endsWith("}"))try{return JSON.parse(a)}catch(g){return}}}var Te=["string","number","array","object","boolean","integer"];function re(t,a){if(t===null||U()(t)!=="object")return console.error("The provided value is not an object."),-1;var g=Object.keys(t);return g.indexOf(a)}var Ct=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],Ft=Te.map(function(t){return{value:t}});function ke(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var Ot=function(a){var g=function(s){return Array.isArray(s)?"array":s===null?"null":U()(s)},O=function m(s){var y=g(s);switch(y){case"object":{var Z={};for(var A in s)s.hasOwnProperty(A)&&(Z[A]=m(s[A]));return{type:"object",properties:Z,required:Object.keys(s)}}case"array":return{type:"array",items:s.length?m(s[0]):{}};default:return{type:y}}};return O(a)},E=Me.Z.Row,l=Me.Z.Col,bt=ue.Z.Option;function Se(t){var a=C.Z.useForm(),g=h()(a,1),O=g[0],m=t.changeSchema,s=t.renameProperty,y=t.isArrayItems,Z=t.updateRequiredProperty,A=t.parentSchemaDepth,S=A===void 0?0:A,K=t.removeProperty,B=t.addProperty,w=t.isRequire,$=t.handleAdvancedSettingClick,ne=(0,d.useState)(t.schema),q=h()(ne,2),c=q[0],u=q[1],x=(0,d.useState)(),f=h()(x,2),i=f[0],I=f[1],v=(0,d.useState)(t.propertyName),F=h()(v,2),p=F[0],R=F[1],_=(0,d.useState)(c.title),ce=h()(_,2),G=ce[0],Ie=ce[1],fe=(0,d.useState)(c.description),ae=h()(fe,2),oe=ae[0],Dt=ae[1],Bt=(0,d.useState)(t.nodeDepth?t.nodeDepth:0),Ke=h()(Bt,2),he=Ke[0],Pt=Ke[1],Mt=(0,d.useState)(t.namePath?t.namePath:[]),$e=h()(Mt,2),P=$e[0],Jt=$e[1],Nt=(0,d.useState)(!0),We=h()(Nt,2),me=We[0],Lt=We[1],Rt=(0,d.useState)(!1),we=h()(Rt,2),Q=we[0],ve=we[1],Tt=(0,d.useState)(!1),Ue=h()(Tt,2),Ce=Ue[0],Fe=Ue[1],kt=(0,d.useState)("json"),ze=h()(kt,2),He=ze[0],Kt=ze[1],$t=(0,d.useState)(),Ve=h()($t,2),Oe=Ve[0],Ge=Ve[1],Wt=(0,d.useState)(!1),Qe=h()(Wt,2),wt=Qe[0],Ut=Qe[1],zt=(0,d.useState)(!1),Xe=h()(zt,2),Ht=Xe[0],Vt=Xe[1],Gt=(0,d.useState)(!1),Ye=h()(Gt,2),ie=Ye[0],Qt=Ye[1],Xt=(0,d.useState)(!1),qe=h()(Xt,2),_e=qe[0],Yt=qe[1],qt=(0,d.useState)(!1),et=h()(qt,2),se=et[0],_t=et[1],er=(0,d.useState)(!1),tt=h()(er,2),ee=tt[0],tr=tt[1],be=(0,d.useRef)(null),M=typeof p=="undefined";(0,d.useEffect)(function(){u(t.schema)},[t.schema]),(0,d.useEffect)(function(){Jt(t.namePath?t.namePath:[])},[t.namePath]),(0,d.useEffect)(function(){Pt(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var Ee=(0,d.useCallback)(k().debounce(function(o){typeof o=="function"?o():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,d.useEffect)(function(){return function(){Ee.cancel()}},[Ee]),(0,d.useEffect)(function(){!Q||!i||(O.setFieldsValue(i),Ut(i.type==="object"),Vt(i.type==="array"),Qt(i.type==="number"),Yt(i.type==="boolean"),_t(i.type==="integer"),tr(i.type==="string"))},[Q,JSON.stringify(i)]);var Ze=c.items,Ae=!!(c.type==="object"||y&&(Ze==null?void 0:Ze.type)==="object")&&!y&&!M;function rt(o){be.current=o}return c.type?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(E,{align:"center",style:{paddingBottom:10},children:[(0,e.jsx)(l,{flex:"".concat(24+he*15,"px"),style:{marginLeft:he*5},children:(0,e.jsx)(E,{justify:"end",children:c.type==="object"&&(0,e.jsx)(z.Z,{type:"text",size:"mini",style:{color:"rgb(var(--color-text-2))"},icon:me?(0,e.jsx)(ut.Z,{}):(0,e.jsx)(dt.Z,{}),onClick:function(){return Lt(!me)}})})}),(0,e.jsx)(l,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Y.Z,{status:!M&&p.length===0?"error":void 0,disabled:M||y,value:M?"root":p,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((p==null?void 0:p.length)===0){T.Z.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}s&&p&&(p==null?void 0:p.length)!==0&&s(P,p)},onChange:function(n){return R(n)}})}),(0,e.jsx)(l,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(ot.Z,{disabled:y||M,checked:w,style:{padding:0},onChange:function(n){Z&&p&&Z(P.slice(0,S),p,!n)}})}),(0,e.jsx)(l,{flex:"98px",style:{marginLeft:5},children:(0,e.jsx)(ue.Z,{style:{width:"98px"},value:c.type,onChange:function(n){m&&m(P,ke(n),"type")},children:Ft.map(function(o){return(0,e.jsx)(bt,{value:o.value,children:o.value},o.value)})})}),(0,e.jsx)(l,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Y.Z,{placeholder:"\u6807\u9898",value:G,onBlur:function(){m&&m(P.concat(re(c,"title")),G,"title")},onChange:function(n){return Ie(n)}})}),(0,e.jsx)(l,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Y.Z,{placeholder:"\u63CF\u8FF0",value:oe,onBlur:function(){m&&m(P.concat(re(c,"description")),oe,"description")},onChange:function(n){return Dt(n)}})}),(0,e.jsx)(l,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(E,{style:{width:"72px"},children:[(0,e.jsx)(de.Z,{content:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(z.Z,{type:"text",size:"mini",icon:(0,e.jsx)(ct.Z,{}),style:{color:"rgb(var(--green-6))"},onClick:function(){$&&!$(P,c,M||c.type==="object"?void 0:p)||(I(c),ve(!Q))}})}),!M&&!y||c.type==="object"?(0,e.jsx)(it.Z,{position:"bottom",droplist:Ae&&(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(xe.Z.Item,{onClick:function(){B&&B(P,!1)},children:"\u540C\u7EA7\u8282\u70B9"},"addNode"),(0,e.jsx)(xe.Z.Item,{onClick:function(){B&&B(P,!0)},children:"\u5B50\u7EA7\u8282\u70B9"},"addChildNode")]}),children:(0,e.jsx)(de.Z,{content:Ae?void 0:"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(z.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Ne.Z,{}),style:{color:"rgb(var(--primary-6))"},onClick:function(){Ae||B&&B(P,!(!y&&!M))}})})}):(0,e.jsx)("div",{style:{width:"24px"}}),(0,e.jsx)(l,{flex:"24px",children:M?(0,e.jsx)(de.Z,{content:"\u5BFC\u5165Json",children:(0,e.jsx)(z.Z,{type:"text",size:"mini",icon:(0,e.jsx)(ft.Z,{}),style:{color:"rgb(var(--purple-6))"},onClick:function(){return Fe(!0)}})}):y?(0,e.jsx)("div",{style:{width:"24px"}}):(0,e.jsx)(de.Z,{content:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(z.Z,{status:"danger",type:"text",size:"mini",icon:(0,e.jsx)(Le.Z,{}),onClick:function(){K&&K(P)}})})}),M&&c.type!=="object"&&(0,e.jsx)(l,{flex:"24px",children:!y&&(0,e.jsx)("div",{style:{width:"24px"}})})]})})]}),c.type==="object"&&me&&c.properties&&Object.keys(c.properties).map(function(o){if(c.properties){var n;return(0,e.jsx)("div",{children:(0,e.jsx)(Se,b()(b()({},t),{},{isRequire:(n=c.required)===null||n===void 0?void 0:n.includes(o),isArrayItems:!1,nodeDepth:he+1,parentSchemaDepth:M?0:S+2,namePath:P.concat(re(c,"properties"),re(c.properties,o)),propertyName:o,schema:c.properties[o],handleAdvancedSettingClick:$}))},String(o))}return(0,e.jsx)(e.Fragment,{})}),c.type==="array"&&me&&(0,e.jsx)(Se,b()(b()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:he+1,parentSchemaDepth:M?0:S+1,propertyName:"items",namePath:P.concat(re(c,"items")),schema:c.items,handleAdvancedSettingClick:$})),(0,e.jsx)(Je.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",style:{width:900},visible:Q,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:J()(N()().mark(function o(){return N()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(m){j.next=2;break}return j.abrupt("return");case 2:if(!(M||c.type==="object")){j.next=6;break}return m(P,b()(b()({},c),i)),ve(!Q),j.abrupt("return");case 6:return j.prev=6,j.next=9,O.validate();case 9:m(P,b()(b()(b()({},c),i),O.getFieldsValue()),p),ve(!Q),j.next=17;break;case 13:j.prev=13,j.t0=j.catch(6),console.log(O.getFieldsError()),T.Z.error("\u5B57\u6BB5\u6821\u9A8C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5B57\u6BB5\uFF01");case 17:case"end":return j.stop()}},o,null,[[6,13]])})),onCancel:function(){return ve(!Q)},children:(0,e.jsxs)(C.Z,{form:O,onValuesChange:function(n,j){be.current&&be.current.setValue(JSON.stringify(b()(b()({},i),j),null,2))},children:[!wt&&Te.indexOf(i==null?void 0:i.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(ee||ie||se||_e)&&(0,e.jsxs)(E,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsxs)(l,{span:8,children:[ee&&(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(Y.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"})}),(ie||se)&&(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"})}),_e&&(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(ue.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:"true",label:"true"},{value:"false",label:"false"}]})})]})]}),ee&&(0,e.jsxs)(E,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(l,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"minLength",children:(0,e.jsx)(L.Z,{min:0,style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(Number(n),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(l,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"maxLength",children:(0,e.jsx)(L.Z,{min:0,style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(Number(n),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(ie||se)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(E,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(l,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"minimum",children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(l,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"maximum",children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)(E,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(l,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"exclusiveMinimum",children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(l,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"exclusiveMaximum",children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),ee&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(E,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(l,{span:20,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"pattern",children:(0,e.jsx)(Y.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)(E,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(l,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"format",children:(0,e.jsx)(ue.Z,{allowClear:!0,options:Ct.map(function(o){return o.value}),placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),Ht&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(E,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(l,{span:20,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"uniqueItems",triggerPropName:"checked",children:(0,e.jsx)(st.Z,{})})})]}),(0,e.jsxs)(E,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(l,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"minItems",children:(0,e.jsx)(L.Z,{style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(Number(n),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(l,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,field:"maxItems",children:(0,e.jsx)(L.Z,{style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(Number(n),0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(ee||ie||se)&&(0,e.jsxs)(E,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsx)(l,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(l,{span:20,children:(0,e.jsx)(C.Z.List,{field:"enums",children:function(n,j){var De=j.add,D=j.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E,{gutter:10,children:n.map(function(Be,rr){var nr=Be.key,nt=Be.field;return(0,e.jsx)(l,{span:12,children:(0,e.jsxs)(E,{justify:"start",align:"center",style:{marginBottom:6},children:[(0,e.jsxs)(l,{flex:"auto",children:[ee&&(0,e.jsx)(C.Z.Item,{noStyle:!0,field:nt,rules:[{required:!0}],children:(0,e.jsx)(Y.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})}),(ie||se)&&(0,e.jsx)(C.Z.Item,{noStyle:!0,field:nt,rules:[{required:!0}],children:(0,e.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})})]}),(0,e.jsx)(l,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(z.Z,{icon:(0,e.jsx)(Le.Z,{}),shape:"circle",status:"danger",onClick:function(){return D(rr)}})})]})},nr)})}),(0,e.jsx)(E,{children:(0,e.jsx)(l,{span:12,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,children:(0,e.jsx)(z.Z,{onClick:function(){return De()},icon:(0,e.jsx)(Ne.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(Re,{height:300,language:"json",value:JSON.stringify(i,null,2),handleEditorDidMount:rt,onChange:function(n){Ee(function(){if(n)try{var j=JSON.parse(n);I(j)}catch(De){}})}})]})}),(0,e.jsxs)(Je.Z,{title:"\u5BFC\u5165",style:{width:900},okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",visible:Ce,onOk:J()(N()().mark(function o(){var n,j;return N()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(!Oe||Oe.length===0)){D.next=3;break}return T.Z.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E"),D.abrupt("return");case 3:if(n=It(Oe),n){D.next=7;break}return T.Z.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E"),D.abrupt("return");case 7:D.t0=He,D.next=D.t0==="json"?10:D.t0==="json-schema"?12:16;break;case 10:return j=new ht.NL().createSchemaOf(n),D.abrupt("break",16);case 12:return D.next=14,St(n);case 14:return j=D.sent,D.abrupt("break",16);case 16:m&&(m([],j),Fe(!Ce),Ge(void 0));case 17:case"end":return D.stop()}},o)})),onCancel:function(){return Fe(!Ce)},children:[(0,e.jsx)(E,{style:{marginBottom:16},children:(0,e.jsx)(lt.Z.Group,{value:He,type:"button",onChange:function(n){return Kt(n)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(E,{children:(0,e.jsx)(Re,{height:399,language:"json",handleEditorDidMount:rt,onChange:function(n){return Ge(n)}})})]})]}):(0,e.jsx)(e.Fragment,{})}var Et=Se,Zt=(0,d.forwardRef)(function(t,a){function g(u){var x={type:"object",properties:{field:{type:"string"}}};if(!u)return x;switch(U()(u)){case"string":try{return Ot(JSON.parse(u))}catch(f){return T.Z.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),x}case"object":return u}}var O=(0,d.useState)(g(t.data)),m=h()(O,2),s=m[0],y=m[1],Z=(0,d.useState)(0),A=h()(Z,2),S=A[0],K=A[1];(0,d.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(s)},[s]);var B=function(x,f,i){if(x.length===0){y(f);return}for(var I=k().cloneDeep(s),v=I,F=0;F<x.length-1;F++){var p=Object.keys(v)[x[F]];v[p]||(v[p]={}),v=v[p]}var R=x[x.length-1],_=Object.keys(v)[R];if(R===-1){if(typeof f=="undefined"||!i)return;v[i]=f}else{if(v[_]===f)return;v[_]=f}y(I)};function w(u,x){for(var f=k().cloneDeep(s),i=f,I=null,v="",F=0;F<u.length-1;F++){var p=Object.keys(i),R=void 0;if(typeof u[F]=="number"?R=u[F]:R=p.indexOf(String(u[F])),R<0||R>=p.length){console.error("Path not found: ".concat(u.slice(0,F+1).join(".")));return}I=i,v=p[R],i=i[v]}var _=u[u.length-1],ce=Object.keys(i),G=ce[_];if(G!==x){if(i.hasOwnProperty(G))I[v]=Object.fromEntries(Object.entries(i).map(function(Ie){var fe=h()(Ie,2),ae=fe[0],oe=fe[1];return ae===G?[x,oe]:[ae,oe]}));else{console.error("Key not found: ".concat(G));return}y(f)}}function $(u,x,f){u.required||(u.required=[]);var i=u.required.indexOf(x);f?i!==-1&&u.required.splice(i,1):i===-1&&u.required.push(x),u.required.length===0&&delete u.required}function ne(u,x,f){for(var i=k().cloneDeep(s),I=i,v=0;v<u.length;v++){var F=u[v],p=Object.keys(I);typeof I[p[F]]=="undefined"&&(I[p[F]]={}),I=I[p[F]]}$(I,x,f),y(i)}function q(u){for(var x=k().cloneDeep(s),f=x,i=x,I=0;I<u.length-1;I++)if(f!=null)i=f,f=f[Object.keys(f)[u[I]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",u);return}var v=Object.keys(f)[u[u.length-1]];$(i,v,!0),f&&U()(f)==="object"&&f.hasOwnProperty(v)&&delete f[v],y(x)}function c(u,x){for(var f=k().cloneDeep(s),i=f,I=0;I<u.length-(x?0:1);I++){var v=Object.keys(i)[u[I]];i[v]||(i[v]={}),i=i[v]}var F=ke("string");x?i.properties["field_".concat(S)]=F:i["field_".concat(S)]=F,K(S+1),y(f)}return(0,d.useImperativeHandle)(a,function(){return{changeSchema:B}}),(0,e.jsx)("div",{style:{paddingTop:"10px 10px 0 10px"},children:(0,e.jsx)(Et,{schema:s,changeSchema:B,renameProperty:w,removeProperty:q,addProperty:c,updateRequiredProperty:ne,handleAdvancedSettingClick:t.handleAdvancedSettingClick})})}),At=Zt},71860:function(Pe,W,r){"use strict";r.r(W),r.d(W,{texts:function(){return h}});var le=r(57396);const h=[{value:"1.x.x \u7248\u672C\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:" UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528 ",paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-arco
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u5728\u7EBF\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03\u3002",paraId:6,tocIndex:3},{value:"\u7C7B\u578B\uFF1A",paraId:7,tocIndex:3},{value:"(schema: JSONSchema7) => void",paraId:7,tocIndex:3},{value:"\u9ED8\u8BA4\u503C\uFF1A ",paraId:8,tocIndex:3},{value:"-",paraId:8,tocIndex:3},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E\u3002",paraId:9,tocIndex:4},{value:"\u7C7B\u578B\uFF1A",paraId:10,tocIndex:4},{value:"JSONSchema7 | string | undefined",paraId:10,tocIndex:4},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:11,tocIndex:4},{value:`{
  "type": "object",
  "properties": {
    "field": {
      "type": "string"
    }
  }
}
`,paraId:12,tocIndex:4},{value:"\u70B9\u51FB",paraId:13,tocIndex:5},{value:"\u9AD8\u7EA7\u8BBE\u7F6E",paraId:13,tocIndex:5},{value:"\u6309\u94AE\u7684\u56DE\u8C03\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"false",paraId:13,tocIndex:5},{value:"\uFF1A\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"true",paraId:13,tocIndex:5},{value:"\uFF1A\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\u3002",paraId:13,tocIndex:5},{value:"\u7C7B\u578B\uFF1A",paraId:14,tocIndex:5},{value:"(namePath: number[], schema: JSONSchema7, propertyName?: string) => boolean",paraId:14,tocIndex:5},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:15,tocIndex:5},{value:"-",paraId:15,tocIndex:5},{value:"\u8BF4\u660E\uFF1A\u53EF\u4EE5\u7ED3\u5408",paraId:16,tocIndex:5},{value:"\u7EC4\u4EF6\u5F15\u7528",paraId:16,tocIndex:5},{value:"\u5B9E\u73B0\u70B9\u51FB\u9AD8\u7EA7\u8BBE\u7F6E\u6309\u94AE\u540E\u83B7\u53D6\u8DEF\u5F84\u4E0B\u7684 JsonSchema\uFF0C\u6DFB\u52A0\u3001\u4FEE\u6539\u81EA\u5B9A\u4E49\u5B57\u6BB5\u7B49\uFF0C\u7136\u540E\u4FEE\u6539\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema\u3002",paraId:16,tocIndex:5},{value:`export interface JsonSchemaEditorHandle {
  /* \u66F4\u65B0\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema */
  changeSchema: (namePath: number[], value: any, propertyName?: string) => void;
}
`,paraId:17,tocIndex:6}]},49832:function(){}}]);
