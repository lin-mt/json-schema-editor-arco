(self.webpackChunk_quiet_front_end_json_schema_editor_arco=self.webpackChunk_quiet_front_end_json_schema_editor_arco||[]).push([[593],{77102:function(Te,re,n){"use strict";n.r(re),n.d(re,{demos:function(){return q}});var Ie=n(15009),x=n.n(Ie),Fe=n(99289),ie=n.n(Fe),z=n(67294),Ge=n(57396),Ae=n(81931),q={"jsonschemaeditor-demo-0":{component:z.memo(z.lazy(ie()(x()().mark(function d(){var fe,he;return x()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,Promise.resolve().then(n.bind(n,81931));case 2:return fe=H.sent,he=fe.JsonSchemaEditor,H.abrupt("return",{default:function(){return z.createElement(he,null)}});case 5:case"end":return H.stop()}},d)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-arco';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-arco":{type:"NPM",value:"1.0.5"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-arco":Ae},renderOpts:{compile:function(){var d=ie()(x()().mark(function he(){var V,H=arguments;return x()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,n.e(335).then(n.bind(n,37335));case 2:return ne.abrupt("return",(V=ne.sent).default.apply(V,H));case 3:case"end":return ne.stop()}},he)}));function fe(){return d.apply(this,arguments)}return fe}()}}}},81931:function(Te,re,n){"use strict";n.r(re),n.d(re,{JsonSchemaEditor:function(){return Ot},registerLocale:function(){return nt}});var Ie=n(5574),x=n.n(Ie),Fe=n(52677),ie=n.n(Fe),z=n(80507),Ge=n(81917),Ae=n(96486),q=n.n(Ae),d=n(67294),fe={type:"object",properties:{field:{type:"string"}}},he=n(15009),V=n.n(he),H=n(99289),ve=n.n(H),ne=n(97857),B=n.n(ne),xe=n(74668),Se=n(53794),le=n(56187),pe=n(87108),ye=n(15695),Qe=n(54224),Xe=n(72404),De=n(59330),Ye=n(99042),qe=n(67945),_e=n(94677),Ve=n(84566),et=n(14539),We=n(61873),tt=n(40360),rt={"en-US":{PropertyPlaceholder:"Please input the property name",PropertyNameEmptyWarnMsg:"Property name cannot be empty",TitlePlaceholder:"Please input the title",IsRequired:"Required",DescriptionPlaceholder:"Please input the description",AdvancedSettings:"Advanced Settings",SiblingNodes:"Sibling Nodes",ChildNodes:"Child Nodes",AddNode:"Add Node",ImportJson:"Import JSON",DeleteNode:"Delete Node",Import:"Import",ImportEmptyJsonWarnMsg:"Please input the JSON data to import",ImportNotJsonWarnMsg:"The imported content is not in JSON format",ImportErrorContentWarnMsg:"The imported content is incorrect, please check and try again",BasicSettings:"Basic Settings",DefaultValue:"Default Value",DefaultValuePlaceholder:"Please input the default value",SelectDefaultValuePlaceholder:"Please select the default value",MinimumLength:"Minimum Length",MinimumLengthPlaceholder:"Please input the minimum length",MaximumLength:"Maximum Length",MaximumLengthPlaceholder:"Please input the maximum length",Minimum:"Minimum Value",MinimumPlaceholder:"Please input the minimum value",Maximum:"Maximum Value",MaximumPlaceholder:"Please input the maximum value",ExclusiveMinimum:"Exclusive Minimum",ExclusiveMinimumPlaceholder:"Please input the exclusive minimum value",ExclusiveMaximum:"Exclusive Maximum",ExclusiveMaximumPlaceholder:"Please input the exclusive maximum value",RegularMatch:"Regular Expression",RegularMatchPlaceholder:"Please input a regular expression",Format:"Format",FormatPlaceholder:"Please select a string format",UniqueItems:"Unique Items",MinItems:"Minimum Number of Items",MinItemsPlaceholder:"Please input the minimum number of items",MaxItems:"Maximum Number of Items",MaxItemsPlaceholder:"Please input the maximum number of items",Enums:"Enumerations",EnumsPlaceholder:"Please input enumeration values",AddEnums:"Add Enumeration"},"zh-CN":{PropertyPlaceholder:"\u8BF7\u8F93\u5165\u5C5E\u6027\u540D\u79F0",PropertyNameEmptyWarnMsg:"\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",IsRequired:"\u662F\u5426\u5FC5\u586B",TitlePlaceholder:"\u8BF7\u8F93\u5165\u6807\u9898",DescriptionPlaceholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\u4FE1\u606F",AdvancedSettings:"\u9AD8\u7EA7\u8BBE\u7F6E",SiblingNodes:"\u540C\u7EA7\u8282\u70B9",ChildNodes:"\u5B50\u7EA7\u8282\u70B9",AddNode:"\u6DFB\u52A0\u8282\u70B9",ImportJson:"\u5BFC\u5165Json",DeleteNode:"\u5220\u9664\u8282\u70B9",Import:"\u5BFC\u5165",ImportEmptyJsonWarnMsg:"\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E",ImportNotJsonWarnMsg:"\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E",ImportErrorContentWarnMsg:"\u5BFC\u5165\u7684\u5185\u5BB9\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u540E\u91CD\u65B0\u5BFC\u5165",BasicSettings:"\u57FA\u672C\u8BBE\u7F6E",DefaultValue:"\u9ED8\u8BA4\u503C",DefaultValuePlaceholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C",SelectDefaultValuePlaceholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",MinimumLength:"\u6700\u5C0F\u957F\u5EA6",MinimumLengthPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6",MaximumLength:"\u6700\u5927\u957F\u5EA6",MaximumLengthPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6",Minimum:"\u6700\u5C0F\u503C",MinimumPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C",Maximum:"\u6700\u5927\u503C",MaximumPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C",ExclusiveMinimum:"\u6392\u4ED6\u6700\u5C0F\u503C",ExclusiveMinimumPlaceholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C",ExclusiveMaximum:"\u6392\u4ED6\u6700\u5927\u503C",ExclusiveMaximumPlaceholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C",RegularMatch:"\u6B63\u5219\u5339\u914D",RegularMatchPlaceholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F",Format:"\u683C\u5F0F",FormatPlaceholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",UniqueItems:"\u5143\u7D20\u552F\u4E00",MinItems:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570",MinItemsPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570",MaxItems:"\u6700\u591A\u5143\u7D20\u4E2A\u6570",MaxItemsPlaceholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570",Enums:"\u679A\u4E3E",EnumsPlaceholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C",AddEnums:"\u6DFB\u52A0\u679A\u4E3E"}},Ne={},nt=function(r,l){Ne[r]=B()(B()({},Ne[r]||{}),l)},Je=function(){var r,l=(0,d.useContext)(tt.ZP.ConfigContext),m=(l==null||(r=l.locale)===null||r===void 0?void 0:r.locale)||"en-US",g=B()(B()({},rt[m]),Ne[m]),o=function(a){return g[a]||a};return{locale:m,t:o}},$e=n(31826),at=n(74122),ot=n(63764),it={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=n(85893),lt=function(r){var l=r.width,m=r.lineNumbers,g=m===void 0?"on":m,o=r.height,y=r.value,a=r.folding,C=a===void 0?!0:a,M=r.language,N=r.readOnly,k=N===void 0?!1:N,b=r.renderLineHighlight,E=b===void 0?"all":b,U=r.onChange;function f(K){K.editor.defineTheme("x-code-default",it)}return(0,e.jsx)("div",{style:{border:"1px solid rgb(var(--color-border))",width:l||"100%"},children:(0,e.jsx)(ot.ZP,{height:o,width:l,value:y,language:M,onChange:U,onMount:r.handleEditorDidMount,beforeMount:f,theme:"x-code-default",options:{readOnly:k,lineNumbers:g,renderLineHighlight:E,folding:C,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{},minimap:{enabled:!1}}})})},Ue=lt,st=n(64599),ut=n.n(st),dt=n(65009),ct=n.n(dt);function mt(t,r){if(r.length===0)return t;for(var l=t,m=0;m<r.length;m++){var g=Object.keys(l)[r[m]];if(g===void 0)return;l=l[g]}return l}function se(t,r){if(t.$ref){var l=t.$ref;if(l.startsWith("#/")){var m=l.slice(2).split("/"),g=q().cloneDeep(r),o=ut()(m),y;try{for(o.s();!(y=o.n()).done;){var a=y.value;if(g[a])g=g[a];else throw new Error("Unable to resolve $ref: ".concat(l))}}catch(M){o.e(M)}finally{o.f()}return g}else throw new Error("Unsupported $ref format: ".concat(l))}if(t.properties)for(var C in t.properties)t.properties[C]&&(t.properties[C]=se(t.properties[C],r));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(M){return se(M,r)}):t.items=se(t.items,r)),t.oneOf&&(t.oneOf=t.oneOf.map(function(M){return se(M,r)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(M){return se(M,r)})),t.allOf&&(t.allOf=t.allOf.map(function(M){return se(M,r)})),t}function ue(t){var r;if(t.$ref){var l=t.$ref;if(l.startsWith("#/")){var m=l.slice(2).split("/");return m[0]}if(t.properties){for(var g in t.properties)if(t.properties[g]&&(r=ue(t.properties[g]),r))return r}}if(t.items){if(Array.isArray(t.items))for(var o=0;o<t.items.length;o++){var y=t.items[o];if(r=ue(y),r)return r}else if(r=ue(t.items),r)return r}if(t.oneOf)for(var a=0;a<t.oneOf.length;a++){var C=t.oneOf[a];if(r=ue(C),r)return r}if(t.anyOf)for(var M=0;M<t.anyOf.length;M++){var N=t.anyOf[M];if(r=ue(N),r)return r}if(t.allOf)for(var k=0;k<t.allOf.length;k++){var b=t.allOf[k];if(r=ue(b),r)return r}}function ft(t){return Re.apply(this,arguments)}function Re(){return Re=ve()(V()().mark(function t(r){var l,m;return V()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ct().dereference(r,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(l=o.sent,m=ue(l),!m){o.next=6;break}return o.abrupt("return",se(l,l));case 6:return o.abrupt("return",l);case 7:case"end":return o.stop()}},t)})),Re.apply(this,arguments)}function ht(t){if(typeof t=="string"){var r=t.trim();if(r.startsWith("{")&&r.endsWith("}"))try{return JSON.parse(r)}catch(l){return}}}var Ke=["string","number","array","object","boolean","integer"];function je(t,r){if(t===null||ie()(t)!=="object")return console.error("The provided value is not an object."),-1;var l=Object.keys(t);return l.indexOf(r)}var vt=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],pt=Ke.map(function(t){return{value:t}});function we(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var gt=function(r){var l=function(o){return Array.isArray(o)?"array":o===null?"null":ie()(o)},m=function g(o){var y=l(o);switch(y){case"object":{var a={};for(var C in o)o.hasOwnProperty(C)&&(a[C]=g(o[C]));return{type:"object",properties:a,required:Object.keys(o)}}case"array":return{type:"array",items:o.length?g(o[0]):{}};default:return{type:y}}};return m(r)},xt=n(1581),yt=n.n(xt),jt=n(79443),ze=xe.Z.Row,It=function(r){var l=r.open,m=r.onOk,g=r.onCancel,o=Je(),y=o.t,a=(0,d.useState)(!1),C=x()(a,2),M=C[0],N=C[1],k=(0,d.useState)("json"),b=x()(k,2),E=b[0],U=b[1],f=(0,d.useState)(),K=x()(f,2),u=K[0],p=K[1],i=(0,d.useRef)(null);function h(c){i.current=c}(0,d.useEffect)(function(){N(l)},[l]);function P(){var c;N(!1),p(void 0),(c=i.current)===null||c===void 0||c.setValue(""),g&&g()}return(0,e.jsxs)($e.Z,{title:y("Import"),style:{width:900},visible:M,onOk:ve()(V()().mark(function c(){var I,A,L,T,Q,J;return V()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!u||u.length===0)){S.next=3;break}return z.Z.warning(y("ImportEmptyJsonWarnMsg")),S.abrupt("return");case 3:if(I=ht(u),I){S.next=7;break}return z.Z.error(y("ImportNotJsonWarnMsg")),S.abrupt("return");case 7:S.t0=E,S.next=S.t0==="json"?10:S.t0==="json-schema"?12:16;break;case 10:return A=new jt.NL().createSchemaOf(I),S.abrupt("break",16);case 12:return S.next=14,ft(I);case 14:return A=S.sent,S.abrupt("break",16);case 16:if(A){S.next=21;break}return z.Z.warning(y("ImportErrorContentWarnMsg")),S.abrupt("return");case 21:if(L=new(yt())({allErrors:!0}),T=L.getSchema("http://json-schema.org/draft-07/schema#"),!(T&&!T(A))){S.next=27;break}return J=(Q=T.errors)===null||Q===void 0?void 0:Q.map(function($,ee){var w=$.instancePath.split("/").pop()||"root",te="".concat(w," ").concat($.message);return(0,e.jsx)("div",{children:'Error in field "'.concat(w,'": ').concat(te)},ee)}),((J==null?void 0:J.length)||0)>0&&z.Z.error({content:(0,e.jsx)("div",{children:J})}),S.abrupt("return");case 27:m&&m(A),P();case 29:case"end":return S.stop()}},c)})),onCancel:P,children:[(0,e.jsx)(ze,{style:{marginBottom:16},children:(0,e.jsx)(at.Z.Group,{value:E,type:"button",onChange:function(I){return U(I)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(ze,{children:(0,e.jsx)(Ue,{height:500,language:"json",handleEditorDidMount:h,onChange:function(I){return p(I)}})})]})},St=It,F=n(1911),G=n(97101),Mt=n(48331),W=xe.Z.Row,j=xe.Z.Col,Pt=function(t){var r=t.schema,l=t.visible,m=l===void 0?!1:l,g=t.onOk,o=t.onCancel,y=Je(),a=y.t,C=F.Z.useForm(),M=x()(C,1),N=M[0],k=(0,d.useState)(),b=x()(k,2),E=b[0],U=b[1],f=(0,d.useState)(!1),K=x()(f,2),u=K[0],p=K[1],i=(0,d.useState)(!1),h=x()(i,2),P=h[0],c=h[1],I=(0,d.useState)(!1),A=x()(I,2),L=A[0],T=A[1],Q=(0,d.useState)(!1),J=x()(Q,2),X=J[0],S=J[1],$=(0,d.useState)(!1),ee=x()($,2),w=ee[0],te=ee[1],R=(0,d.useState)(!1),Me=x()(R,2),de=Me[0],Pe=Me[1],ge=(0,d.useState)(!1),Ee=x()(ge,2),ae=Ee[0],Ce=Ee[1],ce=(0,d.useRef)(null),oe=(0,d.useRef)(!1);(0,d.useEffect)(function(){U(r)},[r]),(0,d.useEffect)(function(){p(m)},[m]);var be=(0,d.useRef)(q().debounce(function(Z){try{var s=JSON.parse(Z);U(s)}catch(D){console.error("JSON\u89E3\u6790\u5931\u8D25",D)}},300));(0,d.useEffect)(function(){return function(){be.current.cancel()}},[]),(0,d.useEffect)(function(){E&&(N.setFieldsValue(E),c(E.type==="object"),T(E.type==="array"),S(E.type==="number"),te(E.type==="boolean"),Pe(E.type==="integer"),Ce(E.type==="string"))},[E]);function Oe(Z){ce.current=Z,ce.current.setValue(JSON.stringify(r,null,2))}function ke(){o==null||o(),p(!1)}return(0,e.jsx)($e.Z,{title:a("AdvancedSettings"),style:{width:900},visible:u,onOk:ve()(V()().mark(function Z(){return V()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,N.validate();case 3:g==null||g(B()(B()({},E),N.getFieldsValue())),D.next=9;break;case 6:D.prev=6,D.t0=D.catch(0),console.error("\u5B57\u6BB5\u6821\u9A8C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5B57\u6BB5\uFF01");case 9:case"end":return D.stop()}},Z,null,[[0,6]])})),onCancel:ke,children:(0,e.jsxs)(F.Z,{form:N,onValuesChange:function(s,D){if(ce.current){oe.current=!0;var me=B()(B()({},E),D),v=JSON.stringify(me,null,2),O=ce.current.getValue();O!==v&&ce.current.setValue(v),setTimeout(function(){oe.current=!1},0)}},children:[!P&&Ke.indexOf(E==null?void 0:E.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:a("BasicSettings")}),(ae||X||de||w)&&(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("DefaultValue"),"\uFF1A"]}),(0,e.jsxs)(j,{span:8,children:[ae&&(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(pe.Z,{style:{width:"100%"},placeholder:a("DefaultValuePlaceholder")})}),(X||de)&&(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:a("DefaultValuePlaceholder")})}),w&&(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"default",children:(0,e.jsx)(Se.Z,{style:{width:"100%"},placeholder:a("SelectDefaultValuePlaceholder"),options:[{value:"true",label:"true"},{value:"false",label:"false"}]})})]})]}),ae&&(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("MinimumLength"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"minLength",children:(0,e.jsx)(G.Z,{min:0,style:{width:"100%"},parser:function(s){return s?parseInt(s.replace(/\D/g,""),10):""},formatter:function(s){return s?"".concat(Math.floor(Math.max(Number(s),0))):""},placeholder:a("MinimumLengthPlaceholder")})})}),(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("MaximumLength"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"maxLength",children:(0,e.jsx)(G.Z,{min:0,style:{width:"100%"},parser:function(s){return s?parseInt(s.replace(/\D/g,""),10):""},formatter:function(s){return s?"".concat(Math.floor(Math.max(Number(s),0))):""},placeholder:a("MaximumLengthPlaceholder")})})})]}),(X||de)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("Minimum"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"minimum",children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:a("MinimumPlaceholder")})})}),(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("Maximum"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"maximum",children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:a("MaximumPlaceholder")})})})]}),(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("ExclusiveMinimum"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"exclusiveMinimum",children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:a("ExclusiveMinimumPlaceholder")})})}),(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("ExclusiveMaximum"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"exclusiveMaximum",children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:a("ExclusiveMaximumPlaceholder")})})})]})]}),ae&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("RegularMatch"),"\uFF1A"]}),(0,e.jsx)(j,{span:20,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"pattern",children:(0,e.jsx)(pe.Z,{placeholder:a("RegularMatchPlaceholder")})})})]}),(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("Format"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"format",children:(0,e.jsx)(Se.Z,{allowClear:!0,options:vt.map(function(Z){return Z.value}),placeholder:a("FormatPlaceholder"),style:{width:"100%"}})})})]})]}),L&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("UniqueItems"),"\uFF1A"]}),(0,e.jsx)(j,{span:20,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"uniqueItems",triggerPropName:"checked",children:(0,e.jsx)(Mt.Z,{})})})]}),(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("MinItems"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"minItems",children:(0,e.jsx)(G.Z,{style:{width:"100%"},parser:function(s){return s?parseInt(s.replace(/\D/g,""),10):""},formatter:function(s){return s?"".concat(Math.floor(Math.max(Number(s),0))):""},placeholder:a("MinItemsPlaceholder")})})}),(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("MaxItems"),"\uFF1A"]}),(0,e.jsx)(j,{span:8,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,field:"maxItems",children:(0,e.jsx)(G.Z,{style:{width:"100%"},parser:function(s){return s?parseInt(s.replace(/\D/g,""),10):""},formatter:function(s){return s?"".concat(Math.floor(Math.max(Number(s),0))):""},placeholder:a("MaxItemsPlaceholder")})})})]})]}),(ae||X||de)&&(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:13},children:[(0,e.jsxs)(j,{span:4,style:{textAlign:"right"},children:[a("Enums"),"\uFF1A"]}),(0,e.jsx)(j,{span:20,children:(0,e.jsx)(F.Z.List,{field:"enums",children:function(s,D){var me=D.add,v=D.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W,{gutter:10,children:s.map(function(O,Ze){var He=O.key,Y=O.field;return(0,e.jsx)(j,{span:12,children:(0,e.jsxs)(W,{justify:"start",align:"center",style:{marginBottom:6},children:[(0,e.jsxs)(j,{flex:"auto",children:[ae&&(0,e.jsx)(F.Z.Item,{noStyle:!0,field:Y,rules:[{required:!0}],children:(0,e.jsx)(pe.Z,{placeholder:a("EnumsPlaceholder")})}),(X||de)&&(0,e.jsx)(F.Z.Item,{noStyle:!0,field:Y,rules:[{required:!0}],children:(0,e.jsx)(G.Z,{style:{width:"100%"},placeholder:a("EnumsPlaceholder")})})]}),(0,e.jsx)(j,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(le.Z,{icon:(0,e.jsx)(We.Z,{}),shape:"circle",status:"danger",onClick:function(){return v(Ze)}})})]})},He)})}),(0,e.jsx)(W,{children:(0,e.jsx)(j,{span:12,children:(0,e.jsx)(F.Z.Item,{noStyle:!0,children:(0,e.jsx)(le.Z,{onClick:function(){return me()},icon:(0,e.jsx)(Ve.Z,{}),children:a("AddEnums")})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid rgb(var(--primary-6))",fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(Ue,{height:300,language:"json",value:JSON.stringify(E,null,2),handleEditorDidMount:Oe,onChange:function(s){oe.current||!s||be.current(s)}})]})})},Le=xe.Z.Row,_=xe.Z.Col,Et=Se.Z.Option;function Be(t){var r=t.changeSchema,l=t.renameProperty,m=t.isArrayItems,g=t.updateRequiredProperty,o=t.removeProperty,y=t.addProperty,a=t.isRequire,C=t.handleAdvancedSettingClick,M=t.defaultExpand,N=M===void 0?!0:M,k=Je(),b=k.t,E=(0,d.useState)(t.schema),U=x()(E,2),f=U[0],K=U[1],u=(0,d.useState)(t.propertyName),p=x()(u,2),i=p[0],h=p[1],P=(0,d.useState)(f.title),c=x()(P,2),I=c[0],A=c[1],L=(0,d.useState)(f.description),T=x()(L,2),Q=T[0],J=T[1],X=(0,d.useState)(t.nodeDepth?t.nodeDepth:0),S=x()(X,2),$=S[0],ee=S[1],w=(0,d.useState)(t.namePath?t.namePath:[]),te=x()(w,2),R=te[0],Me=te[1],de=(0,d.useState)(N),Pe=x()(de,2),ge=Pe[0],Ee=Pe[1],ae=(0,d.useState)(!1),Ce=x()(ae,2),ce=Ce[0],oe=Ce[1],be=(0,d.useState)(!1),Oe=x()(be,2),ke=Oe[0],Z=Oe[1],s=typeof i=="undefined";(0,d.useEffect)(function(){K(t.schema)},[t.schema]),(0,d.useEffect)(function(){Me(t.namePath?t.namePath:[])},[t.namePath]),(0,d.useEffect)(function(){ee(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var D=f.items,me=!!(f.type==="object"||m&&(D==null?void 0:D.type)==="object")&&!m&&!s;return f.type?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Le,{align:"center",style:{paddingBottom:10},children:[(0,e.jsx)(_,{flex:"".concat(24+$*15,"px"),style:{marginLeft:$*5},children:(0,e.jsx)(Le,{justify:"end",children:f.type==="object"&&(0,e.jsx)(le.Z,{type:"text",size:"mini",style:{color:"rgb(var(--color-text-2))"},icon:ge?(0,e.jsx)(Ye.Z,{}):(0,e.jsx)(qe.Z,{}),onClick:function(){return Ee(!ge)}})})}),(0,e.jsx)(_,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(pe.Z,{status:!s&&i.length===0?"error":void 0,disabled:s||m,value:s?"root":i,placeholder:b("PropertyPlaceholder"),onBlur:function(){if((i==null?void 0:i.length)===0){z.Z.error(b("PropertyNameEmptyWarnMsg"));return}l&&i&&(i==null?void 0:i.length)!==0&&l(R,i)},onChange:function(O){return h(O)}})}),(0,e.jsx)(_,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(ye.Z,{content:b("IsRequired"),children:(0,e.jsx)(Qe.Z,{disabled:m||s,checked:a,style:{padding:0},onChange:function(O){g&&i&&g(R,!O)}})})}),(0,e.jsx)(_,{flex:"98px",style:{marginLeft:5},children:(0,e.jsx)(Se.Z,{style:{width:"98px"},value:f.type,onChange:function(O){r&&r(R,we(O),"type")},children:pt.map(function(v){return(0,e.jsx)(Et,{value:v.value,children:v.value},v.value)})})}),(0,e.jsx)(_,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(pe.Z,{placeholder:b("TitlePlaceholder"),value:I,onBlur:function(){r&&r(R.concat(je(f,"title")),I,"title")},onChange:function(O){return A(O)}})}),(0,e.jsx)(_,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(pe.Z,{placeholder:b("DescriptionPlaceholder"),value:Q,onBlur:function(){r&&r(R.concat(je(f,"description")),Q,"description")},onChange:function(O){return J(O)}})}),(0,e.jsx)(_,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(Le,{style:{width:"72px"},children:[(0,e.jsx)(ye.Z,{content:b("AdvancedSettings"),children:(0,e.jsx)(le.Z,{type:"text",size:"mini",icon:(0,e.jsx)(_e.Z,{}),style:{color:"rgb(var(--green-6))"},onClick:function(){C&&!C(R,f,s||f.type==="object"?void 0:i)||oe(!0)}})}),!s&&!m||f.type==="object"?(0,e.jsx)(Xe.Z,{position:"bottom",droplist:me&&(0,e.jsxs)(De.Z,{children:[(0,e.jsx)(De.Z.Item,{onClick:function(){y&&y(R,!1)},children:b("SiblingNodes")},"addNode"),(0,e.jsx)(De.Z.Item,{onClick:function(){y&&y(R,!0)},children:b("ChildNodes")},"addChildNode")]}),children:(0,e.jsx)(ye.Z,{content:me?void 0:b("AddNode"),children:(0,e.jsx)(le.Z,{type:"text",size:"mini",icon:(0,e.jsx)(Ve.Z,{}),style:{color:"rgb(var(--primary-6))"},onClick:function(){me||y&&y(R,!(!m&&!s))}})})}):(0,e.jsx)("div",{}),(0,e.jsx)(_,{flex:"24px",children:s?(0,e.jsx)(ye.Z,{content:b("ImportJson"),children:(0,e.jsx)(le.Z,{type:"text",size:"mini",icon:(0,e.jsx)(et.Z,{}),style:{color:"rgb(var(--purple-6))"},onClick:function(){return Z(!0)}})}):m?(0,e.jsx)("div",{}):(0,e.jsx)(ye.Z,{content:b("DeleteNode"),children:(0,e.jsx)(le.Z,{status:"danger",type:"text",size:"mini",icon:(0,e.jsx)(We.Z,{}),onClick:function(){o&&o(R)}})})}),s&&f.type!=="object"&&(0,e.jsx)(_,{flex:"24px",children:!m&&(0,e.jsx)("div",{})})]})})]}),f.type==="object"&&ge&&f.properties&&Object.keys(f.properties).map(function(v){if(f.properties){var O;return(0,e.jsx)("div",{children:(0,e.jsx)(Be,B()(B()({},t),{},{isRequire:(O=f.required)===null||O===void 0?void 0:O.includes(v),isArrayItems:!1,defaultExpand:N,nodeDepth:$+1,namePath:R.concat(je(f,"properties"),je(f.properties,v)),propertyName:v,schema:f.properties[v],handleAdvancedSettingClick:C}))},String(v))}return(0,e.jsx)(e.Fragment,{})}),f.type==="array"&&ge&&(0,e.jsx)(Be,B()(B()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:$+1,defaultExpand:N,propertyName:"items",namePath:R.concat(je(f,"items")),schema:f.items,handleAdvancedSettingClick:C})),(0,e.jsx)(Pt,{schema:f,visible:ce,onOk:function(){var v=ve()(V()().mark(function O(Ze){return V()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(r){Y.next=2;break}return Y.abrupt("return");case 2:if(!(s||f.type==="object")){Y.next=6;break}return r(R,B()({},Ze)),oe(!1),Y.abrupt("return");case 6:r(R,B()({},Ze),i),oe(!1);case 8:case"end":return Y.stop()}},O)}));return function(O){return v.apply(this,arguments)}}(),onCancel:function(){return oe(!1)}}),(0,e.jsx)(St,{open:ke,onOk:function(O){r&&(r([],O),Z(!1))},onCancel:function(){return Z(!1)}})]}):(0,e.jsx)(e.Fragment,{})}var Ct=Be,bt=(0,d.forwardRef)(function(t,r){function l(u){var p=fe;if(!u)return p;switch(ie()(u)){case"string":try{return gt(JSON.parse(u))}catch(i){return z.Z.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),p}case"object":return u}}var m=(0,d.useState)(l(t.data)),g=x()(m,2),o=g[0],y=g[1],a=(0,d.useState)(0),C=x()(a,2),M=C[0],N=C[1];(0,d.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(o)},[o]);var k=function(p,i,h){if(p.length===0){y(i);return}for(var P=q().cloneDeep(o),c=P,I=0;I<p.length-1;I++){var A=Object.keys(c)[p[I]];c[A]||(c[A]={}),c=c[A]}var L=p[p.length-1],T=Object.keys(c)[L];if(L===-1){if(typeof i=="undefined"||!h)return;c[h]=i}else{if(c[T]===i)return;c[T]=i}y(P)};function b(u,p){for(var i=q().cloneDeep(o),h=i,P=null,c="",I=0;I<u.length-1;I++){var A=Object.keys(h),L=void 0;if(typeof u[I]=="number"?L=u[I]:L=A.indexOf(String(u[I])),L<0||L>=A.length){console.error("Path not found: ".concat(u.slice(0,I+1).join(".")));return}P=h,c=A[L],h=h[c]}var T=u[u.length-1],Q=Object.keys(h),J=Q[T];if(J!==p){if(h.hasOwnProperty(J))P[c]=Object.fromEntries(Object.entries(h).map(function(X){var S=x()(X,2),$=S[0],ee=S[1];if($===J){var w=P.required;if(w){var te=w.indexOf(J);te>=0&&w.splice(te,1,p)}return[p,ee]}return[$,ee]}));else{console.error("Key not found: ".concat(J));return}y(i)}}function E(u,p,i){u.required||(u.required=[]);var h=u.required.indexOf(p);i?h!==-1&&u.required.splice(h,1):h===-1&&u.required.push(p),u.required.length===0&&delete u.required}function U(u,p){if(u.length<2){console.error("\u8DEF\u5F84\u957F\u5EA6\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u66F4\u65B0\u5FC5\u9009\u5C5E\u6027");return}var i=q().cloneDeep(o),h=u.slice(0,-2),P=u[u.length-1],c=mt(i,h);if(!c||!c.properties){console.error("\u65E0\u6CD5\u627E\u5230\u5FC5\u9009\u5C5E\u6027\u7684\u7236\u5BF9\u8C61",c);return}var I=Object.keys(c.properties);if(P<0||P>=I.length){console.error("\u5C5E\u6027\u7D22\u5F15\u8D85\u51FA\u8303\u56F4",P);return}var A=I[P];E(c,A,p),y(i)}function f(u){for(var p=q().cloneDeep(o),i=p,h=p,P=0;P<u.length-1;P++)if(i!=null)h=i,i=i[Object.keys(i)[u[P]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",u);return}var c=Object.keys(i)[u[u.length-1]];E(h,c,!0),i&&ie()(i)==="object"&&i.hasOwnProperty(c)&&delete i[c],y(p)}function K(u,p){for(var i=q().cloneDeep(o),h=i,P=0;P<u.length-(p?0:1);P++){var c=Object.keys(h)[u[P]];h[c]||(h[c]={}),h=h[c]}var I=we("string");p?h.properties["field_".concat(M)]=I:h["field_".concat(M)]=I,N(M+1),y(i)}return(0,d.useImperativeHandle)(r,function(){return{changeSchema:k}}),(0,e.jsx)("div",{style:{paddingTop:"10px 10px 0 10px"},children:(0,e.jsx)(Ct,{schema:o,defaultExpand:t.defaultExpand,changeSchema:k,renameProperty:b,removeProperty:f,addProperty:K,updateRequiredProperty:U,handleAdvancedSettingClick:t.handleAdvancedSettingClick})})}),Ot=bt},71860:function(Te,re,n){"use strict";n.r(re),n.d(re,{texts:function(){return x}});var Ie=n(57396);const x=[{value:"1.x.x \u7248\u672C\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:" UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528 ",paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-arco
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u5728\u7EBF\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03\u3002",paraId:6,tocIndex:3},{value:"\u7C7B\u578B\uFF1A",paraId:7,tocIndex:3},{value:"(schema: JSONSchema7) => void",paraId:7,tocIndex:3},{value:"\u9ED8\u8BA4\u503C\uFF1A ",paraId:8,tocIndex:3},{value:"-",paraId:8,tocIndex:3},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E\u3002",paraId:9,tocIndex:4},{value:"\u7C7B\u578B\uFF1A",paraId:10,tocIndex:4},{value:"JSONSchema7 | string | undefined",paraId:10,tocIndex:4},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:11,tocIndex:4},{value:`{
  "type": "object",
  "properties": {
    "field": {
      "type": "string"
    }
  }
}
`,paraId:12,tocIndex:4},{value:"\u9ED8\u8BA4\u662F\u5426\u5C55\u5F00\u8282\u70B9\u3002",paraId:13,tocIndex:5},{value:"\u7C7B\u578B\uFF1A",paraId:14,tocIndex:5},{value:"boolean",paraId:14,tocIndex:5},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:15,tocIndex:5},{value:"true",paraId:15,tocIndex:5},{value:"\u70B9\u51FB",paraId:16,tocIndex:6},{value:"\u9AD8\u7EA7\u8BBE\u7F6E",paraId:16,tocIndex:6},{value:"\u6309\u94AE\u7684\u56DE\u8C03\uFF0C\u8FD4\u56DE",paraId:16,tocIndex:6},{value:"false",paraId:16,tocIndex:6},{value:"\uFF1A\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\uFF0C\u8FD4\u56DE",paraId:16,tocIndex:6},{value:"true",paraId:16,tocIndex:6},{value:"\uFF1A\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\u3002",paraId:16,tocIndex:6},{value:"\u7C7B\u578B\uFF1A",paraId:17,tocIndex:6},{value:"(namePath: number[], schema: JSONSchema7, propertyName?: string) => boolean",paraId:17,tocIndex:6},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:18,tocIndex:6},{value:"-",paraId:18,tocIndex:6},{value:"\u8BF4\u660E\uFF1A\u53EF\u4EE5\u7ED3\u5408",paraId:19,tocIndex:6},{value:"\u7EC4\u4EF6\u5F15\u7528",paraId:19,tocIndex:6},{value:"\u5B9E\u73B0\u70B9\u51FB\u9AD8\u7EA7\u8BBE\u7F6E\u6309\u94AE\u540E\u83B7\u53D6\u8DEF\u5F84\u4E0B\u7684 JsonSchema\uFF0C\u6DFB\u52A0\u3001\u4FEE\u6539\u81EA\u5B9A\u4E49\u5B57\u6BB5\u7B49\uFF0C\u7136\u540E\u4FEE\u6539\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema\u3002",paraId:19,tocIndex:6},{value:`export interface JsonSchemaEditorHandle {
  /* \u66F4\u65B0\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema */
  changeSchema: (namePath: number[], value: any, propertyName?: string) => void;
}
`,paraId:20,tocIndex:7}]},49832:function(){}}]);
