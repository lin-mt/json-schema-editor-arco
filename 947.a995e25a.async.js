"use strict";(self.webpackChunk_quiet_front_end_json_schema_editor_arco=self.webpackChunk_quiet_front_end_json_schema_editor_arco||[]).push([[947],{94947:function(Na,qe,v){v.r(qe),v.d(qe,{JsonSchemaEditor:function(){return ma}});var tn=v(42122),b=v.n(tn),rn=v(27424),D=v.n(rn),ne=v(80507),Aa=v(81917),Ke=v(68949),te=v(84851),j=v(67294),sn=v(38416),V=v.n(sn),q=v(32437),Ne=v(56187),Ae=v(59472),Ze=v(33601),K=v(15695),T=v(87108),de=v(54224),$=v(94558),he=v(97769),Oe=v(99042),we=v(67945),ae=v(61803),Fe=v(94677),ye=v(84566),re=".",on=[{name:"date-time"},{name:"date"},{name:"email"},{name:"hostname"},{name:"ipv4"},{name:"ipv6"},{name:"uri"}],ln=[{name:"\u5B57\u7B26\u4E32",mock:"@string"},{name:"\u81EA\u7136\u6570",mock:"@natural"},{name:"\u6D6E\u70B9\u6570",mock:"@float"},{name:"\u5B57\u7B26",mock:"@character"},{name:"\u5E03\u5C14",mock:"@boolean"},{name:"url",mock:"@url"},{name:"\u57DF\u540D",mock:"@domain"},{name:"ip\u5730\u5740",mock:"@ip"},{name:"id",mock:"@id"},{name:"guid",mock:"@guid"},{name:"\u5F53\u524D\u65F6\u95F4",mock:"@now"},{name:"\u65F6\u95F4\u6233",mock:"@timestamp"},{name:"\u65E5\u671F",mock:"@date"},{name:"\u65F6\u95F4",mock:"@time"},{name:"\u65E5\u671F\u65F6\u95F4",mock:"@datetime"},{name:"\u56FE\u7247\u8FDE\u63A5",mock:"@image"},{name:"\u56FE\u7247data",mock:"@imageData"},{name:"\u989C\u8272",mock:"@color"},{name:"\u989C\u8272hex",mock:"@hex"},{name:"\u989C\u8272rgba",mock:"@rgba"},{name:"\u989C\u8272rgb",mock:"@rgb"},{name:"\u989C\u8272hsl",mock:"@hsl"},{name:"\u6574\u6570",mock:"@integer"},{name:"email",mock:"@email"},{name:"\u5927\u6BB5\u6587\u672C",mock:"@paragraph"},{name:"\u53E5\u5B50",mock:"@sentence"},{name:"\u5355\u8BCD",mock:"@word"},{name:"\u5927\u6BB5\u4E2D\u6587\u6587\u672C",mock:"@cparagraph"},{name:"\u4E2D\u6587\u6807\u9898",mock:"@ctitle"},{name:"\u6807\u9898",mock:"@title"},{name:"\u59D3\u540D",mock:"@name"},{name:"\u4E2D\u6587\u59D3\u540D",mock:"@cname"},{name:"\u4E2D\u6587\u59D3",mock:"@cfirst"},{name:"\u4E2D\u6587\u540D",mock:"@clast"},{name:"\u82F1\u6587\u59D3",mock:"@first"},{name:"\u82F1\u6587\u540D",mock:"@last"},{name:"\u4E2D\u6587\u53E5\u5B50",mock:"@csentence"},{name:"\u4E2D\u6587\u8BCD\u7EC4",mock:"@cword"},{name:"\u5730\u5740",mock:"@region"},{name:"\u7701\u4EFD",mock:"@province"},{name:"\u57CE\u5E02",mock:"@city"},{name:"\u5730\u533A",mock:"@county"},{name:"\u8F6C\u6362\u4E3A\u5927\u5199",mock:"@upper"},{name:"\u8F6C\u6362\u4E3A\u5C0F\u5199",mock:"@lower"},{name:"\u6311\u9009\uFF08\u679A\u4E3E\uFF09",mock:"@pick"},{name:"\u6253\u4E71\u6570\u7EC4",mock:"@shuffle"},{name:"\u534F\u8BAE",mock:"@protocol"}],Ve=["string","number","array","object","boolean","integer"],cn=v(18698),me=v.n(cn),un=v(96486),g=v.n(un);function Ce(r){switch(r){case"string":return{type:"string"};case"number":return{type:"number"};case"array":return{type:"array",items:{type:"string"}};case"object":return{type:"object",properties:{}};case"boolean":return{type:"boolean"};case"integer":return{type:"integer"};default:throw new Error("Unsupported type: ".concat(r))}}var ze=function r(a){var n=g().cloneDeep(a);return n&&!n.type&&!n.properties&&(n.type="string"),!n.type&&n.properties&&me()(n.properties)==="object"&&(n.type="object"),n.type==="object"?(n.properties||(n.properties={}),Object.keys(n.properties).forEach(function(t){!n.properties[t].type&&n.properties[t].properties&&me()(n.properties[t].properties)==="object"&&(n.properties[t].type="object"),(n.properties[t].type==="array"||n.properties[t].type==="object")&&(n.properties[t]=r(n.properties[t]))})):n.type==="array"&&(n.items||(n.items={type:"string"}),n.items=r(n.items)),n},fe=function(a){return a?a.length===1?[]:g().dropRight(a,1):[]},He=function(a,n,t){var i=fe(n),s=i.length?g().get(a,i):a,o=[].concat(s.required||[]);return o.push(t),i.push("required"),g().set(a,i,g().uniq(o))},Za=function(a,n,t){var i=fe(n),s=i.length?_.get(a,i):a,o=[].concat(s.required||[]),l=o.filter(function(m){return m!==t});return i.push("required"),_.set(a,i,_.uniq(l))},Ue=function r(a,n){var t=g().cloneDeep(a);if(t.type==="object"){var i=hn(t.properties);n?t.required=i:delete t.required,t.properties&&(t.properties=dn(t.properties,n))}else t.type==="array"&&t.items&&(t.items=r(t.items,n));return t};function dn(r,a){var n=g().cloneDeep(r);for(var t in n)(n[t].type==="array"||n[t].type==="object")&&(n[t]=Ue(n[t],a));return n}function hn(r){var a=[];return Object.keys(r).forEach(function(n){a.push(n)}),a}var mn=v(95383),e=v(85893),fn=function(a){var n,t=a.schema,i=ln.map(function(s){return{name:s.name,value:s.mock}});return(0,e.jsx)("div",{children:(0,e.jsx)(mn.Z,{className:"certain-category-search",placeholder:"mock",data:i,value:t.mock?typeof t.mock!="string"?(n=t.mock)===null||n===void 0?void 0:n.mock:t.mock:"",onChange:a.onChange,disabled:t.type==="object"||t.type==="array",triggerElement:(0,e.jsx)(T.Z,{placeholder:"mock",addAfter:(0,e.jsx)(ae.Z,{className:t.type==="object"||t.type==="array"?"input-icon-editor-disabled":"input-icon-editor",onClick:function(o){o.stopPropagation(),a.showEdit()}})})})})},Ee=fn,vn=v(19604),gn={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},xn=function(a){var n=a.width,t=a.lineNumbers,i=t===void 0?"on":t,s=a.height,o=a.value,l=a.folding,m=l===void 0?!0:l,d=a.language,h=a.readOnly,u=h===void 0?!1:h,N=a.renderLineHighlight,I=N===void 0?"all":N,k=a.onChange;function f(x){x.editor.defineTheme("x-code-default",gn)}return(0,e.jsx)(vn.ZP,{height:s,width:n,value:o,language:d,onChange:k,beforeMount:f,theme:"x-code-default",options:{readOnly:u,lineNumbers:i,renderLineHighlight:I,folding:m,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,lineDecorationsWidth:19,scrollbar:{verticalScrollbarSize:5,horizontalScrollbarSize:5},minimap:{enabled:!1}}})},ke=xn,Se=q.Z.Row,W=q.Z.Col,pn=(0,te.Pi)(function(r){var a=r.data,n=r.prefix,t=r.showAdv,i=r.showEdit,s=(0,j.useState)({}),o=D()(s,2),l=o[0],m=o[1],d=(0,j.useContext)(ee),h=(0,j.useContext)(oe);(0,j.useEffect)(function(){var F=r.prefix.filter(function(C){return C!=="properties"}).length;m({paddingLeft:"".concat(20*(F+1),"px")})},[r.prefix]);var u=function(){return[].concat(n,"items")},N=function(C){var L=u().concat("type");h.changeType({keys:L,value:C})},I=function(C){var L=u().concat("description");h.changeValue({keys:L,value:C})},k=function(C){var L=u().concat("mock"),G=C?{mock:C}:"";h.changeValue({keys:L,value:G})},f=function(C){var L=u().concat("title");h.changeValue({keys:L,value:C})},x=function(){var C=u().concat("properties");h.addChildField({keys:C}),h.setOpenValue({key:C,value:!0})},y=function(){var C=u().concat("properties");h.setOpenValue({key:C})},H=function(C,L){i(u(),C,a.items[C],L)},U=function(){t(u(),a.items)},A=a.items,E=[].concat(n,"items"),B=[].concat(E,"properties").join(re);return A?(0,e.jsxs)("div",{children:[(0,e.jsxs)(Se,{gutter:10,justify:"space-around",align:"center",children:[(0,e.jsx)(W,{flex:"auto",children:(0,e.jsxs)(Se,{gutter:10,justify:"space-around",align:"center",children:[(0,e.jsx)(W,{flex:8,children:(0,e.jsxs)(Se,{justify:"space-around",align:"center",style:l,children:[(0,e.jsx)(W,{flex:"20px",children:A.type==="object"?(0,e.jsx)("span",{className:"show-hide-children",onClick:y,children:g().get(h.open,[B])?(0,e.jsx)(Oe.Z,{}):(0,e.jsx)(we.Z,{})}):null}),(0,e.jsx)(W,{flex:"auto",children:(0,e.jsx)(T.Z,{addAfter:(0,e.jsx)(de.Z,{style:{paddingLeft:0},disabled:!0}),disabled:!0,value:"Items"})})]})}),(0,e.jsx)(W,{flex:3,children:(0,e.jsx)($.Z,{onChange:N,value:A.type,children:Ve.map(function(F,C){return(0,e.jsx)($.Z.Option,{value:F,children:F},C)})})}),d.mock&&(0,e.jsx)(W,{flex:3,children:(0,e.jsx)(Ee,{schema:A,showEdit:function(){return H("mock",A.type)},onChange:k})}),(0,e.jsx)(W,{flex:d.mock?4:5,children:(0,e.jsx)(T.Z,{addAfter:(0,e.jsx)(ae.Z,{className:"input-icon-editor",onClick:function(){return H("title")}}),placeholder:"title",value:A.title,onChange:f})}),(0,e.jsx)(W,{flex:d.mock?4:5,children:(0,e.jsx)(T.Z,{addAfter:(0,e.jsx)(ae.Z,{className:"input-icon-editor",onClick:function(){return H("description")}}),placeholder:"description",value:A.description,onChange:I})})]})}),(0,e.jsx)(W,{flex:"66px",children:(0,e.jsxs)(Se,{gutter:8,children:[(0,e.jsx)(W,{span:8,children:(0,e.jsx)("span",{className:"adv-set",onClick:U,children:(0,e.jsx)(K.Z,{position:"top",content:"adv_setting",children:(0,e.jsx)(Fe.Z,{})})})}),(0,e.jsx)(W,{span:8,children:A.type==="object"?(0,e.jsx)("span",{className:"plus",onClick:x,children:(0,e.jsx)(K.Z,{position:"top",content:"add_child_node",children:(0,e.jsx)(ye.Z,{})})}):null})]})})]}),(0,e.jsx)("div",{style:{paddingTop:8},children:De(E,A,i,t)})]}):(0,e.jsx)(e.Fragment,{})}),jn=pn,yn=v(59547),Cn=function(a){var n=(0,j.useState)(a.value),t=D()(n,2),i=t[0],s=t[1],o=(0,j.useState)(!1),l=D()(o,2),m=l[0],d=l[1],h=(0,j.useState)(),u=D()(h,2),N=u[0],I=u[1],k=(0,j.useRef)(null);(0,j.useEffect)(function(){s(a.value)},[a.value]);var f=function(y){if(y.length===0){ne.Z.warning("FieldName can not empty."),d(!0),s(function(H){return I(H),y});return}if(N===y){s(y);return}I(""),d(!1),a.onChange(y)&&s(y)};return(0,j.useEffect)(function(){var x=k.current;x!==null&&x.dom.addEventListener("blur",g().debounce(function(){var y;((y=x.dom.value)===null||y===void 0?void 0:y.length)===0&&(ne.Z.warning("FieldName can not empty."),x.dom.focus())},50))},[]),(0,e.jsx)(T.Z,{ref:k,status:m?"error":void 0,addAfter:a.addAfter,placeholder:N,value:i,onChange:f})},kn=Cn,Ie=v(72349),Sn=v(72404),bn=(0,te.Pi)(function(r){var a=r.prefix,n=r.name,t=(0,j.useContext)(oe),i=(0,e.jsxs)(Ie.Z,{children:[(0,e.jsx)(Ie.Z.Item,{children:(0,e.jsx)("span",{onClick:function(){return t.addField({keys:a,name:n})},children:"sibling_node"})},"sibling_node"),(0,e.jsx)(Ie.Z.Item,{children:(0,e.jsx)("span",{onClick:function(){t.setOpenValue({key:a.concat(n,"properties"),value:!0}),t.addChildField({keys:a.concat(n,"properties")})},children:"child_node"})},"child_node")]});return(0,e.jsx)(K.Z,{position:"top",content:"add_node",children:(0,e.jsx)(Sn.Z,{droplist:i,children:(0,e.jsx)(ye.Z,{})})})}),Nn=bn,be=q.Z.Row,Q=q.Z.Col,An=$.Z.Option,Zn=(0,te.Pi)(function(r){var a=r.data,n=r.name,t=r.prefix,i=r.showAdv,s=r.showEdit,o=(0,j.useState)({}),l=D()(o,2),m=l[0],d=l[1],h=(0,j.useContext)(ee),u=(0,j.useContext)(oe);(0,j.useEffect)(function(){var w=r.prefix.filter(function(S){return S!=="properties"}).length;d({paddingLeft:"".concat(20*(w+1),"px")})},[r.prefix]);var N=function(){return[].concat(t,n)},I=function(S){return a.properties[S]&&me()(a.properties[S])==="object"?(ne.Z.error('The field "'.concat(S,'" already exists.')),!1):(u.changeName({keys:t,name:n,value:S}),!0)},k=function(S){var M=N().concat("description");u.changeValue({keys:M,value:S})},f=function(S){var M=N().concat("mock"),le=S?{mock:S}:"";u.changeValue({keys:M,value:le})},x=function(S){var M=N().concat("title");u.changeValue({keys:M,value:S})},y=function(S){var M=N().concat("type");u.changeType({keys:M,value:S})},H=function(){u.deleteField({keys:N()}),u.enableRequire({keys:t,name:n,required:!1})},U=function(S,M){s(N(),S,a.properties[n][S],M)},A=function(){i(N(),a.properties[n])},E=function(S){S!=="object"&&u.addField({keys:t,name:n})},B=function(){var S=N().concat("properties");u.setOpenValue({key:S})},F=function(S){u.enableRequire({keys:t,name:n,required:S})},C=a.properties[n],L=[].concat(t,n),G=[].concat(L,"properties").join(re);return g().get(u.open,t.join(re))?(0,e.jsxs)("div",{children:[(0,e.jsxs)(be,{justify:"space-around",gutter:10,align:"center",children:[(0,e.jsx)(Q,{flex:"auto",children:(0,e.jsxs)(be,{justify:"space-around",gutter:10,align:"center",children:[(0,e.jsx)(Q,{flex:8,children:(0,e.jsxs)(be,{justify:"space-around",align:"center",style:m,children:[(0,e.jsx)(Q,{flex:"20px",children:C.type==="object"?(0,e.jsx)("span",{className:"show-hide-children",onClick:B,children:g().get(u.open,[G])?(0,e.jsx)(Oe.Z,{}):(0,e.jsx)(we.Z,{})}):null}),(0,e.jsx)(Q,{flex:"auto",children:(0,e.jsx)(kn,{addAfter:(0,e.jsx)(K.Z,{position:"top",content:"required",children:(0,e.jsx)(de.Z,{style:{paddingLeft:0},onChange:F,checked:a.required===void 0?!1:a.required.indexOf(n)!==-1})}),onChange:I,value:n})})]})}),(0,e.jsx)(Q,{flex:3,children:(0,e.jsx)($.Z,{onChange:y,value:C.type,children:Ve.map(function(w,S){return(0,e.jsx)(An,{value:w,children:w},S)})})}),h.mock&&(0,e.jsx)(Q,{flex:3,children:(0,e.jsx)(Ee,{schema:C,showEdit:function(){return U("mock",C.type)},onChange:f})}),(0,e.jsx)(Q,{flex:h.mock?4:5,children:(0,e.jsx)(T.Z,{addAfter:(0,e.jsx)(ae.Z,{className:"input-icon-editor",onClick:function(){return U("title")}}),placeholder:"title",value:C.title,onChange:x})}),(0,e.jsx)(Q,{flex:h.mock?4:5,children:(0,e.jsx)(T.Z,{addAfter:(0,e.jsx)(ae.Z,{className:"input-icon-editor",onClick:function(){return U("description")}}),placeholder:"description",value:C.description,onChange:k})})]})}),(0,e.jsx)(Q,{flex:"66px",children:(0,e.jsxs)(be,{gutter:8,children:[(0,e.jsx)(Q,{span:8,children:(0,e.jsx)("span",{className:"adv-set",onClick:A,children:(0,e.jsx)(K.Z,{position:"top",content:"adv_setting",children:(0,e.jsx)(Fe.Z,{})})})}),(0,e.jsx)(Q,{span:8,children:(0,e.jsx)("span",{className:"close",onClick:H,children:(0,e.jsx)(yn.Z,{})})}),(0,e.jsx)(Q,{span:8,children:(0,e.jsx)("span",{className:"plus",onClick:function(){return E(C.type)},children:C.type==="object"?(0,e.jsx)(Nn,{prefix:t,name:n}):(0,e.jsx)(K.Z,{position:"top",content:"add_sibling_node",children:(0,e.jsx)(ye.Z,{})})})})]})})]}),(0,e.jsx)("div",{style:{paddingTop:8},children:De(L,C,s,i)})]}):null}),On=Zn,wn=function(a){var n=a.data,t=a.prefix,i=a.showEdit,s=a.showAdv;return(0,e.jsx)("div",{children:n.properties&&Object.keys(n.properties).map(function(o,l){return(0,e.jsx)(On,{data:n,name:o,prefix:t,showEdit:i,showAdv:s},l)})})},Fn=wn,De=function(a,n,t,i){var s=[].concat(a,"properties");switch(n.type){case"array":return(0,e.jsx)(jn,{prefix:a,data:n,showEdit:t,showAdv:i});case"object":return(0,e.jsx)(Fn,{prefix:s,data:n,showEdit:t,showAdv:i});default:return}},Vn=(0,te.Pi)(function(r){var a=r.showAdv,n=r.showEdit,t=(0,j.useContext)(oe);return(0,e.jsx)("div",{style:{paddingTop:8},children:De([],t.schema,n,a)})}),En=Vn,Re=v(48331),ie=v(94733),Te=q.Z.Row,se=q.Z.Col,Me=function(a,n,t,i){t[n]=a,i(t)},In=function(a){var n=a.data,t=(0,j.useContext)(ee);function i(l){Me(l,"uniqueItems",n,t.changeCustomValue)}function s(l){Me(l,"maxItems",n,t.changeCustomValue)}function o(l){Me(l,"minItems",n,t.changeCustomValue)}return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"default-setting",children:"base_setting"}),(0,e.jsxs)(Te,{className:"other-row",align:"center",children:[(0,e.jsx)(se,{span:6,className:"other-label",children:(0,e.jsxs)("span",{children:["uniqueItems\xA0",(0,e.jsx)(K.Z,{content:"unique_items",children:(0,e.jsx)(he.Z,{})}),"\xA0\uFF1A"]})}),(0,e.jsx)(se,{span:18,children:(0,e.jsx)(Re.Z,{checked:n.uniqueItems,onChange:i})})]}),(0,e.jsxs)(Te,{className:"other-row",align:"center",children:[(0,e.jsx)(se,{span:6,className:"other-label",children:"min_items \uFF1A"}),(0,e.jsx)(se,{span:18,children:(0,e.jsx)(ie.Z,{value:n.minItems,style:{width:"200px"},placeholder:"minItems",onChange:o})})]}),(0,e.jsxs)(Te,{className:"other-row",align:"center",children:[(0,e.jsx)(se,{span:6,className:"other-label",children:"max_items \uFF1A"}),(0,e.jsx)(se,{span:18,children:(0,e.jsx)(ie.Z,{value:n.maxItems,style:{width:"200px"},placeholder:"maxItems",onChange:s})})]})]})},Dn=In,Rn=q.Z.Row,Qe=q.Z.Col,We=$.Z.Option,Tn=function(a,n,t,i){var s=a==="true",o=g().cloneDeep(t);typeof a=="undefined"?delete o[n]:o[n]=s,i(o)},Mn=function(a){var n=a.data,t=(0,j.useContext)(ee),i=n.default===void 0?"":n.default?"true":"false";return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"default-setting",children:"base_setting"}),(0,e.jsxs)(Rn,{className:"other-row",align:"center",children:[(0,e.jsx)(Qe,{span:4,className:"other-label",children:"default\uFF1A"}),(0,e.jsx)(Qe,{span:20,children:(0,e.jsxs)($.Z,{value:i,allowClear:!0,placeholder:"default",style:{width:200},onChange:function(o){Tn(o,"default",n,t.changeCustomValue)},children:[(0,e.jsx)(We,{value:"true",children:"true"}),(0,e.jsx)(We,{value:"false",children:"false"})]})})]})]})},Pn=Mn,Y=q.Z.Row,R=q.Z.Col,$e=T.Z.TextArea,ve=function(a,n,t,i){t[n]=a,i(t)},Jn=function(a){var n=a.data,t=(0,j.useState)(a.data.enum!==void 0),i=D()(t,2),s=i[0],o=i[1],l=(0,j.useState)(a.data.enum===void 0?"":a.data.enum.join(`
`)),m=D()(l,2),d=m[0],h=m[1];(0,j.useEffect)(function(){h(a.data.enum===void 0?"":a.data.enum.join(`
`))},[a.data.enum]),(0,j.useEffect)(function(){o(a.data.enum!==void 0)},[a.data.enum]);var u=(0,j.useContext)(ee),N=function(E,B){o(E),E||(delete B.enum,delete B.enumDesc,h(""),u.changeCustomValue(B))},I=function(E,B){var F=E,C=F.split(`
`);B&&B.type==="number"&&d.split(`
`).length===C.length&&C[C.length-1]===""&&(F=F.slice(0,F.length-1)),h(F);var L=F.split(`
`),G=g().cloneDeep(B),w=[];L.forEach(function(S){if(!Number.isNaN(Number(S)))w.push(Number(S));else for(var M=1;M<S.length+1;M+=1)if(Number.isNaN(Number(S.slice(0,M)))&&M>1){w.push(Number(S.slice(0,M-1)));break}}),w.length>0&&F!==""?G.enum=w:(delete G.enum,delete G.enumDesc,h("")),u.changeCustomValue(G)},k=function(E,B){B.enumDesc=E,u.changeCustomValue(B)};function f(A){ve(A,"default",n,u.changeCustomValue)}function x(A){ve(A,"exclusiveMinimum",n,u.changeCustomValue)}function y(A){ve(A,"minimum",n,u.changeCustomValue)}function H(A){ve(A,"exclusiveMaximum",n,u.changeCustomValue)}function U(A){ve(A,"maximum",n,u.changeCustomValue)}return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"default-setting",children:"base_setting"}),(0,e.jsxs)(Y,{className:"other-row",align:"center",children:[(0,e.jsx)(R,{span:4,className:"other-label",children:"default\uFF1A"}),(0,e.jsx)(R,{span:20,children:(0,e.jsx)(T.Z,{value:n.default?n.default.toString():void 0,placeholder:"default",onChange:f})})]}),(0,e.jsxs)(Y,{className:"other-row",align:"center",children:[(0,e.jsx)(R,{span:12,children:(0,e.jsxs)(Y,{align:"center",children:[(0,e.jsx)(R,{span:13,className:"other-label",children:(0,e.jsxs)("span",{children:["exclusiveMinimum\xA0",(0,e.jsx)(K.Z,{content:"exclusiveMinimum",children:(0,e.jsx)(he.Z,{})}),"\xA0\uFF1A"]})}),(0,e.jsx)(R,{span:11,children:(0,e.jsx)(Re.Z,{checked:n.exclusiveMinimum,onChange:x})})]})}),(0,e.jsx)(R,{span:12,children:(0,e.jsxs)(Y,{align:"center",children:[(0,e.jsx)(R,{span:13,className:"other-label",children:(0,e.jsxs)("span",{children:["exclusiveMaximum\xA0",(0,e.jsx)(K.Z,{content:"exclusiveMaximum",children:(0,e.jsx)(he.Z,{})}),"\xA0\uFF1A"]})}),(0,e.jsx)(R,{span:11,children:(0,e.jsx)(Re.Z,{checked:n.exclusiveMaximum,onChange:H})})]})})]}),(0,e.jsxs)(Y,{className:"other-row",align:"center",children:[(0,e.jsx)(R,{span:12,children:(0,e.jsxs)(Y,{align:"center",children:[(0,e.jsx)(R,{span:8,className:"other-label",children:"minimum\uFF1A"}),(0,e.jsx)(R,{span:16,children:(0,e.jsx)(ie.Z,{value:n.minimum,style:{width:"100%"},placeholder:"minimum",onChange:y})})]})}),(0,e.jsx)(R,{span:12,children:(0,e.jsxs)(Y,{align:"center",children:[(0,e.jsx)(R,{span:8,className:"other-label",children:"maximum\uFF1A"}),(0,e.jsx)(R,{span:16,children:(0,e.jsx)(ie.Z,{value:n.maximum,style:{width:"100%"},placeholder:"maximum",onChange:U})})]})})]}),(0,e.jsxs)(Y,{className:"other-row",align:"center",children:[(0,e.jsx)(R,{span:4,className:"other-label",children:(0,e.jsxs)("span",{children:["enum ",(0,e.jsx)(de.Z,{checked:s,onChange:function(E){return N(E,n)}})," ","\uFF1A"]})}),(0,e.jsx)(R,{span:20,children:(0,e.jsx)($e,{value:d,disabled:!s,placeholder:"enum_msg",autoSize:{minRows:2,maxRows:6},onChange:function(E){return I(E,n)}})})]}),s&&(0,e.jsxs)(Y,{className:"other-row",align:"center",children:[(0,e.jsx)(R,{span:4,className:"other-label",children:(0,e.jsx)("span",{children:"enum_desc\uFF1A"})}),(0,e.jsx)(R,{span:20,children:(0,e.jsx)($e,{value:n.enumDesc,disabled:!s,placeholder:"enum_desc_msg",autoSize:{minRows:2,maxRows:6},onChange:function(E){return k(E,n)}})})]})]})},Ge=Jn,X=q.Z.Row,J=q.Z.Col,Bn=function(a){var n=a.data,t=(0,j.useState)(a.data.enum!==void 0),i=D()(t,2),s=i[0],o=i[1],l=on,m=(0,j.useContext)(ee);(0,j.useEffect)(function(){o(a.data.enum!==void 0)},[a.data.enum]);var d=function(f,x,y){y[x]=f,m.changeCustomValue(y)},h=function(f,x){var y=f.split(`
`);y.length===0||y.length===1&&!y[0]?(delete x.enum,delete x.enumDesc,m.changeCustomValue(x)):(x.enum=y,m.changeCustomValue(x))},u=function(f,x){x.enumDesc=f,m.changeCustomValue(x)},N=function(f,x){o(f),f||(delete x.enum,delete x.enumDesc,m.changeCustomValue(x))},I=function(f){return typeof f=="boolean"?f?"true":"false":f};return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"default-setting",children:"base_setting"}),(0,e.jsxs)(X,{className:"other-row",align:"center",children:[(0,e.jsx)(J,{span:4,className:"other-label",children:"default\uFF1A"}),(0,e.jsx)(J,{span:20,children:(0,e.jsx)(T.Z,{value:I(n.default),placeholder:"default",onChange:function(f){return d(f,"default",n)}})})]}),(0,e.jsxs)(X,{className:"other-row",align:"center",children:[(0,e.jsx)(J,{span:12,children:(0,e.jsxs)(X,{align:"center",children:[(0,e.jsx)(J,{span:8,className:"other-label",children:"minLength\uFF1A"}),(0,e.jsx)(J,{span:16,children:(0,e.jsx)(ie.Z,{style:{width:"100%"},value:n.minLength,placeholder:"min.length",onChange:function(f){return d(f,"minLength",n)}})})]})}),(0,e.jsx)(J,{span:12,children:(0,e.jsxs)(X,{align:"center",children:[(0,e.jsx)(J,{span:8,className:"other-label",children:"maxLength\uFF1A"}),(0,e.jsx)(J,{span:16,children:(0,e.jsx)(ie.Z,{style:{width:"100%"},value:n.maxLength,placeholder:"max.length",onChange:function(f){return d(f,"maxLength",n)}})})]})})]}),(0,e.jsxs)(X,{className:"other-row",align:"center",children:[(0,e.jsx)(J,{span:4,className:"other-label",children:(0,e.jsxs)("span",{children:["Pattern\xA0",(0,e.jsx)(K.Z,{content:"pattern",children:(0,e.jsx)(he.Z,{})}),"\xA0\uFF1A"]})}),(0,e.jsx)(J,{span:20,children:(0,e.jsx)(T.Z,{value:n.pattern,placeholder:"Pattern",onChange:function(f){return d(f,"pattern",n)}})})]}),(0,e.jsxs)(X,{className:"other-row",align:"center",children:[(0,e.jsx)(J,{span:4,className:"other-label",children:(0,e.jsxs)("span",{children:["enum ",(0,e.jsx)(de.Z,{checked:s,onChange:function(f){return N(f,n)}})," ","\uFF1A"]})}),(0,e.jsx)(J,{span:20,children:(0,e.jsx)(T.Z.TextArea,{value:n.enum&&n.enum.length>0?n.enum.join(`
`):"",disabled:!s,placeholder:"enum_msg",autoSize:{minRows:2,maxRows:6},onChange:function(f){return h(f,n)}})})]}),s&&(0,e.jsxs)(X,{className:"other-row",align:"center",children:[(0,e.jsx)(J,{span:4,className:"other-label",children:"enum_desc\uFF1A"}),(0,e.jsx)(J,{span:20,children:(0,e.jsx)(T.Z.TextArea,{value:n.enumDesc,disabled:!s,placeholder:"enum_desc_msg",autoSize:{minRows:2,maxRows:6},onChange:function(f){return u(f,n)}})})]}),(0,e.jsxs)(X,{className:"other-row",align:"center",children:[(0,e.jsx)(J,{span:4,className:"other-label",children:"format\uFF1A"}),(0,e.jsx)(J,{span:20,children:(0,e.jsx)($.Z,{showSearch:!0,style:{width:200},value:n.format,allowClear:!0,placeholder:"Select a format",dropdownMenuClassName:"json-schema-react-editor-adv-modal-select",onChange:function(f){return d(f,"format",n)},filterOption:function(f,x){return(x==null?void 0:x.props.value.toLowerCase().indexOf(f.toLowerCase()))>=0},children:l.map(function(k){return(0,e.jsx)($.Z.Option,{value:k.name,children:k.name},k.name)})})})]})]})},Ln=Bn,qn=function(a){switch(a.type){case"string":return(0,e.jsx)(Ln,{data:a});case"number":return(0,e.jsx)(Ge,{data:a});case"boolean":return(0,e.jsx)(Pn,{data:a});case"integer":return(0,e.jsx)(Ge,{data:a});case"array":return(0,e.jsx)(Dn,{data:a});default:return(0,e.jsx)(e.Fragment,{})}},Kn=function(a,n){a&&n(JSON.parse(a))},zn=function(a){var n=a.data,t=qn(JSON.parse(n)),i=(0,j.useContext)(ee);return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:t}),(0,e.jsx)("div",{className:"default-setting",children:"all_setting"}),(0,e.jsx)(ke,{height:300,value:n,language:"json",onChange:function(o){return Kn(o,i.changeCustomValue)}})]})},Hn=zn,Un=v(861),Qn=v.n(Un),Wn=v(74704),ge=v.n(Wn),p;(function(r){r.Null="null",r.Boolean="boolean",r.Integer="integer",r.Number="number",r.String="string",r.Object="object",r.Array="array"})(p||(p={}));function Pe(r,a){switch(me()(r)){case"number":return Number.isInteger(r)?{type:p.Integer}:{type:p.Number};case"boolean":return{type:p.Boolean};case"string":return{type:p.String};case"object":return r===null?{type:p.Null}:Array.isArray(r)?$n(r,a):Gn(r,a);default:throw new Error("unknown type")}}function $n(r,a){if(r.length===0)return{type:p.Array};var n=r.map(function(i){return Pe(i,a)}),t=xe(n);return{type:p.Array,items:t}}function Gn(r,a){var n=Object.keys(r);if(n.length===0)return{type:p.Object};var t=Object.entries(r).reduce(function(s,o){var l=D()(o,2),m=l[0],d=l[1];return s[m]=Pe(d,a),s},{}),i={type:p.Object,properties:t};return a!=null&&a.noRequired||(i.required=n),i}function xe(r,a){for(var n,t,i=(n={},V()(n,p.Null,[]),V()(n,p.Boolean,[]),V()(n,p.Integer,[]),V()(n,p.Number,[]),V()(n,p.String,[]),V()(n,p.Array,[]),V()(n,p.Object,[]),n),s=Ye(r),o=0,l=s;o<l.length;o++){var m=l[o],d=m.type;(i[d].length===0||aa(m))&&i[d].push(m)}var h=(t={},V()(t,p.Null,i[p.Null][0]),V()(t,p.Boolean,i[p.Boolean][0]),V()(t,p.Number,i[p.Number][0]),V()(t,p.Integer,i[p.Integer][0]),V()(t,p.String,i[p.String][0]),V()(t,p.Array,Yn(i[p.Array])),V()(t,p.Object,Xn(i[p.Object],a)),t);h[p.Number]&&delete h[p.Integer];var u=Object.values(h).filter(Boolean),N=u.length>1;return N?_n({anyOf:u}):u[0]}function Yn(r){if(!(!r||r.length===0)){var a=[],n=ge()(r),t;try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.items){var s=Je(i.items);a.push.apply(a,s)}}}catch(l){n.e(l)}finally{n.f()}if(a.length===0)return{type:p.Array};var o=xe(a);return{type:p.Array,items:o}}}function Xn(r,a){if(!(!r||r.length===0)){var n=r.map(function(y){return y.properties}).filter(Boolean),t=Object.create(null),i=ge()(n),s;try{for(i.s();!(s=i.n()).done;)for(var o=s.value,l=0,m=Object.entries(o);l<m.length;l++){var d,h=D()(m[l],2),u=h[0],N=h[1];t[u]||(t[u]=[]);var I=Je(N);(d=t[u]).push.apply(d,I)}}catch(y){i.e(y)}finally{i.f()}var k=Object.entries(t).reduce(function(y,H){var U=D()(H,2),A=U[0],E=U[1];return E.length===1?y[A]=E[0]:y[A]=xe(E),y},{}),f={type:p.Object};if(Object.keys(k).length>0&&(f.properties=k),!(a!=null&&a.noRequired)){var x=ea(r.map(function(y){return y.required||[]}));x.length>0&&(f.required=x)}return f}}function Je(r){return r?r.anyOf?Ye(r.anyOf):Array.isArray(r.type)?r.type.map(function(a){return{type:a}}):[r]:[]}function Ye(r){return!r||r.length===0?[]:r.flatMap(function(a){return Je(a)})}function _n(r){var a=[],n=[],t=ge()(r.anyOf),i;try{for(t.s();!(i=t.n()).done;){var s=i.value;Array.isArray(s.type)?a.push.apply(a,Qn()(s.type)):na(s)?a.push(s.type):n.push(s)}}catch(l){t.e(l)}finally{t.f()}if(n.length===0)return{type:a};var o=[];return a.length>0&&o.push({type:a.length>1?a:a[0]}),o.push.apply(o,n),{anyOf:o}}function ea(r){if(r.length===0)return[];var a=r.filter(Array.isArray),n={},t=ge()(a),i;try{for(t.s();!(i=t.n()).done;){var s=i.value,o=ge()(s),l;try{for(o.s();!(l=o.n()).done;){var m=l.value;n[m]?n[m]++:n[m]=1}}catch(d){o.e(d)}finally{o.f()}}}catch(d){t.e(d)}finally{t.f()}return Object.entries(n).filter(function(d){var h=D()(d,2),u=h[0],N=h[1];return N===a.length}).map(function(d){var h=D()(d,1),u=h[0];return u})}function na(r){var a=Object.keys(r);return a.length===1&&a[0]==="type"}function aa(r){var a=r.type;return a===p.Array||a===p.Object}function Be(r,a){var n=r;typeof r=="undefined"&&(n=null);var t=JSON.parse(JSON.stringify(n));return Pe(t,a)}function ta(r,a){return xe(r,a)}function Oa(r,a,n){var t=Be(a,n);return xe([r,t],n)}function wa(r,a){var n=r.map(function(t){return Be(t,a)});return ta(n,a)}function Le(r,a,n){if(r===void 0&&a===void 0)return!0;if(r===void 0||a===void 0)return!1;var t=unwrapSchema(r),i=unwrapSchema(a);if(t.length!==i.length)return!1;if(t.length===0)return!0;for(var s=function(N,I){return N.type.toLocaleString().localeCompare(I.type.toLocaleString())},o=_toConsumableArray(t).sort(s),l=_toConsumableArray(i).sort(s),m=0;m<t.length;m++){var d=o[m],h=l[m];if(d.type!==h.type||!(n!=null&&n.ignoreRequired)&&!Xe(d.required,h.required)||!ra(d.properties,h.properties,n)||!Le(d.items,h.items,n))return!1}return!0}function Xe(r,a){if(r===void 0&&a===void 0)return!0;if(r===void 0||a===void 0)return!1;var n=new Set(r),t=new Set(a),i=new Set([].concat(_toConsumableArray(r),_toConsumableArray(a)));return i.size===n.size&&i.size===t.size}function ra(r,a,n){if(r===void 0&&a===void 0)return!0;if(r===void 0||a===void 0)return!1;var t=Object.keys(r),i=Object.keys(a);if(!Xe(t,i))return!1;for(var s=0,o=t;s<o.length;s++){var l=o[s];if(!Le(r[l],a[l],n))return!1}return!0}function Fa(r,a,n){var t=mergeSchemas([r,a]);return Le(t,r,n)}var pe=q.Z.Row,z=q.Z.Col,ee=(0,j.createContext)({changeCustomValue:function(){},mock:!1}),ia=(0,te.Pi)(function(r){var a=(0,j.useContext)(oe),n=(0,j.useState)({visible:!1,show:!0,editVisible:!1,description:"",descriptionKey:null,advVisible:!1,itemKey:[],curItemCustomValue:null,checked:!1,editorModalName:"",mock:""}),t=D()(n,2),i=t[0],s=t[1],o=(0,j.useState)(),l=D()(o,2),m=l[0],d=l[1],h=(0,j.useState)(),u=D()(h,2),N=u[0],I=u[1],k=(0,j.useState)(null),f=D()(k,2),x=f[0],y=f[1],H=function(){s(function(c){return b()(b()({},c),{},{visible:!0})})},U=function(){if(x!=="schema"){if(!N)return;var c=null;try{c=JSON.parse(N)}catch(ue){ne.Z.error("json \u6570\u636E\u683C\u5F0F\u6709\u8BEF");return}var O=b()({},Be(c));a.changeSchema(O)}else{if(!m)return;var P=null;try{P=JSON.parse(m)}catch(ue){ne.Z.error("json \u6570\u636E\u683C\u5F0F\u6709\u8BEF");return}a.changeSchema(P)}s(function(ue){return b()(b()({},ue),{},{visible:!1})})},A=function(){s(function(c){return b()(b()({},c),{},{visible:!1})})},E=function(c){if(c){var O=JSON.parse(c);O=ze(O),a.changeSchema(O)}},B=function(c,O){a.changeType({keys:[c],value:O})},F=function(c){I(c||void 0)},C=function(c){d(c||void 0)},L=function(c){a.addChildField({keys:[c]}),s(function(O){return b()(b()({},O),{},{show:!0})})},G=function(){s(function(c){return b()(b()({},c),{},{show:!c.show})})},w=function(c,O){var P=O;c[0]==="mock"&&O&&(P={mock:O}),a.changeValue({keys:c,value:P})},S=function(c){s(function(P){return b()(b()({},P),{},{editVisible:!1})});var O=i[c];c==="mock"&&(O=O?{mock:O}:""),a.changeValue({keys:i.descriptionKey,value:O})},M=function(){s(function(c){return b()(b()({},c),{},{editVisible:!1})})},le=function(c,O,P,ue){if(!(ue==="object"||ue==="array")){var Sa=[].concat(c,O),an=P;typeof P!="string"&&(an=O==="mock"?P?P.mock:"":P),s(function(ba){var je;return b()(b()({},ba),{},(je={editVisible:!0},V()(je,O,an),V()(je,"descriptionKey",Sa),V()(je,"editorModalName",O),je))})}},fa=function(c,O){s(function(P){return b()(b()({},P),{},V()({},O,c))})},va=function(){i.itemKey.length===0?a.changeSchema(i.curItemCustomValue):a.changeValue({keys:i.itemKey,value:i.curItemCustomValue}),s(function(c){return b()(b()({},c),{},{advVisible:!1})})},ga=function(){s(function(c){return b()(b()({},c),{},{advVisible:!1})})},en=function(c,O){s(function(P){return b()(b()({},P),{},{advVisible:!0,itemKey:c,curItemCustomValue:O})})},xa=function(c){s(function(O){return b()(b()({},O),{},{curItemCustomValue:c})})},pa=function(c){s(function(O){return b()(b()({},O),{},{checked:c})}),a.requireAll({required:c})},ja=i.visible,ya=i.editVisible,nn=i.advVisible,Ca=i.checked,ce=i.editorModalName;function ka(){le([],"mock",a.schema.mock,a.schema.type)}return(0,e.jsx)(ee.Provider,{value:{changeCustomValue:xa,mock:r.mock},children:(0,e.jsxs)("div",{className:"json-schema-react-editor",children:[(0,e.jsx)(Ne.Z,{className:"import-json-button",type:"primary",onClick:H,children:"import_json"}),(0,e.jsx)(Ae.Z,{maskClosable:!1,visible:ja,title:"import_json",onOk:U,onCancel:A,className:"json-schema-react-editor-import-modal",okText:"ok",cancelText:"cancel",footer:[(0,e.jsx)(Ne.Z,{onClick:A,children:"cancel"},"back"),(0,e.jsx)(Ne.Z,{type:"primary",onClick:U,children:"ok"},"submit")],children:(0,e.jsxs)(Ze.Z,{defaultActiveTab:"json",onChange:function(c){y(c)},children:[(0,e.jsx)(Ze.Z.TabPane,{title:"JSON",children:(0,e.jsx)(ke,{height:300,language:"json",onChange:F})},"json"),(0,e.jsx)(Ze.Z.TabPane,{title:"JSON-SCHEMA",children:(0,e.jsx)(ke,{height:300,language:"json",onChange:C})},"schema")]})}),(0,e.jsx)(Ae.Z,{title:(0,e.jsxs)("div",{children:[ce,"\xA0",ce==="mock"&&(0,e.jsx)(K.Z,{content:"mockLink",children:(0,e.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/YMFE/json-schema-editor-visual/issues/38",children:(0,e.jsx)(he.Z,{})})})]}),maskClosable:!1,visible:ya,onOk:function(){return S(ce)},onCancel:M,okText:"ok",cancelText:"cancel",children:(0,e.jsx)(T.Z.TextArea,{value:i[ce],placeholder:ce,onChange:function(c){return fa(c,ce)},autoSize:{minRows:6,maxRows:10}})}),nn&&(0,e.jsx)(Ae.Z,{title:"adv_setting",maskClosable:!1,visible:nn,onOk:va,onCancel:ga,okText:"ok",style:{width:780},cancelText:"cancel",className:"json-schema-react-editor-adv-modal",children:(0,e.jsx)(Hn,{data:JSON.stringify(i.curItemCustomValue,null,2)})}),(0,e.jsxs)(pe,{style:{marginTop:10},children:[r.jsonEditor&&(0,e.jsx)(z,{span:8,children:(0,e.jsx)(ke,{height:500,value:JSON.stringify(a.schema,null,2),language:"json",onChange:E})}),(0,e.jsxs)(z,{span:r.jsonEditor?16:24,className:"wrapper",children:[(0,e.jsxs)(pe,{align:"center",gutter:10,children:[(0,e.jsx)(z,{flex:"auto",children:(0,e.jsxs)(pe,{align:"center",gutter:10,children:[(0,e.jsx)(z,{flex:8,children:(0,e.jsxs)(pe,{justify:"space-around",align:"center",children:[(0,e.jsx)(z,{flex:"20px",children:a.schema.type==="object"?(0,e.jsx)("span",{className:"show-hide-children",onClick:G,children:i.show?(0,e.jsx)(Oe.Z,{}):(0,e.jsx)(we.Z,{})}):null}),(0,e.jsx)(z,{flex:"auto",children:(0,e.jsx)(T.Z,{disabled:!0,value:"root",addAfter:(0,e.jsx)(K.Z,{position:"top",content:"checked_all",children:(0,e.jsx)(de.Z,{style:{paddingLeft:0},checked:Ca,disabled:!(a.schema.type==="object"||a.schema.type==="array"),onChange:function(c){return pa(c)}})})})})]})}),(0,e.jsx)(z,{flex:3,children:(0,e.jsx)($.Z,{onChange:function(c){return B("type",c)},value:a.schema.type||"object",children:Ve.map(function(Z,c){return(0,e.jsx)($.Z.Option,{value:Z,children:Z},c)})})}),r.mock&&(0,e.jsx)(z,{flex:3,children:(0,e.jsx)(Ee,{schema:a.schema,showEdit:ka,onChange:function(c){return w(["mock"],c)}})}),(0,e.jsx)(z,{flex:r.mock?4:5,children:(0,e.jsx)(T.Z,{placeholder:"title",value:a.schema.title,onChange:function(c){return w(["title"],c)},addAfter:(0,e.jsx)(ae.Z,{className:"input-icon-editor",onClick:function(){return le([],"title",a.schema.title)}})})}),(0,e.jsx)(z,{flex:r.mock?4:5,children:(0,e.jsx)(T.Z,{addAfter:(0,e.jsx)(ae.Z,{className:"input-icon-editor",onClick:function(){return le([],"description",a.schema.description)}}),placeholder:"description",value:a.schema.description,onChange:function(c){return w(["description"],c)}})})]})}),(0,e.jsx)(z,{flex:"66px",children:(0,e.jsxs)(pe,{gutter:8,children:[(0,e.jsx)(z,{span:8,children:(0,e.jsx)("span",{className:"adv-set",onClick:function(){return en([],a.schema)},children:(0,e.jsx)(K.Z,{position:"top",content:"adv_setting",children:(0,e.jsx)(Fe.Z,{})})})}),(0,e.jsx)(z,{span:8,children:a.schema.type==="object"?(0,e.jsx)("span",{className:"plus",onClick:function(){return L("properties")},children:(0,e.jsx)(K.Z,{position:"top",content:"add_child_node",children:(0,e.jsx)(ye.Z,{})})}):null})]})})]}),i.show&&(0,e.jsx)(En,{showEdit:le,showAdv:en})]})]})]})})}),sa=ia,oa=v(56690),la=v.n(oa),ca=v(89728),ua=v.n(ca),_e=function(){function r(a){la()(this,r),V()(this,"schema",void 0),V()(this,"open",void 0),V()(this,"fieldNum",void 0),a?(a.type==="object"&&!a.properties&&(a.properties={}),this.schema=a):this.schema={type:"object",properties:{},required:[]},this.open={properties:!0},this.fieldNum=0,(0,Ke.ky)(this)}return ua()(r,[{key:"changeSchema",value:function(n){this.schema=ze(n)}},{key:"addChildField",value:function(n){for(var t=n.keys,i=g().clone(this.schema),s=g().get(i,t),o="field_".concat(this.fieldNum++);typeof s[o]!="undefined";)o="field_".concat(this.fieldNum++);s!==void 0&&(i=g().update(i,t,function(l){return g().assign(l,V()({},o,Ce("string")))})),this.schema=He(i,t,o)}},{key:"deleteField",value:function(n){var t=n.keys,i=g().clone(this.schema);g().unset(i,t),this.schema=i}},{key:"addField",value:function(n){for(var t=n.keys,i=n.name,s=g().clone(this.schema),o=g().get(this.schema,t),l="field_".concat(this.fieldNum++);typeof o[l]!="undefined";)l="field_".concat(this.fieldNum++);var m={};if(i)for(var d in o)m[d]=o[d],d===i&&(m[l]=Ce("string"));else m=g().assign(o,V()({},l,Ce("string")));var h=g().update(s,t,function(u){return g().assign(u,m)});this.schema=He(h,t,l)}},{key:"changeType",value:function(n){var t=n.keys,i=n.value,s=fe(t),o=s.length?g().get(this.schema,s):this.schema;if(o.type!==i){var l=g().clone(this.schema),m=o.description?{description:o.description}:{},d=b()(b()({},Ce(i)),m);s.length===0?this.schema=b()({},d):this.schema=g().set(l,s,d)}}},{key:"enableRequire",value:function(n){var t=n.keys,i=n.name,s=n.required,o=fe(t),l=o.length?g().get(this.schema,o):this.schema,m=[].concat(l.required||[]),d=m.indexOf(i),h=d>=0;!s&&h?m.splice(d,1):s&&!h&&m.push(i),o.push("required");var u=g().clone(this.schema);this.schema=g().set(u,o,m)}},{key:"changeName",value:function(n){var t=n.keys,i=n.name,s=n.value,o=g().clone(this.schema),l=fe(t),m=l.length===0?o:g().get(o,l),d=[].concat(m.required||[]),h=g().get(o,t),u={},N=h[i],I=[].concat(t,s,"properties").join(re),k=[].concat(t,i,"properties").join(re);if(N.properties&&(delete this.open[k],this.open[I]=!0),!(h[s]&&me()(h[s])==="object")){d=d.map(function(x){return x===i?s:x}),l.push("required"),o=g().set(o,l,d);for(var f in h)f===i?u[s]=h[f]:u[f]=h[f];this.schema=g().set(o,t,u)}}},{key:"changeValue",value:function(n){var t=n.keys,i=n.value,s=g().clone(this.schema);i?(g().set(s,t,i),this.schema=s):this.deleteField({keys:t})}},{key:"requireAll",value:function(n){var t=n.required,i=g().clone(this.schema);this.schema=Ue(i,t)}},{key:"setOpenValue",value:function(n){var t=n.key,i=n.value,s=g().clone(this.open),o=t.join(re),l=i===void 0?!g().get(this.open,[o]):i;this.open=g().set(s,[o],l)}}]),r}(),oe=(0,j.createContext)(new _e),da=(0,te.Pi)(function(r){var a=(0,j.useState)(new _e),n=D()(a,1),t=n[0];return(0,j.useEffect)(function(){var i;if(r.data)if(typeof r.data=="string")try{i=JSON.parse(r.data)}catch(s){ne.Z.error("\u4F20\u5165\u7684\u5B57\u7B26\u4E32\u975E json \u683C\u5F0F!")}else Object.prototype.toString.call(r.data)==="[object Object]"?Object.keys(r.data).length?i=r.data:i={type:"object"}:ne.Z.error("json\u6570\u636E\u53EA\u652F\u6301\u5B57\u7B26\u4E32\u548C\u5BF9\u8C61");else i={type:"object"};t.changeSchema(i)},[JSON.stringify(r.data)]),(0,Ke.U5)(function(){return t.schema},function(i){r.onChange&&r.onChange(JSON.parse(JSON.stringify(i)))}),(0,e.jsx)("div",{children:(0,e.jsx)(oe.Provider,{value:t,children:(0,e.jsx)(sa,{jsonEditor:r.jsonEditor,mock:r.mock})})})}),ha=function(a){return(0,e.jsx)("div",{children:(0,e.jsx)(da,b()({},a))})},ma=ha}}]);
